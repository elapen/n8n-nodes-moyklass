{"openapi":"3.0.0","info":{"title":"API для работы с CRM \"Мой Класс\"","version":"1.1.8","x-logo":{"url":"logo.png","altText":"Мой Класс","href":"https://moyklass.com"}},"servers":[{"url":"https://api.moyklass.com","description":"Основной сервер"}],"security":[{"companyApiKey":[]}],"x-tagGroups":[{"name":"API Компании","tags":["companyAuth","rateLimit","company","managers","users","payments","invoices","joins","tasks","groups","lessons","catalog","files","subscriptions","userSubscriptions","userComments","documents","cashboxes","bonusProgram","families"]},{"name":"API ученика","tags":["userAuth","userCommon","userPayments","userLessons","userFiles"]}],"tags":[{"name":"rateLimit","x-displayName":"Ограничения","description":"На запросы к API действует ограничение не более 7 запросов в секунду.","x-traitTag":true},{"name":"companyAuth","x-displayName":"Авторизация"},{"name":"company","x-displayName":"Компания"},{"name":"users","x-displayName":"Ученики/лиды","description":"В системе \"клиент\" и \"лид\" - это один и тот же \"ученик\", просто находящийся в разных статусах.\n\nПодробнее: https://help.moyklass.com/ru/knowledge_base/article/79/category/4/\n"},{"name":"payments","x-displayName":"Платежи"},{"name":"invoices","x-displayName":"Счета"},{"name":"managers","x-displayName":"Сотрудники"},{"name":"joins","x-displayName":"Записи в группу","description":"\n\n\nПодробнее о работе с записями в группу в CRM: https://help.moyklass.com/ru/knowledge_base/article/286/category/5/\n\nПодробнее о разнице между учеником и записью в группу: https://help.moyklass.com/ru/knowledge_base/article/79/category/4/\n"},{"name":"subscriptions","x-displayName":"Виды абонементов"},{"name":"userSubscriptions","x-displayName":"Абонементы учеников"},{"name":"tasks","x-displayName":"Задачи"},{"name":"groups","x-displayName":"Группы"},{"name":"lessons","x-displayName":"Занятия"},{"name":"catalog","x-displayName":"Справочники"},{"name":"files","x-displayName":"Файлы"},{"name":"userComments","x-displayName":"Комментарии учеников"},{"name":"userAuth","x-displayName":"Авторизация"},{"name":"userLessons","x-displayName":"Занятия"},{"name":"userCommon","x-displayName":"Ученики"},{"name":"userPayments","x-displayName":"Платежи и списания"},{"name":"inProgress","x-displayName":"В разработке","description":"Методы, которые еще не реализованы и в данный момент находятся в разработке"},{"name":"userFiles","x-displayName":"Файлы"},{"name":"documents","x-displayName":"Документы"},{"name":"cashboxes","x-displayName":"Кассы"},{"name":"bonusProgram","x-displayName":"Программа лояльности"},{"name":"families","x-displayName":"Семьи"}],"paths":{"/v1/company/auth/getToken":{"post":{"tags":["companyAuth"],"summary":"Получение токена","description":"Авторизация. Получение токена для работы с API.\nКлючи API вы можете создавать и просматривать в разделе CRM [\"Мой Класс\" - \"Настройки - API\"](https://app.moyklass.com/settings/settings/api).\n\n[Подробнее](https://help.moyklass.com/ru/knowledge_base/article/83/category/24/).\n","security":[],"x-codeSamples":[{"lang":"PHP","source":"$api_key = 'Oul76YVXXQnH3YWWidkDaHyoUBGHCOyOO0oky7y6T1EJBAWnEi'; //Ваш ключ доступа\n$url_auth = 'https://api.moyklass.com/v1/company/auth/getToken';\n$post_auth = array(\n  'apiKey' => $api_key\n);\n$curl = curl_init();\ncurl_setopt($curl, CURLOPT_CUSTOMREQUEST,\"POST\");\ncurl_setopt($curl, CURLOPT_URL, $url_auth);\ncurl_setopt($curl, CURLOPT_POSTFIELDS, json_encode($post_auth));\ncurl_setopt($curl, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n$out = curl_exec($curl);\ncurl_close($curl);\n$response = json_decode($out, true);\n$access_token = $response['accessToken'];\nprint_r($access_token)\n"}],"requestBody":{"description":"Параметры авторизации","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeyAuth"}}}},"responses":{"200":{"description":"Токен доступа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessToken"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/auth/refreshToken":{"post":{"tags":["companyAuth"],"summary":"Обновление токена","description":"Генерирует новый токен, текущий токен при этом продолжает действовать.","responses":{"200":{"description":"Новый токен доступа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccessToken"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/auth/revokeToken":{"post":{"tags":["companyAuth"],"summary":"Удаление токена","description":"Удаляет существующий токен. Токен передается в заголовке **x-access-token**","responses":{"204":{"description":"Токен удален"},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/users":{"get":{"tags":["users"],"summary":"Список учеников","description":"Производит поиск учеников в соответствии с фильтром","parameters":[{"$ref":"#/components/parameters/userIds"},{"in":"query","name":"attributes","style":"deepObject","explode":true,"schema":{"type":"object","additionalProperties":true},"description":"Поиск по признакам. Пример использования ?attributes[признак]=значение. \n* `attributes[1]=1901-01-01`\n* `attributes[birthday]=1901-01-01`\n"},{"$ref":"#/components/parameters/createdAt"},{"$ref":"#/components/parameters/updatedAt"},{"$ref":"#/components/parameters/stateChangedAt"},{"$ref":"#/components/parameters/clientStateId"},{"$ref":"#/components/parameters/phone"},{"$ref":"#/components/parameters/email"},{"$ref":"#/components/parameters/name"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"},{"name":"sort","description":"Сортировка","in":"query","example":"createdAt","schema":{"default":"id","type":"string","enum":["id","name","createdAt","updatedAt"]}},{"$ref":"#/components/parameters/sortDirection"},{"$ref":"#/components/parameters/amoCRMContactId"},{"$ref":"#/components/parameters/bitrixContactId"},{"$ref":"#/components/parameters/vkAdsBannerId"},{"$ref":"#/components/parameters/includePayLink"},{"$ref":"#/components/parameters/includeAvatarLink"}],"x-codeSamples":[{"lang":"PHP","source":"$access_token = 'Ваш accessToken';\n$url = 'https://api.moyklass.com/v1/company/users?phone=79221&limit=4';\n$curl = curl_init();\ncurl_setopt($curl, CURLOPT_URL, $url);\ncurl_setopt($curl, CURLOPT_HTTPHEADER, array(\n        \"x-access-token:\" . $access_token,\n        \"Content-Type: application/json\"\n));\ncurl_setopt($curl, CURLOPT_RETURNTRANSFER, true);\n$out = curl_exec($curl);\ncurl_close($curl);\n$response = json_decode($out, true);\nprint_r($response);\n"}],"responses":{"200":{"description":"Список учеников","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Users"}}}},"400":{"description":"Ошибка в параметрах фильтра","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["users"],"summary":"Создание ученика","description":"Создает нового ученика","requestBody":{"description":"Информация об ученике","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"200":{"description":"Данные созданного ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/users/{userId}":{"get":{"tags":["users"],"summary":"Информация об ученике","description":"Возвращает основную информацию об ученике","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},{"$ref":"#/components/parameters/includeJoins"},{"$ref":"#/components/parameters/includePayLink"},{"$ref":"#/components/parameters/includeAvatarLink"}],"responses":{"200":{"description":"Данные ученика","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/User"},{"properties":{"avatarLink":{"description":"Ссылка на фото сотрудника","type":"string","nullable":true,"readOnly":true},"joins":{"description":"Заявки ученика (при includeJoins=true)","type":"array","items":{"$ref":"#/components/schemas/Join"}},"payLinkKey":{"description":"Ключ оплаты (при includePayLink=true)","type":"string","example":"0047245cc1bc74076d704e20000be5aaa798e432"}}}]}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["users"],"summary":"Изменение ученика","description":"Изменяет основную информацию об ученике","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"requestBody":{"description":"Обновленная информация об ученике","required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/User"},{"properties":{"createSourceId":{"readOnly":true}}}]}}}},"responses":{"200":{"description":"Обновленные данные ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["users"],"summary":"Удаление ученика","description":"Удаляет ученика из системы. Вместе с ним удаляет также все его записи, платежи, документы и т.д.","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"responses":{"204":{"description":"Ученик удален"},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"patch":{"tags":["users"],"summary":"Изменение ученика","description":"Изменяет только переданные данные об ученике","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"requestBody":{"description":"Обновленная информация об ученике","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPatch"}}}},"responses":{"200":{"description":"Обновленные данные ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPatch"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/users/{userId}/tags":{"post":{"tags":["users"],"summary":"Изменение тегов у ученика","description":"Изменяет теги у ученика","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые теги","required":true,"content":{"application/json":{"schema":{"properties":{"tags":{"description":"Id тегов","type":"array","items":{"type":"integer","format":"int64"},"example":[2,4]}},"required":["tags"]}}}},"responses":{"204":{"description":"Теги у ученика изменены"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/payments":{"get":{"tags":["payments"],"summary":"Платежи","description":"Возвращает список платежей","parameters":[{"$ref":"#/components/parameters/createdAt"},{"name":"date","in":"query","description":"Дата платежа. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"summa","in":"query","description":"Сумма платежа. Списания и возвраты указываются с минусом.","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"number"}}},{"name":"invoiceId","in":"query","description":"Id счета","schema":{"type":"integer","format":"int64"}},{"name":"optype","in":"query","description":"Тип операции. income - входящий платеж, debit - списание, refund - возврат","style":"form","explode":false,"schema":{"type":"array","maxLength":3,"items":{"type":"string","enum":["income","debit","refund"]}}},{"name":"paymentTypeId","in":"query","description":"Тип платежа","schema":{"type":"integer"}},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/filialId"},{"name":"appendInvoices","in":"query","description":"Возвратить вместе с платежами данные счетов","schema":{"type":"boolean","default":false}},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список платежей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentsExtended"}}}}}},"post":{"tags":["payments"],"summary":"Создание платежа","description":"Добавляет платеж клиенту. В этом методе можно добавить входящий платеж (income) и возврат (refund)","requestBody":{"description":"Информация о платеже","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentExtended"}}}},"responses":{"200":{"description":"Данные созданного платежа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentExtended"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"500":{"description":"Ошибка на стороне сервера","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/payments/{paymentId}":{"get":{"tags":["payments"],"summary":"Информация о платеже","description":"Возвращает информацию о платеже","parameters":[{"name":"paymentId","in":"path","description":"ID платежа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные платежа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentExtended"}}}},"404":{"description":"Платеж не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["payments"],"summary":"Изменение платежа","description":"Изменяет платеж. Применяется только к приходам (optype=income), для других типов платежей будет возвращен код 403","parameters":[{"name":"paymentId","in":"path","description":"ID платежа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленная информация по платежу","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentExtendedEdit"}}}},"responses":{"200":{"description":"Обновленные данные платежа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPaymentExtended"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Платеж не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["payments"],"summary":"Удаление платежа","description":"Удаляет платеж из системы.","parameters":[{"name":"paymentId","in":"path","description":"Id платежа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Платеж удален"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Платеж не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/invoices":{"get":{"tags":["invoices"],"summary":"Счета","description":"Возвращает список счетов","parameters":[{"$ref":"#/components/parameters/createdAt"},{"name":"payUntil","in":"query","description":"Срок оплаты счета. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"price","in":"query","description":"Сумма счета.","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"number"}}},{"name":"userSubscriptionId","description":"ID абонемента ученика","in":"query","example":123,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},{"name":"joinId","description":"ID записи в группу счета с формой оплаты \"Единой суммой\"","in":"query","example":123,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список счетов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInvoices"}}}}}}},"/v1/company/invoices/{invoiceId}":{"get":{"tags":["invoices"],"summary":"Информация о счете","description":"Возвращает информацию о счете","parameters":[{"name":"invoiceId","in":"path","description":"ID счета","required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"responses":{"200":{"description":"Данные счета","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInvoice"}}}},"404":{"description":"Счет не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["invoices"],"summary":"Изменение счета","description":"Изменяет счет","parameters":[{"name":"invoiceId","in":"path","description":"ID счета","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленная информация по счету","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInvoiceEdit"}}}},"responses":{"200":{"description":"Обновленные данные счета","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInvoice"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Счет не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["invoices"],"summary":"Удаление счета","description":"Удаляет счет из системы. Удаление возможно только если нет списаний по счету, иначе будет возвращен код 400","parameters":[{"name":"invoiceId","in":"path","description":"Id счета","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Счет удален"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Счет не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/managers":{"get":{"tags":["managers"],"summary":"Список сотрудников","description":"Возвращает список сотрудников","parameters":[{"$ref":"#/components/parameters/includeAvatarLink"}],"responses":{"200":{"description":"Список сотрудников","content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Manager"},{"properties":{"avatarLink":{"description":"Ссылка на фото сотрудника","type":"string","nullable":true,"readOnly":true}}}]}}}}}}},"post":{"tags":["managers"],"summary":"Создание сотрудника","description":"Создает нового сотрудника","requestBody":{"description":"Информация о сотруднике","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerCreateRequest"}}}},"responses":{"200":{"description":"Созданный сотрудник","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Manager"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/managers/{managerId}":{"get":{"tags":["managers"],"summary":"Информация о сотруднике","description":"Возвращает информацию о сотруднике","parameters":[{"name":"managerId","in":"path","description":"ID сотрудника","required":true,"schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/includeAvatarLink"}],"responses":{"200":{"description":"Данные о сотруднике","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Manager"},{"properties":{"avatarLink":{"description":"Ссылка на фото сотрудника","type":"string","nullable":true,"readOnly":true}}}]}}}},"404":{"description":"Сотрудник не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["managers"],"summary":"Удаление сотрудника","description":"Удаляет сотрудника","parameters":[{"name":"managerId","in":"path","description":"ID сотрудника","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные для удаления сотрудника","required":true,"content":{"application/json":{"schema":{"properties":{"replaceToManagerId":{"description":"ID сотрудника, на которого будут назначены все невыполненные задачи, предстоящие занятия, если они есть, и клиенты удаляемого сотрудника.","type":"integer","format":"int64","example":2}},"required":["replaceToManagerId"]}}}},"responses":{"204":{"description":"Сотрудник удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Сотрудник не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["managers"],"summary":"Изменение сотрудника","description":"Изменяет сотрудника","parameters":[{"name":"managerId","in":"path","description":"ID сотрудника","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные сотрудника","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManagerEdit"}}}},"responses":{"200":{"description":"Обновленные данные сотрудника","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Manager"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Сотрудник не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/advSources":{"get":{"tags":["catalog"],"summary":"Информационные источники","description":"Возвращает список информационных источников","responses":{"200":{"description":"Список информационных источников","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AdvSource"}}}}}}}},"/v1/company/createSources":{"get":{"tags":["catalog"],"summary":"Способы заведения записей","description":"Возвращает список возможных способов заведения клиентов и записей","responses":{"200":{"description":"Список способов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CreateSource"}}}}}}}},"/v1/company/statusReasons":{"get":{"tags":["catalog"],"summary":"Причины изменения статуса","description":"Возвращает причины изменения статуса записи","parameters":[{"$ref":"#/components/parameters/reasonType"}],"responses":{"200":{"description":"Список причин","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StatusReason"}}}}}}}},"/v1/company/filials":{"get":{"tags":["company"],"summary":"Филиалы компании","description":"Возвращает список филиалов","responses":{"200":{"description":"Список филиалов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Filial"}}}}}}}},"/v1/company/userAttributes":{"get":{"tags":["catalog"],"summary":"Признаки ученика","description":"Возвращает список всех доступных признаков ученика","responses":{"200":{"description":"Список признаков","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserAttribute"}}}}}}}},"/v1/company/rooms":{"get":{"tags":["company"],"summary":"Аудитории","description":"Аудитории компании","parameters":[{"$ref":"#/components/parameters/filialId"}],"responses":{"200":{"description":"Список аудиторий","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Room"}}}}}}}},"/v1/company/rooms/{roomId}":{"get":{"tags":["company"],"summary":"Информация об аудитории","description":"Возвращает основную информацию об аудитории","parameters":[{"name":"roomId","in":"path","description":"ID аудитории","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные аудитории","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Room"}]}}}},"404":{"description":"Аудитория не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/courses":{"get":{"tags":["groups"],"summary":"Программы","parameters":[{"$ref":"#/components/parameters/includeClasses"},{"$ref":"#/components/parameters/includeImages"},{"$ref":"#/components/parameters/courseId"}],"description":"Возвращает список программ обучения","responses":{"200":{"description":"Список программ","content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Course"},{"properties":{"classes":{"description":"Группы (при includeClasses=true)","type":"array","items":{"$ref":"#/components/schemas/Class"}},"images":{"description":"Изображения (при includeImages=true)","type":"array","items":{"$ref":"#/components/schemas/Image"}}}}]}}}}}}}},"/v1/company/classes":{"get":{"tags":["groups"],"summary":"Группы","parameters":[{"$ref":"#/components/parameters/includeImages"},{"$ref":"#/components/parameters/includeAttributes"},{"$ref":"#/components/parameters/includeDescription"},{"$ref":"#/components/parameters/courseId"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/includeStats"}],"description":"Возвращает список групп (наборов)","responses":{"200":{"description":"Список групп","content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Class"},{"properties":{"images":{"description":"Изображения (при includeImages=true)","type":"array","items":{"$ref":"#/components/schemas/Image"}},"attributes":{"description":"Признаки группы (при includeAttributes=true)","type":"array","items":{"$ref":"#/components/schemas/ClassAttributeValue"}}}}]}}}}}}},"post":{"tags":["groups"],"summary":"Создание группы","description":"Создаёт группу, возвращает объект созданной группы","requestBody":{"description":"Объект группы","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ClassCreateCourse"},{"$ref":"#/components/schemas/ClassCreateMaster"},{"$ref":"#/components/schemas/ClassCreateIndv"}]}}}},"responses":{"200":{"description":"Данные группы","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Class"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/classes/{classId}":{"get":{"tags":["groups"],"summary":"Информация о группе","description":"Возвращает основную информацию о группе","parameters":[{"name":"classId","in":"path","description":"ID группы","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},{"$ref":"#/components/parameters/includeAttributes"},{"$ref":"#/components/parameters/includeStats"},{"$ref":"#/components/parameters/includeDescription"}],"responses":{"200":{"description":"Данные группы","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Class"},{"properties":{"attributes":{"description":"Признаки группы (при includeAttributes=true)","type":"array","items":{"$ref":"#/components/schemas/ClassAttributeValue"}}}}]}}}},"404":{"description":"Группа не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["groups"],"summary":"Удаляет группу","description":"Удаляет группу","parameters":[{"name":"classId","in":"path","description":"ID группы","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"responses":{"204":{"description":"Группа удалена"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Группа не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["groups"],"summary":"Изменение группы","description":"Изменяет группу","parameters":[{"name":"classId","in":"path","description":"ID группы","example":123456,"required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"requestBody":{"description":"Объект группы","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ClassUpdateCourse"},{"$ref":"#/components/schemas/ClassUpdateMaster"},{"$ref":"#/components/schemas/ClassUpdateIndv"}]}}}},"responses":{"200":{"description":"Данные группы","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Class"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Группа не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/classes/{classId}/attribute/{attributeId}":{"post":{"tags":["groups"],"summary":"Изменение признака группы","description":"Изменяет информацию в признаках группы","parameters":[{"name":"classId","in":"path","description":"ID группы","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}},{"name":"attributeId","in":"path","description":"ID признака или его alias","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Новое значение признака","content":{"application/json":{"schema":{"oneOf":[{"type":"object","title":"Признак прочих типов","required":["value"],"properties":{"value":{"description":"Значение признака. При передаче null признак удаляется.","oneOf":[{"type":"integer","format":"int64","nullable":true},{"type":"boolean","nullable":true},{"type":"string","nullable":true}],"example":false}}},{"type":"object","title":"Признак типа select","required":["valueId"],"properties":{"valueId":{"description":"ID значения признака (если тип признака select). При передаче null признак удаляется.","type":"integer","format":"int64","nullable":true,"example":150}}}]}}}},"responses":{"200":{"description":"Обновленные данные группы","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Class"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Группа не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/classAttributes":{"get":{"tags":["groups"],"summary":"Признаки группы","description":"Возвращает список всех доступных признаков группы","responses":{"200":{"description":"Список признаков","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClassAttribute"}}}}}}}},"/v1/company/busyTimes":{"get":{"tags":["lessons"],"summary":"Нерабочее время","description":"Возвращает список нерабочего времени","parameters":[{"name":"date","in":"query","description":"Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/roomId"},{"$ref":"#/components/parameters/beginTime"},{"$ref":"#/components/parameters/endTime"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/teacherId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список нерабочего времени","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusyTimes"}}}}}}},"/v1/company/lessons/{lessonId}/task/{type}/files":{"post":{"tags":["lessons"],"summary":"Добавление файла задания на занятие","description":"Добавляет файл задания на занятие","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип задания (Домашнее / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"requestBody":{"description":"Файл","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UploadFile"}}}},"responses":{"204":{"description":"Файл добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Задание или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"413":{"description":"Файл слишком большой","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"get":{"tags":["lessons"],"summary":"Список файлов задания","description":"Возвращает массив файлов прикрепленных к заданию","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип задания (Домашнее / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"responses":{"200":{"description":"Список файлов прикрепленных к заданию","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LessonFile"}}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Задание или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/task/{type}":{"post":{"tags":["lessons"],"summary":"Создание/изменение задания на занятие","description":"Создает или, если уже создано, изменяет задание на занятие","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип задания (Домашнее / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"requestBody":{"description":"Данные задания","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonTaskEdit"}}}},"responses":{"204":{"description":"Задание обновлено/добавлено"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Задание или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление задания на занятие","description":"Удаляет задание из системы.","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип задания (Домашнее / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"responses":{"204":{"description":"Задание удалено"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Задание или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer":{"post":{"tags":["lessons"],"summary":"Создание ответа на задание","description":"Создает ответ на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswer"}}}},"responses":{"204":{"description":"Ответ добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}":{"get":{"tags":["lessons"],"summary":"Получение ответа на задание","description":"Возвращает ответ на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Ответ на задание","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswer"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["lessons"],"summary":"Редактирование ответа на задание","description":"Редактирует ответ на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Редактируемые данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerEdit"}}}},"responses":{"204":{"description":"Ответ добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление ответа на задание","description":"Удаляет ответ на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Ответ удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}/status":{"post":{"tags":["lessons"],"summary":"Смена статуса ответа на задание","description":"Меняет статус ответа на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные статуса","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerStatus"}}}},"responses":{"204":{"description":"Ответ добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}/comment":{"post":{"tags":["lessons"],"summary":"Создание комментария к ответу на задание","description":"Создает комментарий к ответу на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerCommentCreate"}}}},"responses":{"204":{"description":"Комментарий добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}/files":{"post":{"tags":["lessons"],"summary":"Прикрепление файла к ответу на задание","description":"Прикрепляет файл к ответу на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerFileCreate"}}}},"responses":{"204":{"description":"Файл прикреплен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}/files/{fileId}":{"delete":{"tags":["lessons"],"summary":"Удаление файла к ответу на задание","description":"Удаляет файла к ответу на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Файл удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/answer/{answerId}/comment/{commentId}":{"delete":{"tags":["lessons"],"summary":"Удаление комментария к ответу на задание","description":"Удаляет комментарий к ответу на задание","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"commentId","in":"path","description":"ID комментария","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Комментарий удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/mark/{type}/{userId}":{"post":{"tags":["lessons"],"summary":"Создание/изменение оценки за занятие","description":"Создает или, если уже создано, изменяет оценку на занятие","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип оценки (За дз / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"requestBody":{"description":"Данные оценки","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonMarkEdit"}}}},"responses":{"204":{"description":"Оценка обновлена/добавлена"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Оценка или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление оценки за занятие","description":"Удаляет оценку из системы.","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"userId","in":"path","description":"ID пользователя","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"type","in":"path","description":"Тип оценки (За дз / за занятие)","required":true,"schema":{"type":"string","enum":["home","lesson"]}}],"responses":{"204":{"description":"Оценка удалена"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Оценка или занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons":{"get":{"tags":["lessons"],"summary":"Занятия","description":"Возвращает список занятий","parameters":[{"name":"date","in":"query","description":"Дата проведения занятий. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/lessonId"},{"$ref":"#/components/parameters/roomId"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/teacherId"},{"$ref":"#/components/parameters/lessonStatusId"},{"$ref":"#/components/parameters/lessonUserId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/includeRecords"},{"$ref":"#/components/parameters/includeWorkOffs"},{"$ref":"#/components/parameters/includeMarks"},{"$ref":"#/components/parameters/includeTasks"},{"$ref":"#/components/parameters/includeTaskAnswers"},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/includeParams"},{"name":"sort","description":"Сортировка","in":"query","example":"createdAt","schema":{"default":"id","type":"string","enum":["id","date","status","createdAt","maxStudents","roomId","classId","filialId","beginTime","endTime"]}},{"$ref":"#/components/parameters/sortDirection"}],"responses":{"200":{"description":"Список занятий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Lessons"}}}}}},"post":{"tags":["lessons"],"summary":"Создание занятия","description":"Создает занятие","parameters":[{"$ref":"#/components/parameters/includeParams"}],"requestBody":{"description":"Данные занятия","content":{"application/json":{"schema":{"properties":{"date":{"description":"Дата занятия","type":"string","format":"date","example":"2022-02-22T00:00:00.000Z"},"comment":{"description":"Комментарий к занятию","nullable":true,"type":"string"},"topic":{"description":"Тема занятия","nullable":true,"type":"string"},"description":{"description":"Описание занятия","nullable":true,"type":"string"},"beginTime":{"description":"Время начала","type":"string","pattern":"^(?:(?:[01][0-9])|(?:2[0-3])):[0-5][0-9]$","example":"08:30"},"endTime":{"description":"Время окончания","type":"string","pattern":"^(?:(?:[01][0-9])|(?:2[0-3])):[0-5][0-9]$","example":"09:15"},"filialId":{"description":"ID филиала компании","type":"integer","format":"int64","example":10},"roomId":{"description":"ID аудитории/зала","type":"integer","format":"int64","example":505},"maxStudents":{"description":"Максимально допустимое количество учеников на занятии.\n\n  * `0` – не ограничено\n","nullable":true,"type":"integer","format":"int64","example":30,"minimum":0,"default":0},"classId":{"description":"ID группы","type":"integer","format":"int64","example":171331},"params":{"description":"Дополнительные параметры","type":"object","properties":{"video":{"description":"Видео к занятию","nullable":true,"type":"object","properties":{"value":{"description":"Ссылка на видео","pattern":"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&\\/=]*)$","type":"string"},"visible":{"description":"Показывать ли ученику","type":"boolean","default":true},"description":{"description":"Описание","nullable":true,"type":"string"}},"required":["value"]},"webinar":{"description":"Ссылка на вебинар","nullable":true,"type":"object","properties":{"value":{"description":"Ссылка на вебинар","pattern":"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&\\/=]*)$","type":"string"},"visible":{"description":"Показывать ли ученику","type":"boolean","default":true},"description":{"description":"Описание","nullable":true,"type":"string"}},"required":["value"]},"lessonSettings":{"$ref":"#/components/schemas/LessonSettings"}}},"userId":{"type":"integer","format":"int64","description":"ID ученика. Только для индивидуальных занятий."},"lessonRecord":{"type":"object","description":"Данные записи. Только для индивидуальных занятий.","properties":{"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true},"test":{"description":"Пробная запись на занятие","default":false,"type":"boolean"},"missedLessonRecordId":{"description":"Id записи на пропущенное занятие (для создания отработки). В случае использования, параметры free и test берутся у пропущенного занятия.","type":"number"}}},"teacherIds":{"description":"ID преподавателей. Обязательно для индивидуальных занятий.","type":"array","items":{"type":"integer","format":"int64"}}},"required":["date","beginTime","endTime","filialId","roomId","classId"]}}}},"responses":{"200":{"description":"Данные созданного занятия","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Lesson"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Группа не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}":{"get":{"tags":["lessons"],"summary":"Информация о занятии","description":"Возвращает информацию о занятии","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/includeRecords"},{"$ref":"#/components/parameters/includeWorkOffs"},{"$ref":"#/components/parameters/includeMarks"},{"$ref":"#/components/parameters/includeTasks"},{"$ref":"#/components/parameters/includeTaskAnswers"},{"$ref":"#/components/parameters/includeParams"}],"responses":{"200":{"description":"Данные занятия","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Lesson"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление занятия","description":"Удаляет занятие","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Занятие удалено"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["lessons"],"summary":"Изменение занятия","description":"Изменяет занятие","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/includeParams"}],"requestBody":{"description":"Данные занятия","content":{"application/json":{"schema":{"properties":{"date":{"description":"Дата занятия","type":"string","format":"date","example":"2022-02-22T00:00:00.000Z"},"comment":{"description":"Комментарий к занятию","nullable":true,"type":"string"},"topic":{"description":"Тема занятия","nullable":true,"type":"string"},"description":{"description":"Описание занятия","nullable":true,"type":"string"},"beginTime":{"description":"Время начала","type":"string","pattern":"^(?:(?:[01][0-9])|(?:2[0-3])):[0-5][0-9]$","example":"08:30"},"endTime":{"description":"Время окончания","type":"string","pattern":"^(?:(?:[01][0-9])|(?:2[0-3])):[0-5][0-9]$","example":"09:15"},"filialId":{"description":"ID филиала компании","type":"integer","format":"int64","example":10},"roomId":{"description":"ID аудитории/зала","type":"integer","format":"int64","example":505},"maxStudents":{"description":"Максимально допустимое количество учеников на занятии","nullable":true,"type":"integer","format":"int64","example":30},"status":{"description":"Статус занятия\n\n  * `0` – Не проведено\n\n  * `1` – Проведено\n","type":"integer","enum":[0,1],"default":0},"params":{"description":"Дополнительные параметры","type":"object","properties":{"video":{"description":"Видео к занятию","nullable":true,"type":"object","properties":{"value":{"description":"Ссылка на видео","pattern":"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&\\/=]*)$","type":"string"},"visible":{"description":"Показывать ли ученику","type":"boolean","default":true},"description":{"description":"Описание","nullable":true,"type":"string"}}},"webinar":{"description":"Ссылка на вебинар","nullable":true,"type":"object","properties":{"value":{"description":"Ссылка на вебинар","pattern":"^https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&\\/=]*)$","type":"string"},"visible":{"description":"Показывать ли ученику","type":"boolean","default":true},"description":{"description":"Описание","nullable":true,"type":"string"}}},"lessonSettings":{"$ref":"#/components/schemas/LessonSettings"}}},"lessonRecord":{"type":"object","description":"Данные записи. Только для индивидуальных занятий.","properties":{"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true},"test":{"description":"Пробная запись на занятие","default":false,"type":"boolean"},"missedLessonRecordId":{"description":"Id записи на пропущенное занятие (для создания отработки). В случае использования, параметры free и test берутся у пропущенного занятия.","type":"number"}}},"teacherIds":{"description":"ID преподавателей","type":"array","items":{"type":"integer","format":"int64"}}}}}}},"responses":{"200":{"description":"Обновленные данные занятия","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Lesson"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/company/lessons/{lessonId}/status":{"post":{"tags":["lessons"],"summary":"Изменение статуса занятия","description":"Изменяет статус занятия","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новый статус","required":true,"content":{"application/json":{"schema":{"properties":{"status":{"description":"Статус занятия. 0 - не проведено, 1 - проведено","type":"integer","format":"int64","enum":[0,1]}},"required":["status"]}}}},"responses":{"204":{"description":"Статус изменен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessons/{lessonId}/workOff":{"post":{"tags":["lessons"],"summary":"Создание отработки","description":"Создает запись на отработку для пропущенного занятия","parameters":[{"name":"lessonId","in":"path","description":"ID занятия с пропуском","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Информация для создания отработки","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonWorkOffCreate"}}}},"responses":{"201":{"description":"Отработка создана","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecordExtended"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/subscriptions":{"get":{"tags":["subscriptions"],"summary":"Список абонементов","description":"Возвращает список абонементов","parameters":[{"$ref":"#/components/parameters/createdAt"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"},{"name":"useDiscount","description":"Применять скидку клиента","in":"query","example":true,"schema":{"type":"boolean"}},{"name":"externalId","description":"Пользовательский номер абонемента","in":"query","example":"'ЛТ-2305' или ['ЛТ-2305', 'ЛТ-2377']","schema":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},{"name":"subscriptionGroupingId","description":"ID группировки абонементов.","in":"query","example":2,"schema":{"type":"integer","format":"int64"}},{"name":"includeFamilySubs","description":"Включает семейные абонементы в ответ","in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Список абонементов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Subscriptions"}}}}}},"post":{"tags":["subscriptions"],"summary":"Создание абонемента","description":"Создает новый абонемент","requestBody":{"description":"Информация об абонементе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionInput"}}}},"responses":{"200":{"description":"Созданный абонемент","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Subscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/subscriptions/{subscriptionId}":{"get":{"tags":["subscriptions"],"summary":"Информация об абонементе","description":"Возвращает информацию об абонементе","parameters":[{"name":"subscriptionId","in":"path","description":"ID абонемента","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные об абонементе","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Subscription"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["subscriptions"],"summary":"Удаление абонемента","description":"Удаляет абонемент","parameters":[{"name":"subscriptionId","in":"path","description":"ID абонемента","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Абонемент удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["subscriptions"],"summary":"Изменение абонемента","description":"Изменяет абонемент","parameters":[{"name":"subscriptionId","in":"path","description":"ID абонемента","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные абонемента","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionInput"}}}},"responses":{"200":{"description":"Обновленные данные абонемента","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Subscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/userSubscriptions":{"get":{"tags":["userSubscriptions"],"summary":"Список абонементов ученика","description":"Возвращает список абонементов ученика","parameters":[{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/includeFamilySubs"},{"$ref":"#/components/parameters/managerId"},{"name":"externalId","description":"Пользовательский номер абонемента","in":"query","example":"'ЛТ-2305' или ['ЛТ-2305', 'ЛТ-2377']","schema":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]}},{"name":"courseId","description":"ID программы группы абонемента","in":"query","schema":{"anyOf":[{"type":"integer","format":"int64"},{"type":"array","items":{"type":"integer","format":"int64"}}]},"example":"100 или [ 100, 101 ]"},{"name":"classId","description":"ID группы абонемента","in":"query","schema":{"anyOf":[{"type":"integer","format":"int64"},{"type":"array","items":{"type":"integer","format":"int64"}}]},"example":"123 или [ 123, 124 ]"},{"name":"mainClassId","description":"ID основной группы абонемента","in":"query","schema":{"anyOf":[{"type":"integer","format":"int64"},{"type":"array","items":{"type":"integer","format":"int64"}}]},"example":"123 или [ 123, 124 ]"},{"name":"sellDate","in":"query","description":"Дата продажи. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"beginDate","in":"query","description":"Дата начала действия. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"endDate","in":"query","description":"Дата окончания действия. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/userSubscriptionStatus"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список абонементов ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscriptions"}}}}}},"post":{"tags":["userSubscriptions"],"summary":"Создание абонемента ученика","description":"Создает новый абонемент ученика","requestBody":{"description":"Информация об абонементе ученика","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"responses":{"200":{"description":"Созданный абонемент ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/userSubscriptions/{userSubscriptionId}":{"get":{"tags":["userSubscriptions"],"summary":"Информация об абонементе ученика","description":"Возвращает информацию об абонементе ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные об абонементе ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"404":{"description":"Абонемент ученика не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userSubscriptions"],"summary":"Удаление абонемента ученика","description":"Удаляет абонемент ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Абонемент ученика удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Абонемент ученика не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userSubscriptions"],"summary":"Изменение абонемента ученика","description":"Изменяет абонемент ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные абонемента ученика","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscriptionEdit"}}}},"responses":{"200":{"description":"Обновленные данные абонемента ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Абонемент ученика не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/userSubscriptions/{userSubscriptionId}/status":{"post":{"tags":["userSubscriptions"],"summary":"Изменение статуса абонемента ученика","description":"Изменяет статус абонемента ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Статус абонемента ученика","required":true,"content":{"application/json":{"schema":{"properties":{"statusId":{"description":"Статус абонемента:\n* `1` - Не активный\n* `2` - Активный\n","type":"integer","format":"int64","enum":[1,2]}},"required":["statusId"]}}}},"responses":{"200":{"description":"Обновленные данные абонемента ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/userSubscriptions/{userSubscriptionId}/freeze":{"post":{"tags":["userSubscriptions"],"summary":"Изменение заморозки абонемента ученика","description":"Изменяет заморозку абонемента ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Даты заморозки","required":true,"content":{"application/json":{"schema":{"properties":{"freezeFrom":{"description":"Дата начала заморозки","type":"string","format":"date","example":"2019-06-12T00:00:00.000Z"},"freezeTo":{"description":"Дата окончания заморозки","type":"string","format":"date","example":"2019-06-15T00:00:00.000Z"}},"required":["freezeFrom","freezeTo"]}}}},"responses":{"200":{"description":"Обновленные данные абонемента ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userSubscriptions"],"summary":"Удаление заморозки абонемента ученика","description":"Удаляет заморозку абонемента ученика","parameters":[{"name":"userSubscriptionId","in":"path","description":"ID абонемента ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Обновленные данные абонемента ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserSubscription"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Абонемент не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/lessonRecords":{"get":{"tags":["lessons"],"summary":"Записи на занятия","description":"Возвращает список записей на занятия","parameters":[{"name":"userId","in":"query","description":"ID ученика","explode":false,"schema":{"type":"array","maxLength":50,"items":{"type":"integer","format":"int64"}},"example":1},{"name":"lessonId","in":"query","description":"ID занятия","schema":{"type":"array","maxLength":50,"items":{"type":"integer","format":"int64"}},"example":1},{"name":"classId","in":"query","description":"ID группы","schema":{"type":"array","maxLength":50,"items":{"type":"integer","format":"int64"}},"example":1},{"name":"date","in":"query","description":"Дата проведения занятий. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"free","in":"query","description":"Бесплатная запись (посещение для ученика будет бесплатным)","schema":{"type":"boolean"},"example":true},{"name":"visit","in":"query","description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","schema":{"type":"boolean"},"example":true},{"name":"test","in":"query","description":"Пробная запись на занятие","schema":{"type":"boolean"},"example":true},{"name":"skip","in":"query","description":"Не учитывать запись в количестве занятых мест","schema":{"type":"boolean"},"example":true},{"name":"goodReason","in":"query","description":"Уважительная причина отсутствия (true - есть уважительная причина, false - нет)","schema":{"type":"boolean"},"example":true},{"name":"paid","in":"query","description":"Платное занятие (true - платное, false - нет)","schema":{"type":"boolean"},"example":true},{"name":"includeUserSubscriptions","in":"query","description":"Включить в ответ абонементы ученика (работает при includeBills=true)","schema":{"type":"boolean","default":false,"example":true}},{"name":"includeFamilyRecords","in":"query","description":"Включить записи участников семьи","schema":{"type":"boolean"}},{"name":"includeLessons","in":"query","description":"Включить информацию о занятиях","schema":{"type":"boolean","default":false}},{"$ref":"#/components/parameters/includeBills"},{"$ref":"#/components/parameters/includeWorkOffs"},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/offset"}],"responses":{"200":{"description":"Список записей на занятия","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecords"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["lessons"],"summary":"Создание записи на занятие","description":"Создает новую запись на занятие","requestBody":{"description":"Информация о записи","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecord"}}}},"responses":{"200":{"description":"Данные созданной записи на занятие","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecord"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/lessonRecords/{recordId}":{"get":{"tags":["lessons"],"summary":"Информация о записи на занятие","parameters":[{"name":"recordId","in":"path","description":"ID записи на занятие","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"includeLesson","in":"query","description":"Включить информацию о занятии","schema":{"type":"boolean","default":false}}],"description":"Возвращает информацию о записи на занятие","responses":{"200":{"description":"Данные записи на занятие","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecordExtended"}}}},"404":{"description":"Запись на занятие не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["lessons"],"summary":"Изменение записи на занятие","description":"Изменяет информацию о записи","parameters":[{"name":"recordId","in":"path","description":"ID записи на занятие","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленная информация о записи на занятие","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecordEdit"}}}},"responses":{"200":{"description":"Обновленные данные записи на занятие","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LessonRecord"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись на занятие не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление записи на занятие","description":"Удаляет запись на занятие","parameters":[{"name":"recordId","in":"path","description":"ID записи на занятие","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Запись на занятие удалена"},"404":{"description":"Запись на занятие не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/joins":{"get":{"tags":["joins"],"summary":"Записи в группу","description":"Возвращает список записей в группы","parameters":[{"$ref":"#/components/parameters/createdAt"},{"$ref":"#/components/parameters/updatedAt"},{"$ref":"#/components/parameters/stateChangedAt"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/courseId"},{"$ref":"#/components/parameters/joinStatusId"},{"$ref":"#/components/parameters/joinUserId"},{"$ref":"#/components/parameters/managerId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"},{"name":"sort","description":"Сортировка","in":"query","example":"createdAt","schema":{"default":"id","type":"string","enum":["id","createdAt","updatedAt"]}},{"$ref":"#/components/parameters/sortDirection"}],"responses":{"200":{"description":"Список записей в группу","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Joins"}}}}}},"post":{"tags":["joins"],"summary":"Создание записи в группу","description":"Создает новую запись в группу","requestBody":{"description":"Информация о записи в группу","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Join"}}}},"responses":{"200":{"description":"Данные созданной записи в группу","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Join"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"500":{"description":"Ошибка на стороне сервера","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/joins/{joinId}":{"get":{"tags":["joins"],"summary":"Информация о записи в группу","description":"Возвращает информацию о записи в группу","parameters":[{"name":"joinId","in":"path","description":"ID записи в группу","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные о записи в группу","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Join"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["joins"],"summary":"Изменение записи в группу","description":"Изменяет основную информацию по записи в группу","parameters":[{"name":"joinId","in":"path","description":"ID записи в группу","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленная информация по записи в группу","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JoinEdit"}}}},"responses":{"200":{"description":"Обновленные данные о записи в группу","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Join"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["joins"],"summary":"Удаление записи в группу","description":"Удаляет запись в группу из системы.","parameters":[{"name":"joinId","in":"path","description":"ID записи в группу","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Запись удалена"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/joins/{joinId}/status":{"post":{"tags":["joins"],"summary":"Изменение статуса записи в группу","description":"Изменяет статус записи в группу","parameters":[{"name":"joinId","in":"path","description":"ID записи в группу","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новый статус и причина изменения","required":true,"content":{"application/json":{"schema":{"properties":{"statusId":{"description":"Статус записи в группу","type":"integer","format":"int64","example":2},"statusChangeReasonId":{"description":"ID причины смены статуса. Для изменения статуса записи в группу на \"Отказался\" используется набор причин клиента","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647}},"required":["statusId"]}}}},"responses":{"204":{"description":"Статус изменен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/joins/{joinId}/tags":{"post":{"tags":["joins"],"summary":"Изменение тегов записи в группу","description":"Изменяет теги записи в группу","parameters":[{"name":"joinId","in":"path","description":"ID записи в группу","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые теги","required":true,"content":{"application/json":{"schema":{"properties":{"tags":{"description":"Id тегов","type":"array","items":{"type":"integer","format":"int64"},"example":[2,4]}},"required":["tags"]}}}},"responses":{"204":{"description":"Теги изменены"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/tasks":{"get":{"tags":["tasks"],"summary":"Задачи","description":"Возвращает список задач","parameters":[{"$ref":"#/components/parameters/createdAt"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/managerId"},{"$ref":"#/components/parameters/taskCompleted"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список задач","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tasks"}}}}}},"post":{"tags":["tasks"],"summary":"Создание задачи","description":"Создает новую задачу","requestBody":{"description":"Информация о задаче","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"responses":{"200":{"description":"Данные созданной задачи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/tasks/{taskId}":{"get":{"tags":["tasks"],"summary":"Информация о задаче","description":"Возвращает задачу","parameters":[{"name":"taskId","in":"path","description":"ID задачи","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные задачи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"404":{"description":"Задача не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["tasks"],"summary":"Изменение задачи","description":"Изменяет задачу","parameters":[{"name":"taskId","in":"path","description":"ID задачи","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленая задача","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"responses":{"200":{"description":"Обновленные данные задачи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Задача не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["tasks"],"summary":"Удаление задачи","description":"Удаляет задачу из системы.","parameters":[{"name":"taskId","in":"path","description":"ID задачи","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Задача удалена"},"404":{"description":"Задача не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/taskCategories":{"get":{"tags":["catalog"],"summary":"Категории задач","description":"Возвращает категории задач","responses":{"200":{"description":"Данные о категориях задач","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskCategory"}}}}}}},"/v1/company/joinStatuses":{"get":{"tags":["catalog"],"summary":"Статусы записей","description":"Возвращает список статусов записей","responses":{"200":{"description":"Список статусов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JoinStatus"}}}}}}}},"/v1/company/clientStatuses":{"get":{"tags":["catalog"],"summary":"Статусы клиентов","description":"Возвращает список статусов клиентов","responses":{"200":{"description":"Список статусов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClientStatus"}}}}}}}},"/v1/company/joinTags":{"get":{"tags":["catalog"],"summary":"Теги записей","description":"Возвращает список тегов для записей","responses":{"200":{"description":"Список тегов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JoinTag"}}}}}}}},"/v1/company/paymentTypes":{"get":{"tags":["catalog"],"summary":"Типы платежей","description":"Возвращает типы платежей","responses":{"200":{"description":"Список типов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PaymentType"}}}}}}}},"/v1/company/files":{"post":{"tags":["files"],"summary":"Загрузка свободного файла","description":"Загрузка свободного файла","requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCreateCompany"}}}},"responses":{"204":{"description":"Файл добавлен","content":{"application/json":{"schema":{"properties":{"id":{"description":"ID созданного файла","type":"integer","format":"int64"}}}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}},"get":{"tags":["files"],"summary":"Получение списка файлов пользователя","description":"Получение списка файлов пользователя","parameters":[{"$ref":"#/components/parameters/userId"}],"responses":{"200":{"description":"Список файлов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/File"}}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/files/{fileId}":{"get":{"tags":["files"],"summary":"Скачивание файла","description":"Скачивание файла","parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные файла","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DownloadFile"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["files"],"summary":"Удаление файла","description":"Удаление файла","parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Файл удален"},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Файл не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["files"],"summary":"Редактирование файла","description":"Редактирование файла","parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileEditCompany"}}}},"responses":{"204":{"description":"Файл отредактирован"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/userComments":{"get":{"tags":["userComments"],"summary":"Комментарии","description":"Возвращает список комментариев","parameters":[{"$ref":"#/components/parameters/createdAt"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/managerId"},{"$ref":"#/components/parameters/lessonId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список комментариев","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserComments"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}},"post":{"tags":["userComments"],"summary":"Создание комментария","description":"Создает новый комментарий","requestBody":{"description":"Комментарий","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserComment"}}}},"responses":{"200":{"description":"Данные созданного комментария","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserComment"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/company/userComments/{commentId}":{"post":{"tags":["userComments"],"summary":"Изменение комментария","description":"Изменяет комментарий","parameters":[{"name":"commentId","in":"path","description":"ID комментария","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные комментария","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCommentEdit"}}}},"responses":{"200":{"description":"Обновленный комментарий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserComment"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Комментарий не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"get":{"tags":["userComments"],"summary":"Информация о комментарии","description":"Возвращает информацию о комментарии","parameters":[{"name":"commentId","in":"path","description":"ID комментария","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Комментарий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserComment"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Комментарий не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userComments"],"summary":"Удаление комментария","description":"Удаляет комментарий","parameters":[{"name":"commentId","in":"path","description":"ID комментария","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Комментарий удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Комментарий не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/roles":{"get":{"tags":["managers"],"summary":"Список ролей сотрудников","description":"Возвращает список ролей сотрудников","responses":{"200":{"description":"Список ролей сотрудников","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Role"}}}}}}}},"/v1/company/roles/{roleId}":{"get":{"tags":["managers"],"summary":"Информация о роли сотрудника","description":"Возвращает информацию о роли сотрудника","parameters":[{"name":"roleId","in":"path","description":"ID роли сотрудника","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные роли сотрудника","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Role"}}}},"404":{"description":"Роль не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/rates":{"get":{"tags":["managers"],"summary":"Список ставок сдельной оплаты","description":"Возвращает список ставок сдельной оплаты","responses":{"200":{"description":"Список ставок сдельной оплаты","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Rate"}}}}}}}},"/v1/company/rates/{rateId}":{"get":{"tags":["managers"],"summary":"Информация о ставке сдельной оплаты","description":"Возвращает информацию о ставке сдельной оплаты","parameters":[{"name":"rateId","in":"path","description":"ID ставки сдельной оплаты","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные ставки сдельной оплаты","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Rate"}}}},"404":{"description":"Ставка сдельной оплаты не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/contracts":{"get":{"tags":["documents"],"summary":"Документы","description":"Возвращает список документов","parameters":[{"name":"userId","in":"query","description":"ID ученика","required":false,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Список документов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Contract"}}}}}}},"post":{"tags":["documents"],"summary":"Создание документа","description":"Создает документ","requestBody":{"description":"Информация о документе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractCreate"}}}},"responses":{"200":{"description":"Возвращает объект созданного документа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractResponse"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/contracts/{contractId}":{"post":{"tags":["documents"],"summary":"Изменение документа","description":"Изменяет поля документа","parameters":[{"name":"contractId","in":"path","description":"ID документа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Информация о документе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractEdit"}}}},"responses":{"200":{"description":"Обновленные данные документа","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContractResponse"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Документ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["documents"],"summary":"Удаление документа","description":"Удаляет документ по id документа","parameters":[{"name":"contractId","in":"path","description":"ID документа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Документ удалён"},"404":{"description":"Документ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/userTags":{"get":{"tags":["users"],"summary":"Теги учеников","description":"Возвращает список тегов учеников","responses":{"200":{"description":"Список тегов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserTagResponse"}}}}}}},"post":{"tags":["users"],"summary":"Создание тега","description":"Создаёт новый тег","requestBody":{"description":"Данные тега","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTag"}}}},"responses":{"200":{"description":"Тег создан","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTagResponse"}}}}}}},"/v1/company/userTags/{tagId}":{"delete":{"tags":["users"],"summary":"Удаляет тег ученика","description":"Удаляет тег ученика","parameters":[{"in":"path","name":"tagId","description":"ID тега","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Тег удален"},"404":{"description":"Тег не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["users"],"summary":"Изменение тега ученика","description":"Изменяет тег ученика","parameters":[{"in":"path","name":"tagId","description":"ID тега","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные тега","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTag"}}}},"responses":{"200":{"description":"Обновлённые данные тега","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserTagResponse"}}}},"404":{"description":"Тег не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/bonusProgram/levels":{"get":{"tags":["bonusProgram"],"description":"Возвращает список уровней бонусной программы","responses":{"200":{"description":"Список уровней бонусной программы","content":{"application/json":{"schema":{"type":"object","properties":{"autoChangeLevels":{"type":"array","description":"Автоматически сменяемые уровни","items":{"$ref":"#/components/schemas/BPLevel"}},"autoUnChangeLevels":{"type":"array","description":"Автоматически несменяемые уровни","items":{"$ref":"#/components/schemas/BPLevel"}}}}}}}}}},"/v1/company/bonusProgram/payments":{"get":{"tags":["bonusProgram"],"summary":"Платежи БП","description":"Возвращает список платежей, совершённых через бонусы","parameters":[{"$ref":"#/components/parameters/createdAt"},{"name":"date","in":"query","description":"Дата платежа. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"summa","in":"query","description":"Сумма платежа. Списания указываются с минусом.","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"number"}}},{"name":"invoiceId","in":"query","description":"Id счета","schema":{"type":"integer","format":"int64"}},{"name":"optype","in":"query","description":"Тип операции. income - входящий платеж, debit - списание, burn - сгорание","style":"form","explode":false,"schema":{"type":"array","maxLength":3,"items":{"type":"string","enum":["income","debit","burn"]}}},{"name":"subscriptionId","in":"query","description":"ID абонемента","schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/managerId"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список платежей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserBonusPayments"}}}}}},"post":{"tags":["bonusProgram"],"summary":"Начисление/списание бонусов","description":"Начисление/списание бонусов","requestBody":{"description":"Объект создания бонусного платежа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BonusPaymentChange"}}}},"responses":{"200":{"description":"Данные начисления бонусов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserBonusPayment"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/families":{"get":{"tags":["families"],"summary":"Информация о семьях","description":"Возвращает список семей и их участников","responses":{"200":{"description":"Данные о семье","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FamilyResponse"}}}}}}},"post":{"tags":["families"],"summary":"Добавление участников в семью","description":"Создание/добавление участников в семью","requestBody":{"description":"Информация о участниках семьи","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Family"}}}},"responses":{"200":{"description":"Возвращает созданную/изменённую семью","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamilyResponse"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["families"],"summary":"Удаление участника из семьи","description":"Удаляет участника из семьи. Если в семье остаётся меньше 2-ух участников, то она автоматически удаляется.","parameters":[{"name":"userId","in":"query","description":"ID ученика","explode":false,"required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":1}],"responses":{"204":{"description":"Участник удалён из семьи"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/families/member/{userId}":{"post":{"tags":["families"],"summary":"Изменение участника семьи","description":"Изменение участника семьи","parameters":[{"name":"userId","in":"path","description":"ID ученика","required":true,"schema":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}}],"requestBody":{"description":"Информация о участнике семьи","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamilyMember"}}}},"responses":{"200":{"description":"Возвращает участника семьи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamilyMember"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/login":{"get":{"tags":["userAuth"],"summary":"Авторизация аккаунта через токен авторизации","description":"Для авторизации используются токен, созданный в методе POST /v1/user/auth/authToken\n","security":[],"parameters":[{"name":"Origin","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета, иначе авторизация не пройдет.\n","in":"header","schema":{"type":"string"}},{"name":"authToken","in":"query","description":"Токен авторизации","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Успешная авторизация","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessTokenLogin"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userAuth"],"summary":"Авторизация аккаунта","description":"Для авторизации используются реквизиты аккаунта\n","security":[],"parameters":[{"name":"Origin","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета, иначе авторизация не пройдет.\n","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"Параметры авторизации","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAuth"}}}},"responses":{"200":{"description":"Результат авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResult"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/authToken":{"post":{"tags":["userAuth"],"summary":"Получение токена авторизации","description":"Для авторизации используются реквизиты аккаунта. Метод нужен для получения временного токена авторизации.\n","security":[],"parameters":[{"name":"Origin","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета, иначе авторизация не пройдет.\n","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"Параметры авторизации","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAuth"}}}},"responses":{"200":{"description":"Результат авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenResult"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/logout":{"post":{"tags":["userAuth"],"summary":"Логаут аккаунта","description":"Метод для выхода из системы. Сбрасывает сессию аккаунта.\n","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"responses":{"204":{"description":"Успешный выход"},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/refresh":{"post":{"tags":["userAuth"],"summary":"Обновление сессии","description":"Обновление сессии аккаунта. создает новую сессию с новым таймаутом и новым токеном CSRF. Старая сессия при этом перестает действовать\n","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"responses":{"200":{"description":"Результат авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResult"}}}},"401":{"description":"Ошибка авторизации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/sendRestoreKey":{"post":{"tags":["userAuth"],"summary":"Ключ восстановления пароля","description":"Отправляет на указанный email ключ для восстановления пароля","security":[],"parameters":[{"name":"Origin","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета, иначе ключ не будет отправлен.\n","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"Параметры для отправки ключа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRestoreKey"}}}},"responses":{"204":{"description":"Ключ отправлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Email не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/auth/setPassword":{"post":{"tags":["userAuth"],"summary":"Установка пароля","description":"Устанавливает пароль на основе указанного ключа восстановления","security":[],"parameters":[{"name":"Origin","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета, иначе пароль не будет восстановлен.\n","in":"header","schema":{"type":"string"}}],"requestBody":{"description":"Параметры для отправки ключа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRestorePassword"}}}},"responses":{"204":{"description":"Пароль установлен"},"404":{"description":"Ключ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/baseInfo":{"get":{"tags":["userCommon"],"summary":"Основная информация аккаунта","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"Referer","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета.\n","in":"header","schema":{"type":"string"}}],"description":"Возвращает основную информацию по аккаунту: ученики, их балансы, записи, группы, в которые они записаны и т.д.\n","responses":{"200":{"description":"Данные аккаунта","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountInfo"}}}}}}},"/v1/user/lkSettings":{"get":{"tags":["userCommon"],"summary":"Настройки личного кабинета","security":[],"parameters":[{"name":"Referer","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета.\n","in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":"Настройки","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LkSettings"}}}},"404":{"description":"Домен личного кабинета не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/manifest.json":{"get":{"tags":["userCommon"],"summary":"manifest.json","description":"Файл манифеста для браузеров","security":[],"parameters":[{"name":"Referer","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета.\n","in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":"manifest.json","content":{"application/json":{}}},"404":{"description":"Домен личного кабинета не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons":{"get":{"tags":["userLessons"],"summary":"Занятия","description":"Возвращает список занятий","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата проведения занятий. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/roomId"},{"$ref":"#/components/parameters/filialId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/teacherId"},{"$ref":"#/components/parameters/lessonStatusId"},{"$ref":"#/components/parameters/lessonUserId"},{"$ref":"#/components/parameters/scopeUserId"},{"$ref":"#/components/parameters/lessonVisitStatus"},{"$ref":"#/components/parameters/debt"},{"$ref":"#/components/parameters/includeRecords"},{"$ref":"#/components/parameters/includeComments"},{"$ref":"#/components/parameters/includeMarks"},{"$ref":"#/components/parameters/includeTasks"},{"$ref":"#/components/parameters/includeTasksLimited"},{"$ref":"#/components/parameters/includeTaskAnswers"},{"$ref":"#/components/parameters/includeParams"},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/lessonId"},{"name":"sort","in":"query","description":"Поле сортировки","schema":{"type":"string","default":"id","enum":["id","date"]}}],"responses":{"200":{"description":"Список занятий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessons"}}}}}}},"/v1/user/lessons/individuals":{"get":{"tags":["userLessons"],"summary":"Индивидуальные занятия","description":"Возвращает список идивидуальных занятий для записи","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата проведения занятий. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"filialId","in":"query","description":"ID филиала","required":true,"schema":{"type":"integer"},"example":1},{"$ref":"#/components/parameters/roomId"},{"$ref":"#/components/parameters/classId"},{"$ref":"#/components/parameters/teacherId"},{"$ref":"#/components/parameters/scopeUserId"}],"responses":{"200":{"description":"Список занятий","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserIndividualLessons"}}}}}}},"/v1/user/lessons/{lessonId}":{"get":{"tags":["userLessons"],"summary":"Информация о занятии","parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/includeRecords"},{"$ref":"#/components/parameters/includeComments"},{"$ref":"#/components/parameters/includeMarks"},{"$ref":"#/components/parameters/includeTasks"},{"$ref":"#/components/parameters/includeTasksLimited"},{"$ref":"#/components/parameters/includeTaskAnswers"},{"$ref":"#/components/parameters/includeParams"}],"description":"Возвращает информацию о занятии","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"responses":{"200":{"description":"Данные занятия","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLesson"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer":{"post":{"tags":["userLessons"],"summary":"Создание ответа на задание","description":"Создает ответ на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerCreateUser"}}}},"responses":{"200":{"description":"Ответ добавлен","content":{"application/json":{"schema":{"properties":{"id":{"description":"ID нового ответа","type":"integer"}}}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}":{"get":{"tags":["userLessons"],"summary":"Получение ответа на задание","description":"Возвращает ответ на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}},{"$ref":"#/components/parameters/scopeUserId"}],"responses":{"200":{"description":"Ответ на задание","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswer"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userLessons"],"summary":"Редактирование ответа на задание","description":"Редактирует ответ на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Редактируемые данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerEditUser"}}}},"responses":{"204":{"description":"Ответ добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["lessons"],"summary":"Удаление ответа на задание","description":"Удаляет ответ на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Ответ удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}/send":{"post":{"tags":["userLessons"],"summary":"Отправка ответа на проверку","description":"Отправляет ответ на проверку","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Доп информация","required":true,"content":{"application/json":{"schema":{"properties":{"userId":{"type":"integer","description":"ID пользователя"}}}}}},"responses":{"204":{"description":"Ответ отправлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие не найдено","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}/comment":{"post":{"tags":["userLessons"],"summary":"Создание комментария к ответу на задание","description":"Создает комментарий к ответу на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные ответа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerCommentCreateUser"}}}},"responses":{"204":{"description":"Комментарий добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}/files":{"post":{"tags":["userLessons"],"summary":"Прикрепление файла к ответу на задание","description":"Прикрепляет файл к ответу на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskAnswerFileCreateUser"}}}},"responses":{"204":{"description":"Комментарий добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}/files/{fileId}":{"delete":{"tags":["userLessons"],"summary":"Удаление файла к ответу на задание","description":"Удаляет файл к ответу на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Файл удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessons/{lessonId}/answer/{answerId}/comment/{commentId}":{"delete":{"tags":["userLessons"],"summary":"Удаление комментария к ответу на задание","description":"Удаляет комментарий к ответу на задание","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"lessonId","in":"path","description":"ID занятия","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"answerId","in":"path","description":"ID ответа","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"commentId","in":"path","description":"ID комментария","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Комментарий удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Занятие или ответ не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lessonRecords":{"get":{"tags":["userLessons"],"summary":"Записи на занятия","description":"Возвращает записи на занятия","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата проведения занятий. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2020-01-01"},{"name":"paid","in":"query","description":"Возвращать только платные записи","schema":{"type":"boolean"},"example":true},{"name":"userId","description":"ID записанного ученика","in":"query","required":true,"schema":{"type":"integer","format":"int64"},"example":123},{"$ref":"#/components/parameters/includeLessons"},{"$ref":"#/components/parameters/includeBills"},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/limit"},{"$ref":"#/components/parameters/offset"},{"name":"sort","in":"query","description":"Поле сортировки","schema":{"type":"string","default":"id","enum":["id","date"]}}],"responses":{"200":{"description":"Список записей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecords"}}}}}},"post":{"tags":["userLessons"],"summary":"Создание записи на занятие","description":"Создает новую запись на занятие","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"requestBody":{"description":"Информация о записи","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecord"}}}},"responses":{"200":{"description":"Данные созданной записи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecord"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/user/joins":{"post":{"tags":["userLessons"],"summary":"Создание записи в группу","description":"Создает новую запись в группу","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"requestBody":{"description":"Информация о записи в группу","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserJoin"}}}},"responses":{"200":{"description":"Результат создания записи в группу","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateJoinResult"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/user/lessonRecords/individual":{"post":{"tags":["userLessons"],"summary":"Создание записи на индивидуальное занятие","description":"Создает новую запись на индивидуальное занятие","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"requestBody":{"description":"Информация о записи","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecordIndividual"}}}},"responses":{"200":{"description":"Данные созданной записи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecord"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/user/lessonRecords/{recordId}":{"get":{"tags":["userLessons"],"summary":"Информация о записи","parameters":[{"name":"recordId","in":"path","description":"ID записи на занятие","required":true,"schema":{"type":"integer","format":"int64"}}],"description":"Возвращает информацию о записи на занятие","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"responses":{"200":{"description":"Данные записи","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLessonRecord"}}}},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userLessons"],"summary":"Удаление записи","description":"Удаляет запись на занятие","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"recordId","in":"path","description":"ID записи на занятие","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Запись удалена"},"404":{"description":"Запись не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/payments":{"get":{"tags":["userPayments"],"summary":"Платежи ученика","description":"Возвращает список платежей","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата платежа. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список платежей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPayments"}}}},"400":{"description":"Ошибка в параметрах фильтра","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userPayments"],"summary":"Создание платежа","description":"Создает платеж","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"requestBody":{"description":"Данные для создания платежа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateOnlinePayment"}}}},"responses":{"200":{"description":"Данные для проведения платежа","content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"result":{"type":"boolean","enum":[true],"description":"Результат создания платежа","example":true},"paymentProcessType":{"type":"string","enum":["none"],"description":"Тип обработки платежа"}}},{"type":"object","properties":{"result":{"type":"boolean","enum":[false],"description":"Результат создания платежа","example":true},"error":{"type":"object","description":"Информация об ошибке в случае неуспешного создания платежа","properties":{"code":{"type":"string","description":"Код ошибки","example":"IntegrationNotFound"},"message":{"type":"string","description":"Текст ошибки","example":"Integration not found"}}}}},{"type":"object","properties":{"result":{"type":"boolean","enum":[true],"description":"Результат создания платежа","example":true},"directUrl":{"type":"string","description":"URL для совершения платежа","example":"https://money.yandex.ru/payments/external/confirmation?orderId=22e12f66-000f-5000-8000-18db351245c7"},"paymentProcessType":{"type":"string","enum":["redirect"],"description":"Тип обработки платежа"}}},{"type":"object","properties":{"paymentProcessType":{"type":"string","enum":["widget"],"description":"Тип обработки платежа"},"widgetData":{"type":"object","properties":{"service":{"type":"string","description":"Название сервиса","example":"cloudpayments"},"paymentObject":{"type":"object","oneOf":[{"$ref":"#/components/schemas/CloudPaymentsPaymentObject"},{"$ref":"#/components/schemas/TipTopPayPaymentObject"}]}}}}}]}}}},"400":{"description":"Ошибка в параметрах фильтра","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/invoices":{"get":{"tags":["userPayments"],"summary":"Счета ученика","description":"Возвращает список счетов","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата создания счета. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01,2019-06-01"},{"name":"remainSum","in":"query","description":"Сколько осталось заплатить по счету. Если указать 0, то будут найдены полностью оплаченные счета","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"number"}},"example":"1,999999"},{"name":"classId","in":"query","description":"ID группы","style":"form","explode":false,"schema":{"type":"array","items":{"type":"number"}},"example":"1,123"},{"$ref":"#/components/parameters/includeUserSubscriptions"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список счетов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInvoices"}}}},"400":{"description":"Ошибка в параметрах фильтра","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/bills":{"get":{"tags":["userPayments"],"summary":"Списания ученика","description":"Возвращает списания за занятия, за истекшие абонементы.","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата списания. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"name":"unassignedOnly","in":"query","description":"Возвращать только неиспользованные счета","schema":{"type":"boolean"},"example":true},{"name":"group","in":"query","description":"Группировать неспользованные счета","schema":{"type":"boolean"},"example":true},{"$ref":"#/components/parameters/includeRecords"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Списания","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserBills"}}}}}}},"/v1/user/subscriptions":{"get":{"tags":["userPayments"],"summary":"Абонементы","description":"Возвращает список абонементов","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата продажи. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},{"$ref":"#/components/parameters/userId"},{"$ref":"#/components/parameters/userSubscriptionStatus"},{"$ref":"#/components/parameters/offset"},{"$ref":"#/components/parameters/limit"}],"responses":{"200":{"description":"Список абонементов","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUserSubscriptions"}}}}}}},"/v1/user/users/{userId}/avatar":{"post":{"tags":["userCommon"],"summary":"Изменение фото ученика","description":"Изменяет фотографию ученика","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные фотографии","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Avatar"}}}},"responses":{"204":{"description":"Аватар успешно изменен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userCommon"],"summary":"Удаление фото ученика","description":"Удаляет фотографию ученика","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Аватар успешно удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/users/{userId}":{"post":{"tags":["userCommon"],"summary":"Изменение ученика","description":"Изменяет основную информацию об ученике","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"userId","in":"path","description":"ID ученика","example":123456,"required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Обновленная информация об ученике","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRestricted"}}}},"responses":{"200":{"description":"Обновленные данные ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRestricted"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/users/{userId}/status":{"post":{"tags":["users"],"summary":"Изменение статуса ученика","description":"Изменяет статус ученика","parameters":[{"name":"userId","in":"path","description":"ID ученика","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новый статус и причина изменения","required":true,"content":{"application/json":{"schema":{"properties":{"statusId":{"description":"Статус ученика","type":"integer","format":"int64","example":2},"statusChangeReasonId":{"description":"ID причины смены статуса","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647}},"required":["statusId"]}}}},"responses":{"204":{"description":"Статус изменен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/lkStyle":{"get":{"tags":["userCommon"],"summary":"Стиль личного кабинета","description":"Возвращает цвета оформления личного кабинета","security":[],"parameters":[{"name":"Referer","description":"Имя сервера, с которого производится запрос. Домен должен быть прописан в настройках личного кабинета.\n","in":"header","schema":{"type":"string"}}],"responses":{"200":{"description":"Стиль","content":{"text/css":{}}},"404":{"description":"Домен личного кабинета не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/user/account":{"post":{"tags":["userCommon"],"summary":"Изменение настроек","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"description":"Применяет настройки аккаунта\n","requestBody":{"description":"Настройки аккаунта","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountSettings"}}}},"responses":{"204":{"description":"Настройки изменены"}}}},"/v1/user/account/password":{"post":{"tags":["userCommon"],"summary":"Изменение пароля","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"description":"Изменяет пароль аккаунта\n","requestBody":{"description":"Новый пароль","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserPassword"}}}},"responses":{"204":{"description":"Пароль изменен"}}}},"/v1/user/files":{"get":{"tags":["userFiles"],"summary":"Получение списка файлов","description":"Получение списка файлов","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"$ref":"#/components/parameters/scopeUserId"},{"$ref":"#/components/parameters/includeManagers"}],"responses":{"200":{"description":"Список файлов","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/File"}}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userFiles"],"summary":"Загрузка свободного файла","description":"Загрузка свободного файла","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileCreateUser"}}}},"responses":{"204":{"description":"Файл добавлен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}}}}},"/v1/user/files/{fileId}":{"get":{"tags":["userFiles"],"summary":"Скачивание файла","description":"Скачивание файла","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные файла","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DownloadFile"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["userFiles"],"summary":"Удаление файла","description":"Удаление файла","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Файл удален"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["userFiles"],"summary":"Редактирование файла","description":"Редактирование файла","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"fileId","in":"path","description":"ID файла","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные файла","required":true,"content":{"application/json":{"schema":{"properties":{"userId":{"description":"Id ученика","type":"integer","format":"int64","example":1},"comment":{"description":"Комментарий ученика","type":"string","example":"Текст комментария"}},"required":["userId","comment"]}}}},"responses":{"204":{"description":"Файл изменен"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"403":{"description":"Доступ запрещен"},"404":{"description":"Файл не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/internal/integrations":{"get":{"tags":["internal"],"summary":"Интеграции","description":"Возвращает список всех интеграций","parameters":[{"name":"serviceType","in":"query","description":"Тип сервиса","schema":{"type":"integer","format":"int64"}},{"name":"enabled","in":"query","description":"Включена ли интеграция","schema":{"type":"boolean"}}],"responses":{"200":{"description":"Список интеграций","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Integration"}}}}}}}},"/v1/internal/integrations/{integrationId}":{"post":{"tags":["internal"],"description":"Обновляет интеграцию","parameters":[{"name":"integrationId","in":"path","description":"ID интеграции","example":55,"required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Данные интеграции","required":true,"content":{"application/json":{"schema":{"properties":{"enabled":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Обновленная интеграция","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Integration"}}}}}}},"/v1/public/acquiring/success/{uniqueKey}/{orderId}":{"get":{"tags":["public"],"summary":"Переход на страницу успешного платежа","description":"Перенаправляет ученика на страницу успешного платежа","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-1-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}},{"name":"orderId","in":"path","description":"ID заказа","example":"11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"302":{"description":"Редирект пользователя на страницу успешной оплаты"}}},"post":{"tags":["public"],"description":"Ловит хук об изменении статуса платежа","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}},{"name":"orderId","in":"path","description":"ID заказа","example":"11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"OK"}}}},"/v1/public/calendarSync/{managerId}/{key}/{calendarName}":{"get":{"tags":["public"],"summary":"Переход на страницу успешного платежа","description":"Перенаправляет ученика на страницу успешного платежа","parameters":[{"name":"managerId","in":"path","description":"ID сотрудника","example":123,"required":true,"schema":{"type":"number"}},{"name":"key","in":"path","description":"Ключ интеграции","example":"11bf5b37","required":true,"schema":{"type":"string"}},{"name":"calendarName","in":"path","description":"Название календаря","example":"ownLessons.ical","required":true,"schema":{"type":"string","enum":["ownLessons.ical","allLessons.ical","ownTasks.ical","allTasks.ical","assignedTasks.ical"]}},{"name":"filialId","in":"query","description":"ID филиала","required":false,"explode":true,"style":"form","schema":{"type":"array","minLength":1,"items":{"type":"integer","format":"int64"}}}],"responses":{"200":{"description":"Файл календаря"}}}},"/v1/public/verify/{uniqueKey}":{"get":{"tags":["public"],"summary":"Верификация интеграции через мета-тег","description":"Возвращает страницу с пользовательским мета-тегом","parameters":[{"name":"uniqueKey","in":"path","description":"Ключ интеграции","example":"000123-1-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ID интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/public/robokassa/{uniqueKey}":{"get":{"tags":["public"],"summary":"Автоматическая верификация платежа через robokassa","description":"Возвращает результат проверки параметров платежа","parameters":[{"name":"uniqueKey","in":"path","description":"Ключ интеграции","example":"000123-1-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"responses":{"302":{"description":"Редирект пользователя на страницу проверки оплаты"}}}},"/v1/payments/uiStyle":{"get":{"summary":"Стиль для страницы создания оплаты","description":"Возвращает цвета для страницы создания оплаты","security":[],"responses":{"200":{"description":"Стиль","content":{"text/css":{}}}}}},"/v1/payments/userData":{"get":{"summary":"Данные ученика для оплаты","description":"Возвращает данные ученика для создания платежа","security":[],"parameters":[{"name":"key","in":"query","description":"Ключ ученика","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Стиль","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/payments/pay":{"post":{"summary":"Создание платежа","description":"Создает платеж","security":[],"parameters":[{"name":"key","in":"query","description":"Ключ ученика","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Данные для создания платежа","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateOnlinePayment"}}}},"responses":{"200":{"description":"Данные для проведения платежа","content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"result":{"type":"boolean","enum":[true],"description":"Результат создания платежа","example":true},"paymentProcessType":{"type":"string","enum":["none"],"description":"Тип обработки платежа"}}},{"type":"object","properties":{"result":{"type":"boolean","enum":[false],"description":"Результат создания платежа","example":true},"error":{"type":"object","description":"Информация об ошибке в случае неуспешного создания платежа","properties":{"code":{"type":"string","description":"Код ошибки","example":"IntegrationNotFound"},"message":{"type":"string","description":"Текст ошибки","example":"Integration not found"}}}}},{"type":"object","properties":{"result":{"type":"boolean","enum":[true],"description":"Результат создания платежа","example":true},"directUrl":{"type":"string","description":"URL для совершения платежа","example":"https://money.yandex.ru/payments/external/confirmation?orderId=22e12f66-000f-5000-8000-18db351245c7"},"paymentProcessType":{"type":"string","enum":["redirect"],"description":"Тип обработки платежа"}}},{"type":"object","properties":{"paymentProcessType":{"type":"string","enum":["widget"],"description":"Тип обработки платежа"},"widgetData":{"type":"object","properties":{"service":{"type":"string","description":"Название сервиса","example":"cloudpayments"},"paymentObject":{"type":"object","oneOf":[{"$ref":"#/components/schemas/CloudPaymentsPaymentObject"},{"$ref":"#/components/schemas/TipTopPayPaymentObject"}]}}}}}]}}}},"400":{"description":"Ошибка в параметрах фильтра","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/hooks/vkEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от VK интеграций","description":"Принимает запрос от VK API","parameters":[{"name":"uniqueKey","in":"path","description":"Ключ интеграции","example":"55-1","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии в группе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VkEvent"}}}},"responses":{"200":{"description":"OK","content":{"text/plain":{"schema":{"type":"string","example":"OK"}}}},"403":{"description":"Неверный секретный ключ callback сервера или id группы","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/vkLeadEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от VK Lead интеграций","description":"Принимает запрос от VK API","parameters":[{"name":"uniqueKey","in":"path","description":"Ключ интеграции","example":"55-1","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии в группе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VkEvent"}}}},"responses":{"200":{"description":"OK","content":{"text/plain":{"schema":{"type":"string","example":"OK"}}}},"403":{"description":"Неверный секретный ключ callback сервера или id группы","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/vkAdsEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от VK интеграций","description":"Принимает запрос от VK API","parameters":[{"name":"uniqueKey","in":"path","description":"Ключ интеграции","example":"000123-1-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии в группе","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VkAdsEvent"}}}},"responses":{"200":{"description":"OK","content":{"text/plain":{"schema":{"type":"string","example":"OK"}}}}}}},"/v1/hooks/fbEvents":{"post":{"tags":["hooks"],"summary":"Реакция на события от FB интеграций","description":"Принимает запрос от FB API","requestBody":{"description":"Информация о событиях генераций лидов","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FbEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Ошибка сервера","content":{"application/json":{"schema":{"type":"object"}}}}}},"get":{"tags":["hooks"],"summary":"Подтверждение подписки на события FB","responses":{"200":{"description":"Ответ для подтверждения","content":{"text/plain":{"schema":{"type":"string","example":"OK"}}}}}}},"/v1/hooks/tilda/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от Tilda интеграций","description":"Принимает запрос от Tilda","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/TildaEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/amoEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от amoCRM интеграций","description":"Принимает запрос от amoCRM","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/AmoEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/igEvents/{integrationId}":{"post":{"tags":["hooks"],"summary":"Реакция на события от Instagram интеграций","description":"Принимает запрос от сервиса Instagram","parameters":[{"name":"integrationId","in":"path","description":"ID интеграции","example":55,"required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IgEvent"}}}},"responses":{"200":{"description":"OK","content":{"text/plain":{"schema":{"type":"string","example":"OK"}}}},"403":{"description":"Неверный внутренний секретный ключ","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/bitrixEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от Bitrix24 интеграций","description":"Принимает запрос от Bitrix24","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BitrixEvent"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/BitrixEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/jivoSiteEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Реакция на события от JivoSite интеграций","description":"Принимает запрос от JivoSite","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JivoSiteEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"string"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/paymentEvents/tochkaEvents":{"post":{"tags":["hooks"],"summary":"Реакция на события от ТочкаБанка","description":"Принимает POST запрос от платежной системы","requestBody":{"description":"Информация о событии","required":true,"content":{"text/plain":{"schema":{"$ref":"#/components/schemas/PaymentSystemEvent","type":"string"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"400":{"description":"Невозможно обработать тело запроса","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"Не найдена интеграция, связанная с хуком","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/paymentEvents/{uniqueKey}":{"get":{"tags":["hooks"],"summary":"Реакция на события от платежных систем","description":"Принимает GET запрос от платежной системы","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}},"post":{"tags":["hooks"],"summary":"Реакция на события от платежных систем","description":"Принимает POST запрос от платежной системы","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","example":"000123-11bf5b37-e0b8-42e0-8dcf-dc8c4aefc000","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentSystemEvent"}},"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/PaymentSystemEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/kassaEvents/report/{key}":{"post":{"tags":["hooks"],"summary":"Отчет после фискализации чека","description":"Принимает хук с данными о статусе фискализации после ее завершения","parameters":[{"name":"key","in":"path","description":"Ключ","example":"WzQwNSwiOTMwNSJd","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"..."}}}},"/v1/hooks/smsVizitkaEvents":{"post":{"tags":["hooks"],"summary":"Принимает пришедшие сообщения и отчеты об отправленных сообщениях","description":"Принимает хук от СМС-визитки","parameters":[{"name":"servicekey","description":"Уникальный ключ интеграции","required":true,"in":"header","schema":{"type":"string"}},{"name":"managerId","description":"ID сотрудника","required":false,"in":"header","schema":{"type":"number"}}],"requestBody":{"description":"Информация о событии","required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/SmsVizitkaEvent"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"Интеграция не найдена","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Ошибка сервера","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/telegramEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Принимает события","description":"Принимает хук от телеграма","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Данные о событии","required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"Интеграция не найдена","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Ошибка сервера","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/wazzupEvents/{uniqueKey}":{"post":{"tags":["hooks"],"summary":"Принимает пришедшие сообщения и отчеты об отправленных сообщениях","description":"Принимает хук от Wazzup24","parameters":[{"name":"uniqueKey","in":"path","description":"Уникальный ключ интеграции","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Данные о событии","required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"Интеграция не найдена","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Ошибка сервера","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/hooks/roistatEvents/{uniqueKey}":{"get":{"summary":"Осуществляет выгрузку данных из CRM и обрабатывает новые заявки","description":"Принимает хуки от Roistat","parameters":[{"name":"uniqueKey","in":"path","required":true,"description":"Уникальный ключ интеграции","schema":{"type":"string"}},{"name":"action","in":"query","description":"Код действия","schema":{"enum":["lead","export","export_clients","export_products","import_scheme","task","message"],"type":"string"}},{"name":"manager_id","in":"query","description":"Ответственный сотрудник","schema":{"type":"string"}},{"name":"title","in":"query","description":"Заголовок сообщения/новой заявки","schema":{"type":"string"}},{"name":"email","in":"query","description":"email клиента","schema":{"type":"string"}},{"name":"phone","in":"query","description":"Номер телефона клиента","schema":{"type":"string"}},{"name":"name","in":"query","description":"Имя клиента","schema":{"type":"string"}},{"name":"date","in":"query","description":"Дата, после которой были изменения в клиентах\\сделках (записях) (UNIX)","schema":{"type":"string","pattern":"^\\d{10}$"}},{"name":"limit","in":"query","description":"Кол-во выгружаемых клиентов\\сделок (записей)","schema":{"type":"number"}},{"name":"offset","in":"query","description":"Кол-во клиентов\\сделок (записей) от начала выборки, которые нужно пропустить","schema":{"type":"number"}},{"name":"leadId","in":"query","description":"ID сделки (записи)","schema":{"type":"string"}},{"name":"message","in":"query","description":"Текст сообщения","schema":{"type":"string"}},{"name":"element_id","in":"query","description":"ID сделки (записи)","schema":{"type":"string"}},{"name":"deadline","in":"query","description":"Крайний срок задачи (UTC+0)","schema":{"type":"string"}},{"name":"text","in":"query","description":"Текст задачи/Комментарий, содержащий доп. информацию","schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"object"}}}},"403":{"description":"Неверный ключ интеграции","content":{"application/json":{"schema":{"type":"object"}}}},"404":{"description":"Интеграция не найдена","content":{"application/json":{"schema":{"type":"object"}}}},"500":{"description":"Ошибка сервера","content":{"application/json":{"schema":{"type":"object"}}}}}}},"/v1/company/users/{userId}/attribute/{attrId}":{"post":{"tags":["users"],"summary":"Изменение признака ученика","description":"Изменяет информацию в признаках ученика","parameters":[{"name":"userId","in":"path","description":"ID ученика","example":1,"required":true,"schema":{"type":"integer","format":"int64"}},{"name":"attrId","in":"path","description":"ID признака или его alias","example":"1 или birthday","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"Новое значение признака","content":{"application/json":{"schema":{"anyOf":[{"type":"object","title":"Признак прочих типов","required":["value"],"properties":{"value":{"description":"Значение признака. При передаче null признак удаляется.","anyOf":[{"type":"integer","format":"int64","nullable":true},{"type":"boolean","nullable":true},{"type":"string","nullable":true}],"example":"2001-01-01 или null"}}},{"type":"object","title":"Признак типа select","required":["valueId"],"properties":{"valueId":{"description":"ID значения признака (если тип признака - select). При передаче null признак удаляется.","type":"integer","format":"int64","nullable":true,"example":300}}},{"type":"object","title":"Признак типа multiselect","required":["valueIds"],"properties":{"valueIds":{"type":"array","description":"Массив ID значений признака (если тип признака - multiselect). При передаче null признак удаляется.","items":{"type":"integer","format":"int64","nullable":true,"example":300},"nullable":true}}}]}}}},"responses":{"200":{"description":"Обновленные данные ученика","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"402":{"description":"Ограничения лицензии","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LicenseRestricts"}}}},"404":{"description":"Ученик не найден","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/subscriptionGroupings":{"get":{"tags":["subscriptions"],"summary":"Группировки видов абонементов","parameters":[{"$ref":"#/components/parameters/includeSubscriptions"}],"description":"Возвращает список группировок видов абонементов","responses":{"200":{"description":"Список группировок","content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/SubscriptionsGrouping"},{"properties":{"subscriptions":{"description":"Виды абонементов (при includeSubscriptions=true)","type":"array","items":{"$ref":"#/components/schemas/Subscription"}}}}]}}}}}}}},"/v1/user/managers/individualLessons":{"get":{"tags":["userLessons"],"summary":"Список преподавателей для индивидуальных занятий","description":"Возвращает список преподавателей для записи на индивидуальные занятия со свободным временем","security":[{"userSession":[],"xCookieToken":[],"xCsrfToken":[]},{"userOAuth":[]}],"parameters":[{"name":"date","in":"query","description":"Дата для записи. При указании одной даты свободное время расчитывается для одной даты. При двух - для диапазона. Если же дата не указана - берутся данные за сегодня","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2020-01-01"},{"name":"filialId","in":"query","description":"ID филиала","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"managerId","description":"ID сотрудника","in":"query","schema":{"type":"array","items":{"type":"integer","format":"int64"}},"example":2},{"name":"intervalDuration","description":"Длительность занятия","in":"query","schema":{"type":"string"}},{"$ref":"#/components/parameters/classId"}],"responses":{"200":{"description":"Список преподавателей","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserManagersIndividual"}}}}}}},"/v1/company/cashboxes":{"get":{"tags":["cashboxes"],"summary":"Список касс","description":"Возвращает список касс","responses":{"200":{"description":"Список касс","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cashboxes"}}}}}},"post":{"tags":["cashboxes"],"summary":"Создание кассы","description":"Создает кассу","requestBody":{"description":"Данные для новой кассы","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashboxCreate"}}}},"responses":{"200":{"description":"Касса создана","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cashbox"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Касса не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}},"/v1/company/cashboxes/{cashboxId}":{"get":{"tags":["cashboxes"],"summary":"Информация о кассе","description":"Возвращает информацию о кассе","parameters":[{"name":"cashboxId","in":"path","description":"ID кассы","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Данные о кассе","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cashbox"}}}},"404":{"description":"Касса не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"post":{"tags":["cashboxes"],"summary":"Изменение кассы","description":"Изменяет кассу","parameters":[{"name":"cashboxId","in":"path","description":"ID кассы","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Новые данные кассы","required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CashboxEdit"}}}},"responses":{"200":{"description":"Обновленные данные кассы","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cashbox"}}}},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Касса не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}},"delete":{"tags":["cashboxes"],"summary":"Удаление кассы","description":"Удаляет кассу","parameters":[{"name":"cashboxId","in":"path","description":"ID кассы","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Касса удалена"},"400":{"description":"Ошибка валидации","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}},"404":{"description":"Касса не найдена","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorHandling"}}}}}}}},"components":{"securitySchemes":{"companyApiKey":{"type":"apiKey","name":"x-access-token","in":"header","description":"Токен уровня компании дает возможность поизводить действия с данными напрямую, без проверки прав доступа отдельного сотрудника.\nПеред началом работы нужно получить токен методом [/v1/company/auth/getToken](#tag/auth/paths/~1v1~1company~1auth~1getToken/post) и далее отправлять его в заголовке при каждом запросе.\n\nСрок жизни токена - 7 дней, однако рекомендуется получать токен каждый раз при работе с API, и по окончании удалять его методом [/v1/company/auth/revokeToken](#tag/auth/paths/~1v1~1company~1auth~1revokeToken/post)\n"},"userSession":{"type":"apiKey","in":"cookie","name":"SESSIONID","description":"Работа с API уровня ученика предполагает использование его в браузерах, поэтому при авторизации используются COOKIES.\n\nПри любом запросе к API в COOKIES должны быть переданы параметры SESSIONID и TOKEN. При работе в браузере эти параметры устанавливаются сервером во время успешной авторизации, поэтому обычно разработчику ничего дополнительно делать не нужно.\n"},"xCookieToken":{"type":"apiKey","in":"cookie","name":"TOKEN","description":"Для защиты от CSRF-атак используется токен. Его нужно передавать при каждом запросе к серверу вместе с SESSIONID. При работе в браузере эти параметры устанавливаются сервером во время успешной авторизации, поэтому обычно разработчику ничего дополнительно делать не нужно.\n"},"xCsrfToken":{"type":"apiKey","in":"header","name":"x-csrf-token","description":"Для дополнительной защиты от CSRF-атак при каждом запросе к API в заголовке запроса должен быть отправлен токен. Сервер возвращает csrfToken при успешной авторизации.\n"},"userOAuth":{"type":"oauth2","flows":{"authorizationCode":{"authorizationUrl":"https://oauth.moyklass.com/user","tokenUrl":"https://oauth.moyklass.com/auth/user/access_token","refreshUrl":"https://oauth.moyklass.com/auth/user/access_token","scopes":{"full":"Полный доступ к API ученика"}}},"description":"К API уровня ученика можно получить доступ с помощью OAuth-авторизации\n"}},"schemas":{"User":{"title":"Ученик","type":"object","properties":{"id":{"description":"ID ученика в системе","type":"integer","format":"int64","example":123456,"readOnly":true},"name":{"description":"Полное имя ученика","type":"string","maxLength":100,"example":"Иванов Петр Александрович"},"email":{"description":"Email ученика","type":"string","maxLength":100,"nullable":true,"example":"ivanov@site.com"},"phone":{"description":"Номер телефона ученика","type":"string","maxLength":15,"nullable":true,"pattern":"^[0-9]{10,15}$","example":79001234567},"updatedAt":{"description":"Дата изменения","type":"string","format":"date-time","readOnly":true,"example":"2019-06-12T13:00:12.000Z"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"balans":{"description":"Баланс ученика с вычетом долгов (availableBalance минус долги по счетам, может быть отрицательным)","type":"number","format":"double","readOnly":true,"example":100},"bonusBalance":{"description":"Баланс бонусов ученика","type":"number","format":"double","readOnly":true,"example":100},"availableBalance":{"description":"Доступный баланс ученика (сумма приходов и расходов)","type":"number","format":"double","readOnly":true,"example":100},"responsibleId":{"description":"ID ответственного менеджера","type":"integer","format":"int64","minimum":1,"nullable":true,"deprecated":true,"example":12322},"advSourceId":{"description":"ID информационного источника (откуда ученик узнал о компании)","type":"integer","format":"int32","nullable":true,"minimum":1,"example":23456,"maximum":2147483647},"createSourceId":{"description":"ID способа заведения (как заведена карточка)","type":"integer","format":"int32","nullable":true,"minimum":1,"example":56,"maximum":2147483647},"stateChangedAt":{"description":"Дата изменения статуса","type":"string","format":"date-time","readOnly":true,"nullable":true,"example":"2019-06-12T13:00:12.000Z"},"statusChangeReasonId":{"description":"ID причины смены статуса","type":"integer","format":"int64","nullable":true,"example":1},"clientStateId":{"description":"ID статуса клиента","type":"integer","format":"int64","nullable":true,"example":10},"filials":{"description":"ID филиалов ученика","type":"array","items":{"type":"integer","minimum":1,"format":"int64"}},"responsibles":{"description":"ID ответственных сотрудников ученика","type":"array","items":{"type":"integer","minimum":1,"format":"int64"}},"attributes":{"description":"Дополнительные признаки ученика","type":"array","items":{"$ref":"#/components/schemas/UserAttr"}},"joins":{"description":"Записи ученика","type":"array","items":{"$ref":"#/components/schemas/UserJoin"},"readOnly":true},"tags":{"description":"Теги ученика","type":"array","items":{"$ref":"#/components/schemas/UserTagResponse"},"readOnly":true},"links":{"$ref":"#/components/schemas/UserLinks"},"utms":{"$ref":"#/components/schemas/UserUTMS"},"BPLevel":{"description":"БП ученика","type":"object","properties":{"levelId":{"description":"Id уровня БП","type":"integer","format":"int64","example":1},"isActive":{"description":"Активность БП","type":"boolean","default":false},"activatedAt":{"description":"Дата активации БП","type":"string","format":"date","readOnly":true,"example":"2019-06-12T00:00:00.000Z"}}}},"required":["name"]},"UserPatch":{"title":"Ученик","type":"object","properties":{"id":{"description":"ID ученика в системе","type":"integer","format":"int32","example":123456,"readOnly":true,"minimum":0,"maximum":2147483647},"name":{"description":"Полное имя ученика","type":"string","maxLength":100,"example":"Иванов Петр Александрович"},"email":{"description":"Email ученика","type":"string","maxLength":100,"nullable":true,"example":"ivanov@site.com"},"phone":{"description":"Номер телефона ученика","type":"string","maxLength":15,"nullable":true,"pattern":"^[0-9]{10,15}$","example":79001234567},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"balans":{"description":"Баланс ученика с вычетом долгов (availableBalance минус долги по счетам, может быть отрицательным)","type":"number","format":"double","readOnly":true,"example":100},"bonusBalance":{"description":"Баланс бонусов ученика","type":"number","format":"double","readOnly":true,"example":100},"availableBalance":{"description":"Доступный баланс ученика (сумма приходов и расходов)","type":"number","format":"double","readOnly":true,"example":100},"advSourceId":{"$ref":"#/components/schemas/User/properties/advSourceId"},"createSourceId":{"allOf":[{"readOnly":true},{"$ref":"#/components/schemas/User/properties/createSourceId"}]},"stateChangedAt":{"$ref":"#/components/schemas/User/properties/stateChangedAt"},"statusChangeReasonId":{"allOf":[{"$ref":"#/components/schemas/User/properties/statusChangeReasonId"},{"minimum":1}]},"clientStateId":{"$ref":"#/components/schemas/User/properties/clientStateId"},"filials":{"description":"ID филиалов ученика","type":"array","items":{"type":"integer","minimum":1,"format":"int64"}},"responsibles":{"description":"ID ответственных сотрудников ученика","type":"array","items":{"type":"integer","minimum":1,"format":"int64"}},"attributes":{"description":"Дополнительные признаки ученика","type":"array","items":{"$ref":"#/components/schemas/UserAttr"}},"joins":{"description":"Записи ученика","type":"array","items":{"$ref":"#/components/schemas/UserJoin"},"readOnly":true},"tags":{"description":"Теги ученика","type":"array","items":{"$ref":"#/components/schemas/UserTagResponse"},"readOnly":true},"links":{"$ref":"#/components/schemas/UserLinks"},"utms":{"$ref":"#/components/schemas/UserUTMS"},"BPLevel":{"description":"БП ученика","type":"object","properties":{"levelId":{"description":"Id уровня БП","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647},"isActive":{"description":"Активность БП","type":"boolean","default":false},"activatedAt":{"description":"Дата активации БП","type":"string","format":"date","readOnly":true,"example":"2019-06-12T00:00:00.000Z"}}}}},"UserLinks":{"description":"ID учеников во внешних CRM","type":"object","readOnly":true,"properties":{"amoCRMContactId":{"description":"Id контакта amoCRM","type":"integer","format":"int32","example":123,"readOnly":true,"minimum":0,"maximum":2147483647},"bitrixContactId":{"description":"Id контакта Битрикс24","type":"integer","format":"int32","example":124,"readOnly":true,"minimum":0,"maximum":2147483647},"vkAdsBannerId":{"description":"Id объявления VK Реклама","type":"integer","format":"int32","example":125,"readOnly":true,"minimum":0,"maximum":2147483647}}},"UserUTMS":{"description":"UTM-метки ученика","type":"object","readOnly":true,"properties":{"utm_term":{"description":"Ключевые слова для платной рекламы","type":"string","example":"TERM","readOnly":true},"utm_medium":{"description":"Тип трафика","type":"string","example":"MED","readOnly":true},"utm_source":{"description":"Источник трафика","type":"string","example":"yahoo","readOnly":true},"utm_content":{"description":"Дополнительная информация","type":"string","example":"BAN","readOnly":true},"utm_campaign":{"description":"Название рекламной кампании","type":"string","example":"CAMP","readOnly":true}}},"UserAttr":{"anyOf":[{"type":"object","title":"Признак типа select, по ID признака","required":["attributeId","valueId"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Уровень подготовки","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["select"],"example":"select","readOnly":true},"value":{"description":"Значение признака","type":"string","example":"Опытный","readOnly":true},"valueId":{"description":"ID значения признака (если тип признака - select)","type":"integer","format":"int64","example":300}}},{"type":"object","title":"Признак типа select, по алиасу признака","required":["attributeAlias","valueId"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level"},"attributeName":{"description":"Название признака","type":"string","example":"Уровень подготовки","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["select"],"example":"select","readOnly":true},"value":{"description":"Значение признака","type":"string","example":"Опытный","readOnly":true},"valueId":{"description":"ID значения признака (если тип признака - select)","type":"integer","format":"int64","example":300}}},{"type":"object","title":"Признак типа phone, по ID признака","required":["attributeId","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"mom_phone","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Номер телефона матери","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["phone"],"example":"phone","readOnly":true},"value":{"description":"Значение признака","type":"string","maxLength":15,"pattern":"^[0-9]{10,15}$","example":"79001234567"}}},{"type":"object","title":"Признак типа phone, по алиасу признака","required":["attributeAlias","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"mom_phone"},"attributeName":{"description":"Название признака","type":"string","example":"Номер телефона матери","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["phone"],"example":"phone","readOnly":true},"value":{"description":"Значение признака","type":"string","maxLength":15,"pattern":"^[0-9]{10,15}$","example":"79001234567"}}},{"type":"object","title":"Признак типа email, по ID признака","required":["attributeId","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"mom_email","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Email матери","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["email"],"example":"email","readOnly":true},"value":{"description":"Значение признака","type":"string","maxLength":100,"example":"ivanova@site.com"}}},{"type":"object","title":"Признак типа email, по алиасу признака","required":["attributeAlias","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"mom_phone"},"attributeName":{"description":"Название признака","type":"string","example":"Номер телефона матери","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["email"],"example":"email","readOnly":true},"value":{"description":"Значение признака","type":"string","maxLength":100,"example":"ivanova@site.com"}}},{"type":"object","title":"Признак прочих типов, по ID признака","required":["attributeId","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Опытный","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["string","date","checkbox","number"],"example":"string","readOnly":true},"value":{"description":"Значение признака","type":"string","example":"Опытный"}}},{"type":"object","title":"Признак boolean, по ID признака","required":["attributeId","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"subscribe_mailing","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Подписан на рассылку","readOnly":true},"attributeType":{"description":"Тип признака","type":"boolean","enum":["boolean"],"example":"boolean","readOnly":true},"value":{"description":"Значение признака","type":"boolean","example":"true"}}},{"type":"object","title":"Признак boolean, по алиасу признака","required":["attributeAlias","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"subscribe_mailing"},"attributeName":{"description":"Название признака","type":"string","example":"Подписан на рассылку","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["boolean"],"example":"boolean","readOnly":true},"value":{"description":"Значение признака","type":"boolean","example":"true"}}},{"type":"object","title":"Признак прочих типов, по алиасу признака","required":["attributeAlias","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level"},"attributeName":{"description":"Название признака","type":"string","example":"Опытный","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["string","date","checkbox","number"],"example":"string","readOnly":true},"value":{"description":"Значение признака","type":"string","example":"Опытный"}}},{"type":"object","title":"Признак типа multiselect, по ID признака","required":["attributeId","valueIds"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["multiselect"],"example":"multiselect","readOnly":true},"valueIds":{"description":"Id значений признака","type":"array","items":{"type":"number"},"example":"4,5"},"values":{"description":"Значения","type":"array","items":{"type":"object"},"readOnly":true}}},{"type":"object","title":"Признак типа multiselect, по алиасу признака","required":["attributeAlias","valueIds"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"skills_level"},"attributeType":{"description":"Тип признака","type":"string","enum":["multiselect"],"example":"multiselect","readOnly":true},"valueIds":{"description":"Id значений признака","type":"array","items":{"type":"number"},"example":"4,5"},"values":{"description":"Значения","type":"array","items":{"type":"object"},"readOnly":true}}},{"type":"object","title":"Признак типа discount, по алиасу признака","required":["attributeAlias","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2,"readOnly":true},"attributeAlias":{"description":"Алиас признака","type":"string","example":"discount"},"attributeName":{"description":"Название признака","type":"string","example":"Скидка","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["number"],"example":"number","readOnly":true},"value":{"description":"Значение признака","type":"number","format":"double","minimum":0,"maximum":100}}},{"type":"object","title":"Признак типа discount, по ID признака","required":["attributeId","value"],"properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeAlias":{"description":"Алиас признака","type":"string","example":"discount","readOnly":true},"attributeName":{"description":"Название признака","type":"string","example":"Скидка","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["number"],"example":"number","readOnly":true},"value":{"description":"Значение признака","type":"number","format":"double","example":"15","minimum":0,"maximum":100}}}]},"UserRestricted":{"title":"Ученик","type":"object","properties":{"id":{"description":"ID ученика в системе","type":"integer","format":"int64","example":123456,"readOnly":true},"name":{"description":"Полное имя ученика","type":"string","maxLength":100,"example":"Иванов Петр Александрович","readOnly":true},"email":{"description":"Email ученика","type":"string","maxLength":100,"nullable":true,"example":"ivanov@site.com","readOnly":true},"phone":{"description":"Номер телефона ученика","type":"string","maxLength":15,"nullable":true,"pattern":"^[0-9]{1,15}$","example":79001234567,"readOnly":true},"balans":{"description":"Баланс ученика с вычетом долгов (availableBalance минус долги по счетам, может быть отрицательным)","type":"number","format":"double","readOnly":true,"example":100},"availableBalance":{"description":"Доступный баланс ученика (сумма приходов и расходов)","type":"number","format":"double","readOnly":true,"example":400},"filials":{"description":"ID филиалов ученика","type":"array","minLength":1,"items":{"type":"integer","format":"int64"}},"responsibles":{"description":"ID ответственных сотрудников ученика","type":"array","minLength":1,"items":{"type":"integer","format":"int64"}},"joins":{"description":"Записи ученика","type":"array","items":{"$ref":"#/components/schemas/UserJoin"},"readOnly":true},"attributes":{"description":"Дополнительные признаки ученика","type":"array","items":{"anyOf":[{"type":"object","title":"Признак типа boolean","properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeName":{"description":"Название признака","type":"string","example":"Подписан на рассылку","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["boolean"],"example":"boolean","readOnly":true},"value":{"description":"Значение признака","type":"boolean","nullable":true,"example":true}}},{"type":"object","title":"Признак типа select","properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeName":{"description":"Название признака","type":"string","example":"Уровень подготовки","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["select"],"example":"select","readOnly":true},"value":{"description":"Значение признака","type":"string","example":"Опытный","readOnly":true},"valueId":{"description":"ID значения признака (если тип признака - select)","type":"integer","format":"int64","example":300}}},{"type":"object","title":"Признак прочих типов","properties":{"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":2},"attributeName":{"description":"Название признака","type":"string","example":"Опытный","readOnly":true},"attributeType":{"description":"Тип признака","type":"string","enum":["string","date","checkbox","number","phone","email"],"example":"string","readOnly":true},"value":{"description":"Значение признака","type":"string","nullable":true,"example":"Опытный"}}}]}},"lessonsStat":{"description":"Статистика по занятиям","type":"object","readOnly":true,"properties":{"totalRecords":{"description":"Всего записей на занятие","type":"integer"},"visits":{"description":"Посещений","type":"integer"},"misses":{"description":"Пропусков","type":"integer"},"missGoodReason":{"description":"Пропусков по уважительной причине","type":"integer"}}}}},"Users":{"title":"Список учеников","properties":{"users":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/User"},{"properties":{"payLinkKey":{"description":"Ключ оплаты (при includePayLink=true)","type":"string","example":"0047245cc1bc74076d704e20000be5aaa798e432"},"avatarLink":{"description":"Ссылка на фото сотрудника","type":"string","nullable":true,"readOnly":true}}}]}},"stats":{"$ref":"#/components/schemas/Paging"}}},"Paging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5}}},"ErrorHandling":{"properties":{"code":{"description":"Код ошибки","example":"RequestValidationError","type":"string"},"message":{"description":"Описание ошибки","type":"string"},"meta":{"description":"Дополнительная информация об ошибке","type":"object"}},"required":["code","message"]},"LicenseRestricts":{"properties":{"code":{"description":"Код ошибки","example":"licenseRestrict","type":"string"},"message":{"description":"Описание ошибки","type":"string"},"meta":{"description":"Дополнительная информация об ошибке","type":"object"}},"required":["code","message"]},"JoinStatus":{"description":"Статус заявки","properties":{"id":{"description":"ID статуса записи","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название статуса","type":"string","maxLength":100,"example":"Учится"},"stateOrder":{"description":"Порядок сортировки","type":"integer","format":"int32","readOnly":true,"example":10,"minimum":0,"maximum":2147483647},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name"]},"ClientStatus":{"description":"Статус клиента","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название статуса","type":"string","maxLength":100,"example":"Учится"},"stateOrder":{"description":"Порядок сортировки","type":"integer","format":"int32","readOnly":true,"example":10,"minimum":0,"maximum":2147483647},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"systemCode":{"description":"Код системного статуса","example":"reject","nullable":true,"type":"string","enum":["reject","inactive_client","new","bad_lead","client",null]}},"required":["id","name"]},"Tag":{"description":"Тег","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название","type":"string","maxLength":100,"example":"Учится"},"color":{"description":"Цвет","type":"string","pattern":"^#[A-Fa-f0-9]{6}$","example":"#222fff"}},"required":["id","name","color"]},"UserTagResponse":{"title":"Тег ученика","description":"Тег ученика","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название","type":"string","maxLength":100,"example":"Учится"}},"required":["name"]},"UserTag":{"description":"Тег ученика","properties":{"name":{"description":"Название","type":"string","maxLength":100,"example":"Учится"}},"required":["name"]},"JoinTag":{"description":"Тег записи","properties":{"id":{"description":"ID тега","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название","type":"string","maxLength":100,"example":"Учится"}},"required":["id","name"]},"PaymentType":{"description":"Тип платежа","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":2,"minimum":0,"maximum":2147483647},"name":{"description":"Название","type":"string","maxLength":100,"example":"Безнал"}},"required":["id","name"]},"AdvSource":{"description":"Информационный источник","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":1,"minimum":0,"maximum":2147483647},"name":{"description":"Название источника","type":"string","maxLength":100,"example":"Соцсети"}},"required":["id","name"]},"CreateSource":{"description":"Способ заведения заявки","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":1,"minimum":0,"maximum":2147483647},"name":{"description":"Название способа","type":"string","maxLength":100,"example":"ВКонтакте","readOnly":true},"viewName":{"description":"Детализация способа","type":"string","maxLength":100,"example":"Виджет: ВКонтакте","readOnly":true}},"required":["id","name","viewName"]},"Rate":{"description":"Ставка сдельной оплаты сотрудника","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","example":"Ставка ЗП"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name","createdAt"]},"Role":{"description":"Роль сотрудника","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","example":"Администратор"},"permissions":{"description":"Права доступа","type":"array","example":["views.joins","views.leads"],"items":{"type":"string"}},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name","createdAt"]},"ManagerEdit":{"title":"Сотрудник компании","properties":{"salaryFilialId":{"description":"ID филиала для занесения ЗП. Обязательное поле, если у сотрудника больше одного филиала.","type":"integer","format":"int64","nullable":true},"name":{"description":"Полное имя","type":"string","maxLength":100,"example":"Смолин Петр Михайлович"},"phone":{"description":"Номер телефона","type":"string","maxLength":15,"example":79001234567,"pattern":"^[0-9]{10,15}$"},"email":{"description":"Email. Обязательное поле, если сотруднику разрешен вход в CRM.","type":"string","maxLength":100,"nullable":true,"example":"ivanov@site.com"},"replaceToManagerId":{"description":"ID сотрудника, на которого будут назначены все невыполненные задачи, предстоящие занятия, если они есть, и клиенты удаляемого сотрудника. Параметр используется и обязателен при смене isWork на false.","type":"integer","format":"int64","example":2},"filials":{"description":"ID филиалов сотрудника","type":"array","minLength":1,"items":{"type":"integer","format":"int64"}},"roles":{"description":"ID ролей сотрудника","type":"array","minLength":1,"items":{"type":"integer","format":"int64"}},"enabled":{"description":"Разрешен вход в CRM","type":"boolean","example":true},"password":{"description":"Пароль для входа в CRM. Если не передать пароль, он не будет обновлен. Пароль должен содержать как минимум одну заглавную букву, одну строчную букву, одну цифру и один специальный символ","type":"string","example":"qW123e2{xs","minLength":8,"writeOnly":true,"pattern":"^(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\|,.<>\\/?]).+$"},"additionalContacts":{"description":"Дополнительные контакты","type":"string","nullable":true},"isStaff":{"description":"Штатный сотрудник","type":"boolean","example":true,"default":true},"isWork":{"description":"Работает","type":"boolean","example":true,"default":true},"sendNotifies":{"description":"Отправлять уведомления","type":"boolean","example":true,"default":true},"startDate":{"description":"Дата начала работы","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endDate":{"description":"Дата окончания работы","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"contractNumber":{"description":"Номер договора","type":"string","nullable":true,"example":"№12445 от 2019г"},"contractDate":{"description":"Дата договора","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"birthDate":{"description":"Дата рождения","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"passportData":{"description":"Паспортные данные","type":"string","nullable":true,"example":4512821218},"inn":{"description":"ИНН","type":"string","pattern":"^\\d{12}$","example":"111111111111","nullable":true},"comment":{"description":"Комментарий к сотруднику","type":"string","nullable":true},"shortDescription":{"description":"Краткое описание сотрудника","type":"string","nullable":true,"example":"Краткое описание"},"description":{"title":"Для применения форматирования используется синтаксис языка разметки Markdown. \\n для переноса строки","description":"Подробное описание сотрудника","type":"string","nullable":true,"example":"**Подробное описание**"},"color":{"description":"Цвет сотрудника при отображении в интерфейсе","type":"string","pattern":"^#[A-Fa-f0-9]{6}$","example":"#222fff"},"rateId":{"description":"ID ставки сдельной оплаты","type":"integer","format":"int64","nullable":true},"allowFunds":{"description":"Может ли сотрудник использовать подотчетные средства","type":"boolean","example":true,"default":false},"shiftDuration":{"description":"Продолжительность смены, ч.","type":"integer","format":"int32","maximum":24,"minimum":1,"nullable":true},"blocked":{"description":"Блокировка сотрудника","type":"boolean","example":false}},"required":["name","phone","enabled","filials","roles","color"]},"SubscriptionInput":{"title":"Абонемент","anyOf":[{"title":"Безлимитный","required":["name","price","yield"],"properties":{"name":{"description":"Название","type":"string","maxLength":100,"example":"Общий"},"price":{"description":"Стоимость","type":"number","format":"double","example":1000,"minimum":1},"visitCount":{"description":"Количество занятий (0 если абонемент безлимитный)","type":"integer","enum":[0],"example":0,"default":0},"filialId":{"description":"ID филиала. null - все филиалы","nullable":true,"type":"integer","deprecated":true,"example":2},"filialIds":{"description":"ID филиалов. [0] - все филиалы","type":"array","items":{"type":"integer","format":"int64"},"example":[2]},"subscriptionGroupingId":{"description":"ID группировки абонементов.","type":"integer","format":"int64","example":2},"period":{"description":"Срок действия","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"2 day"},"yield":{"description":"Цена за занятие","type":"number","format":"double","example":100},"useDiscount":{"description":"Применять скидку клиента","type":"boolean","example":false},"courses":{"description":"ID курсов","type":"array","items":{"type":"integer","format":"int64"}},"classes":{"description":"ID групп","type":"array","items":{"type":"integer","format":"int64"}},"family":{"description":"Создать семейный абонемент","type":"boolean","example":true,"default":false},"params":{"$ref":"#/components/schemas/SubscriptionParams"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}}},{"title":"С фиксированным количеством посещений","required":["name","price","visitCount"],"properties":{"name":{"description":"Название","type":"string","maxLength":100,"example":"Общий"},"visitCount":{"description":"Количество занятий (0 если абонемент безлимитный)","type":"integer","format":"int64","example":10,"minimum":1,"maximum":365},"price":{"description":"Стоимость","type":"number","format":"double","example":1000,"minimum":1},"filialId":{"description":"ID филиала. null - все филиалы","type":"integer","deprecated":true,"nullable":true,"example":[2]},"filialIds":{"description":"ID филиалов. [0] - все филиалы","type":"array","items":{"type":"integer","format":"int64"},"example":[2]},"period":{"description":"Срок действия","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"2 day"},"courses":{"description":"ID курсов","type":"array","items":{"type":"integer","format":"int64"}},"classes":{"description":"ID групп","type":"array","items":{"type":"integer","format":"int64"}},"family":{"description":"Создать семейный абонемент","type":"boolean","example":true,"default":false},"params":{"$ref":"#/components/schemas/SubscriptionParams"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}}},{"title":"С плавающим количеством посещений","required":["name","price","type","params"],"properties":{"name":{"description":"Название","type":"string","maxLength":100,"example":"Общий"},"price":{"description":"Стоимость","type":"number","format":"double","example":1000,"minimum":1},"type":{"description":"Тип абонемента","type":"string","enum":["dynamic"],"example":"dynamic"},"visitCount":{"description":"Количество занятий (0 если абонемент с динамическим подсчетом занятий)","type":"integer","enum":[0],"example":0,"default":0},"filialId":{"description":"ID филиала. null - все филиалы","type":"integer","deprecated":true,"nullable":true,"example":[2]},"filialIds":{"description":"ID филиалов. [0] - все филиалы","type":"array","items":{"type":"integer","format":"int64"},"example":[2]},"period":{"description":"Срок действия","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"1 month"},"courses":{"description":"ID курсов","type":"array","items":{"type":"integer","format":"int64"}},"classes":{"description":"ID групп","type":"array","items":{"type":"integer","format":"int64"}},"family":{"description":"Создать семейный абонемент","type":"boolean","example":true,"default":false},"params":{"required":["dynamicParams"],"allOf":[{"$ref":"#/components/schemas/SubscriptionParams"},{"type":"object","properties":{"dynamicParams":{"type":"object","required":["lessonsDays"],"properties":{"lessonsDays":{"description":"Массив с днями занятий","type":"array","items":{"type":"string","enum":["mon","tue","wed","thu","fri","sat","sun"]},"example":["mon","wed","fri"],"minItems":1},"ignoreHolidays":{"description":"Игнорировать выходные при подсчете количества занятий","type":"boolean","example":true,"default":false}}}}}]},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}}}]},"SubscriptionParams":{"title":"Дополнительные параметры вида абонемента","properties":{"courseIds":{"title":"Программы, для которых доступен абонемент","nullable":true,"type":"array","items":{"type":"number"}},"classIds":{"title":"Группы, для которых доступен абонемент","nullable":true,"type":"array","items":{"type":"number"}},"fieldsToShowInNameAsAdditionalInfo":{"title":"Поля, которые нужно отображать как доп. инфо в имени аб-та в виджетах и ЛК","nullable":true,"type":"array","items":{"type":"string","enum":["price","visitCount","period"]}}}},"Subscription":{"title":"Абонемент","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":123},"name":{"description":"Название","type":"string","maxLength":100,"example":"Общий"},"visitCount":{"description":"Количество занятий, 0, если абонемент безлимитный","type":"integer","format":"int64","example":10},"price":{"description":"Стоимость","type":"number","format":"double","example":1000},"filialId":{"description":"ID филиала. null - все филиалы","type":"integer","deprecated":true,"nullable":true,"example":2},"filialIds":{"description":"ID филиалов. [0] - все филиалы","type":"array","items":{"type":"integer","format":"int64"},"example":[2]},"subscriptionGroupingId":{"description":"ID группировки абонементов.","type":"integer","format":"int64","example":2},"yield":{"description":"Цена за занятие","type":"number","format":"double","example":100},"useDiscount":{"description":"Применять скидку клиента","type":"boolean","example":false},"period":{"description":"Срок действия","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"2 day"},"courses":{"description":"ID курсов","type":"array","items":{"type":"integer"}},"classes":{"description":"ID групп","type":"array","items":{"type":"integer"}},"family":{"description":"Является ли абонемент семейным","type":"boolean","example":false},"params":{"nullable":true,"$ref":"#/components/schemas/SubscriptionParams"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}}},"Subscriptions":{"title":"Список абонементов","properties":{"subscriptions":{"type":"array","items":{"$ref":"#/components/schemas/Subscription"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"Manager":{"title":"Сотрудник компании","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":123},"name":{"description":"Полное имя","type":"string","maxLength":100,"example":"Смолин Петр Михайлович"},"phone":{"description":"Номер телефона","type":"string","maxLength":15,"example":79001234567,"pattern":"^[0-9]{10,15}$"},"email":{"description":"Email. Обязательное поле, если сотруднику разрешен вход в CRM.","type":"string","maxLength":100,"nullable":true,"example":"ivanov@site.com"},"filials":{"description":"ID филиалов сотрудника. Для выбора всех филиалов передайте в массиве 0","type":"array","minLength":1,"items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"salaryFilialId":{"description":"ID филиала для занесения ЗП. Обязательное поле, если у сотрудника больше одного филиала.","type":"integer","format":"int64","nullable":true},"roles":{"description":"ID ролей сотрудника","type":"array","minLength":1,"items":{"type":"integer","format":"int64"}},"enabled":{"description":"Разрешен вход в CRM","type":"boolean","example":null,"default":false},"password":{"description":"Пароль для входа в CRM. Обязательное поле, если сотруднику разрешен вход в CRM.  Пароль должен содержать как минимум одну заглавную букву, одну строчную букву, одну цифру и один специальный символ","type":"string","example":"qW123e2{xs","minLength":8,"writeOnly":true,"pattern":"^(?=.*\\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*()_+\\-=[\\]{};':\"\\|,.<>\\/?]).+$"},"additionalContacts":{"description":"Дополнительные контакты","type":"string","nullable":true},"isStaff":{"description":"Штатный сотрудник","type":"boolean","example":true,"default":true},"isWork":{"description":"Работает","type":"boolean","example":true,"default":true},"blocked":{"description":"Блокировка сотрудника","type":"boolean","readOnly":true,"example":false},"sendNotifies":{"description":"Отправлять уведомления","type":"boolean","example":true,"default":true},"startDate":{"description":"Дата начала работы","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endDate":{"description":"Дата окончания работы","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"contractNumber":{"description":"Номер договора","type":"string","nullable":true,"example":"№12445 от 2019г"},"contractDate":{"description":"Дата договора","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"birthDate":{"description":"Дата рождения","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"passportData":{"description":"Паспортные данные","type":"string","nullable":true,"example":4512821218},"inn":{"description":"ИНН","type":"string","pattern":"^\\d{12}$","example":"111111111111","nullable":true},"comment":{"description":"Комментарий к сотруднику","type":"string","nullable":true},"color":{"description":"Цвет сотрудника. Если цвет не передан при создании, он будет выбран автоматически.","type":"string","pattern":"^#[A-Fa-f0-9]{6}$","example":"#222fff"},"rateId":{"description":"ID ставки сдельной оплаты","type":"integer","format":"int64","nullable":true},"shiftDuration":{"description":"Продолжительность смены, ч.","type":"integer","format":"int32","maximum":24,"minimum":1,"nullable":true},"isOwner":{"description":"Является ли владельцем компании. Такой сотрудник может быть только один.","type":"boolean","example":true,"readOnly":true},"allowFunds":{"description":"Может ли сотрудник использовать подотчетные средства","type":"boolean","example":true,"default":false},"lastActive":{"description":"Последняя активность сотрудника в системе","type":"string","format":"date-time","readOnly":true,"nullable":true,"example":"2019-06-12T13:00:12.000Z"},"shortDescription":{"description":"Краткое описание сотрудника","type":"string","nullable":true,"example":"Краткое описание"},"description":{"description":"Подробное описание сотрудника","type":"string","nullable":true,"example":"<div>Подробное описание</div>"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}},"required":["name","phone","filials","roles"]},"ManagerCreateRequest":{"allOf":[{"$ref":"#/components/schemas/Manager"},{"type":"object","properties":{"description":{"title":"Для применения форматирования используется синтаксис языка разметки Markdown. \\n для переноса строки","description":"Подробное описание сотрудника","type":"string","nullable":true,"example":"**Подробное описание**"}}}]},"UserManager":{"title":"Сотрудник компании","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":123},"name":{"description":"Полное имя","type":"string","maxLength":100,"example":"Смолин Петр Михайлович"},"isWork":{"description":"Сотрудник доступен для выбора","type":"boolean"},"teachFilialIds":{"description":"ID филиалов сотрудника, в которых он преподает","type":"array","items":{"type":"integer","format":"int64"}}}},"UserManagersIndividual":{"title":"Список сотрудников для записи на занятия в группы индивидуального обучения","properties":{"individualManagers":{"type":"array","items":{"$ref":"#/components/schemas/UserManagerIndividual"}}}},"UserManagerIndividual":{"title":"Сотрудник компании","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":123},"name":{"description":"Полное имя","type":"string","maxLength":100,"example":"Смолин Петр Михайлович"},"shortDescription":{"description":"Краткое описание","type":"string"},"description":{"description":"Длинное описание преподавателя (поддерживается html)","type":"string"},"freeTime":{"type":"array","items":{"$ref":"#/components/schemas/FreeTime"}}}},"FreeTime":{"title":"Свободное время преподавателя","properties":{"date":{"type":"string","format":"date","example":"2019-06-14"},"time":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"}}},"Filial":{"title":"Филиал компании","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","maxLength":200,"example":"Московский филиал на Коуровской"},"city":{"description":"Город","type":"string","maxLength":250,"example":"Москва"},"address":{"description":"Адрес","type":"string","maxLength":250,"example":"Ул. Коуровская, 5, оф 506, 5 этаж"},"shortName":{"description":"Короткое название","type":"string","maxLength":6,"example":"МСК"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"timezone":{"description":"Временная зона","type":"string","maxLength":100,"example":"Europe/Moscow"},"status":{"description":"Текущее состояние филиала. **active** - активный, **archive** - в архиве","type":"string","enum":["active","archive"],"example":"active"},"docName":{"description":"Обозначение для нумерации документов","type":"string"}},"required":["id","name","createdAt","city","address","shortName","timezone"]},"UserFilial":{"title":"Филиал компании","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","maxLength":200,"example":"Московский филиал на Коуровской"},"city":{"description":"Город","type":"string","maxLength":250,"example":"Москва","nullable":true},"address":{"description":"Адрес","type":"string","maxLength":250,"nullable":true,"example":"Ул. Коуровская, 5, оф 506, 5 этаж"},"shortName":{"description":"Короткое название","type":"string","maxLength":6,"example":"МСК"},"timezone":{"description":"Временная зона","type":"string","maxLength":100,"example":"Europe/Moscow"},"status":{"description":"Текущее состояние филиала. **active** - активный, **archive** - в архиве","type":"string","enum":["active","archive"],"example":"active"}},"required":["id","name","shortName","timezone"]},"Room":{"title":"Аудитория","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","maxLength":200,"example":"Московский филиал на Коуровской"},"status":{"description":"Текущее состояние аудитории. **active** - активная, **archive** - аудитория в архиве","type":"string","enum":["active","archive"],"example":"active"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"filialId":{"description":"ID Филиала","type":"integer","format":"int64","example":100}},"required":["id","name","status","createdAt","filialId"]},"UserRoom":{"title":"Аудитория","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"name":{"description":"Название","type":"string","maxLength":200,"example":"Московский филиал на Коуровской"},"status":{"description":"Текущее состояние аудитории. **active** - активная, **archive** - аудитория в архиве","type":"string","enum":["active","archive"],"example":"active"},"filialId":{"description":"ID Филиала","type":"integer","format":"int64","example":100}},"required":["id","name","filialId"]},"Course":{"description":"Программа (курс, предмет)","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":100},"name":{"description":"Название","type":"string","maxLength":200,"minLength":2,"example":"Акварель"},"shortDescription":{"description":"Короткое описание программы","type":"string","nullable":true,"example":"Освоение основных техник и приемов работы с акварелью."},"siteUrl":{"description":"Ссылка на страницу описания программы","type":"string","nullable":true,"example":"https://site.com/aquarel.html"},"description":{"description":"Длинное описание программы (поддерживается html)","type":"string","nullable":true},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"courseType":{"description":"Тип программы. **course** - курс, **master** - мастер-класс, **personal** - индивидуальное занятие","type":"string","enum":["course","master","personal"],"example":"course"}},"required":["id","name","createdAt","courseType"]},"UserCourse":{"description":"Программа (курс, предмет)","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":100},"name":{"description":"Название","type":"string","maxLength":200,"minLength":2,"example":"Акварель"},"shortDescription":{"description":"Короткое описание программы","type":"string","nullable":true,"example":"Освоение основных техник и приемов работы с акварелью."},"siteUrl":{"description":"Ссылка на страницу описания программы","type":"string","nullable":true,"example":"https://site.com/aquarel.html"},"description":{"description":"Длинное описание программы (поддерживается html)","type":"string","nullable":true},"courseType":{"description":"Тип программы. **course** - курс, **master** - мастер-класс, **personal** - индивидуальное занятие","type":"string","enum":["course","master","personal"],"example":"course"}},"required":["id","name","courseType"]},"ClassAttribute":{"description":"Признак группы","oneOf":[{"properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"$ref":"#/components/schemas/ClassCreateBase/properties/name"},"type":{"description":"Вид признака. **string** – текст, **number** – число, **boolean** – чекбокс, **select** – выбор.","enum":["string","number","boolean"],"example":"string","type":"string"},"alias":{"$ref":"#/components/schemas/ClassAttribute/oneOf/1/properties/alias"},"inClass":{"description":"Активировать признак","type":"boolean","default":false},"addition":{"description":"Отображать в \"строке\" группы в списке групп","type":"boolean","default":false},"required":{"$ref":"#/components/schemas/ClassAttribute/oneOf/1/properties/required"},"order":{"description":"Порядок сортировки","type":"integer","format":"int64","default":0},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}},"required":["name","type","alias","inClass","addition","required","order"]},{"properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"$ref":"#/components/schemas/ClassCreateBase/properties/name"},"type":{"description":"Вид признака. **string** – текст, **number** – число, **boolean** – чекбокс, **select** – выбор.","enum":["select"],"example":"select","type":"string"},"alias":{"description":"Алиас","type":"string"},"inClass":{"$ref":"#/components/schemas/ClassAttribute/oneOf/0/properties/inClass"},"addition":{"$ref":"#/components/schemas/ClassAttribute/oneOf/0/properties/addition"},"required":{"description":"Обязательно для заполнения","type":"boolean","default":false},"order":{"$ref":"#/components/schemas/ClassAttribute/oneOf/0/properties/order"},"selectFields":{"description":"Варианты выбора. Только для признаков с типом select.","type":"array","items":{"type":"object","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"$ref":"#/components/schemas/ClassCreateBase/properties/name"}}},"example":[{"id":1,"name":"Значение 1"},{"id":2,"name":"Значение 2"}]},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}},"required":["name","type","alias","inClass","addition","required","order","selectFields"]}]},"ClassAttributeValue":{"description":"Признак группы","properties":{"attributeName":{"description":"Название признака","type":"string","example":"Текстовый признак"},"attributeAlias":{"description":"Алиас признака","type":"string","example":"tekstovii_priznak"},"attributeType":{"description":"Вид признака","type":"string","enum":["select","string","number","boolean"],"example":"string"},"attributeId":{"description":"ID признака","type":"integer","format":"int64","example":10},"value":{"description":"Установленное значение","oneOf":[{"type":"string"},{"type":"integer"},{"type":"boolean"}]}},"required":["attributeName","attributeAlias","attributeType","attributeId","value"]},"Class":{"description":"Группа","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true},"name":{"description":"Название","type":"string","maxLength":200,"nullable":true,"example":"Группа по выходным"},"description":{"description":"Описание группы (при includeDescription=true)","type":"string","nullable":true},"beginDate":{"description":"Старт занятий","type":"string","format":"date-time","nullable":true,"example":"2019-06-10T15:00:00.000Z"},"maxStudents":{"description":"Максимальное количество студентов в группе","type":"integer","format":"int32","nullable":true,"example":15,"minimum":0,"maximum":2147483647},"status":{"description":"Текущее состояние группы. **opened** - набор открыт, **closed** - набор закрыт, **archive** - группа в архиве","type":"string","enum":["opened","closed","archive"],"example":"opened"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"courseId":{"description":"ID программы","type":"integer","format":"int64","example":100},"payType":{"description":"Способ оплаты за обучение. **full** - разово, **lessons** - за занятия","type":"string","enum":["full","lessons"],"example":"full"},"filialId":{"description":"ID филиала","type":"integer","format":"int32","example":300,"minimum":0,"maximum":2147483647},"payPass":{"description":"Списывать посещения из абонемента за пропуски без уваж. причины. Возвращается значение `payPassReason || payPassNoReason`. Необходимо использовать объект `payPassRules`","deprecated":true,"type":"boolean","example":true},"payPassRules":{"description":"Правила списания из абонемента за пропуски","type":"object","properties":{"payPassReason":{"type":"boolean","description":"Списывать за пропуски по уважительной причине","default":false},"payPassReasonRate":{"type":"number","minimum":1,"maximum":100,"description":"Процент от обычного списания при списании за пропуск по уважительной причине."},"payPassNoReason":{"type":"boolean","description":"Списывать за пропуски без уважительной причины","default":false},"payPassNoReasonRate":{"type":"number","minimum":1,"maximum":100,"description":"Процент от обычного списания при списании за пропуск без уважительной причины."}}},"price":{"description":"Цена","type":"number","format":"double","nullable":true,"example":1000},"priceComment":{"description":"Комментарий к цене","type":"string","maxLength":255,"nullable":true,"example":"Абонемент 5 занятий - 2500 р., 10 занятий - 4000 р."},"showDates":{"description":"Отобажение даты начала у названия группы","type":"boolean","default":true,"example":false},"priceForWidget":{"description":"Цена для виджетов.","type":"string","maxLength":255,"nullable":true,"example":"2500-4000 р/аб."},"color":{"description":"Цвет группы","type":"string","nullable":true,"maxLength":10,"example":"#ff33f5"},"managerIds":{"description":"Список ID ведущих группы","type":"array","items":{"type":"integer"},"example":[1,2]},"comment":{"description":"Комментарий к группе","type":"string","example":"Занятия по ПН-ПТ"},"stats":{"type":"object","readOnly":true,"description":"Общая информация по долгу и доходу от группы (при includeStats = true)","properties":{"income":{"description":"Доход","type":"number","example":9000},"debt":{"description":"Долг (если форма оплаты За занятия/абонемент, то поле всегда равно 0)","type":"number","example":7000}}}},"oneOf":[{"type":"object","title":"За занятия/абонемент","description":"За занятия/абонемент","properties":{"lessonSettings":{"description":"Доступ к материалам занятий. **always** - открыто, **subExists** - при наличии абонемента","type":"object","properties":{"webinarAccess":{"description":"Доступ к вебинару","type":"string","enum":["always","subExists"],"default":"always"},"videoAccess":{"description":"Доступ к видео","type":"string","enum":["always","subExists"],"default":"always"},"lessonTaskAccess":{"description":"Доступ к заданию на урок","type":"string","enum":["always","subExists"],"default":"always"},"homeTaskAccess":{"description":"Доступ к домашнему заданию","type":"string","enum":["always","subExists"],"default":"always"}}},"workOff":{"description":"Настройка отработок","type":"object","properties":{"payPassWorkOff":{"description":"Списывать посещения из абонемента за пропуски по ув. причине","type":"boolean","default":false},"payPassWorkOffRate":{"description":"% от цены посещ. в аб.","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"default":100,"nullable":true},"limitWorkOffCount":{"description":"Ограничить кол-во отработок на ученика в месяц","type":"boolean","default":false},"maxWorkOffCount":{"description":"Кол-во отработок в месяц","type":"integer","format":"int32","minimum":0,"nullable":true,"maximum":2147483647},"limitCreateWorkOff":{"description":"Ограничить возможность записи на отработку","type":"boolean","default":false},"limitCreateWorkOffType":{"description":"Тип ограничения. **sub** - Отработка доступна до конца абонемента, в котором был пропуск. **period** -Отработка доступна ограниченный период после пропуска","type":"string","enum":["sub","period"],"nullable":true},"limitCreateWorkOffPeriod":{"description":"Период в формате \"число + единица\" (например, \"5 days\", \"2 months\", \"1 year\")","type":"string","pattern":"^\\d+\\s(days|months|years)$","example":"5 days"}}}}},{"type":"object","title":"Единой суммой/в рассрочку","description":"Единой суммой/в рассрочку","properties":{"lessonSettings":{"description":"Доступ к материалам занятий","type":"object","properties":{"webinarAccess":{"description":"Доступ к вебинару","type":"string","enum":["always","invoiceFullPay","invoiceHalfPay"],"default":"always"},"videoAccess":{"description":"Доступ к видео","type":"string","enum":["always","invoiceFullPay","invoiceHalfPay"],"default":"always"},"lessonTaskAccess":{"description":"Доступ к заданию на урок","type":"string","enum":["always","invoiceFullPay","invoiceHalfPay"],"default":"always"},"homeTaskAccess":{"description":"Доступ к домашнему заданию","type":"string","enum":["always","invoiceFullPay","invoiceHalfPay"],"default":"always"}}},"invoices":{"description":"Счета","type":"object","properties":{"autoCreate":{"description":"Автоматически создавать счета","type":"boolean","default":true},"createRule":{"description":"Правило создание. **create** - Сразу при создании записи, в котором был пропуск. **setStatus** - При установке статуса","type":"string","enum":["create","setStatus"],"default":"create"},"joinStateId":{"description":"Статус записи","type":"array","items":{"type":"number","format":"int32"}},"payDateType":{"description":"Срок оплаты счета","type":"string","enum":["relative","exact"],"default":"relative"},"payDateDays":{"description":"Кол-во дней","type":"number","format":"int32","multipleOf":0.1,"maximum":360,"minimum":0,"default":3,"nullable":true},"payDate":{"description":"Дата","type":"string","format":"date","example":"2024-01-17"}}},"bonusProgram":{"description":"Программа лояльности","type":"object","properties":{"restrictBP":{"description":"Ограничение бонусной программы","type":"boolean","default":false},"maxDiscount":{"description":"Максимальный уровень скидки, %","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"nullable":true},"accrueBonuses":{"description":"Начислять бонусов, %","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"nullable":true},"sumLimit":{"description":"Можно оплатить бонусами не более, ₽","type":"number","multipleOf":0.01,"minimum":1,"nullable":true}}}}}],"required":["id","createdAt","showDates","filialId","courseId","payType","status"]},"ClassTypeOne":{"type":"object","title":"За занятия/абонемент","description":"За занятия/абонемент","properties":{"payType":{"description":"Форма оплаты. **1** - за занятия/абонемент, **0** - единой суммой/в рассрочку","type":"number","enum":[1]},"params":{"type":"object","description":"Параметры группы","properties":{"autoCreateSubs":{"type":"boolean","default":false,"description":"Автоматически создавать абонементы для записей в статусе \"Учится\""},"payPassNoReason":{"description":"Списывать посещения из абонемента за пропуски без ув. причины","type":"boolean","default":false},"payPassNoReasonRate":{"description":"% от цены посещ. в аб.","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"default":100,"nullable":true},"payPassReason":{"description":"Списывать посещения из абонемента за пропуски по ув. причине","type":"boolean","default":false},"payPassReasonRate":{"description":"% от цены посещ. в аб.","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"default":100,"nullable":true},"lessonSettings":{"description":"Доступ к материалам занятий. **always** - открыто, **subExists** - при наличии абонемента","type":"object","properties":{"webinarAccess":{"description":"Доступ к вебинару","type":"string","enum":["subExists"],"default":"always"},"videoAccess":{"description":"Доступ к видео","type":"string","enum":["subExists"],"default":"always"},"lessonTaskAccess":{"description":"Доступ к заданию на урок","type":"string","enum":["subExists"],"default":"always"},"homeTaskAccess":{"description":"Доступ к домашнему заданию","type":"string","enum":["subExists"],"default":"always"}}},"workOff":{"description":"Настройка отработок","type":"object","properties":{"payPassWorkOff":{"description":"Списывать посещения из абонемента за пропуски по ув. причине","type":"boolean","default":false},"payPassWorkOffRate":{"description":"% от цены посещ. в аб.","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"default":100,"nullable":true},"limitWorkOffCount":{"description":"Ограничить кол-во отработок на ученика в месяц","type":"boolean","default":false},"maxWorkOffCount":{"description":"Кол-во отработок в месяц","type":"integer","format":"int32","minimum":0,"nullable":true,"maximum":2147483647},"limitCreateWorkOff":{"description":"Ограничить возможность записи на отработку. При true применяется тип ограничения \"Отработка доступна до конца, абонемента, в котором был пропуск\"","type":"boolean","default":false}}}}}}},"ClassTypeTwo":{"type":"object","title":"Единой суммой/в рассрочку","description":"Единой суммой/в рассрочку","properties":{"payType":{"description":"Форма оплаты. **1** - за занятия/абонемент, **0** - единой суммой/в рассрочку","type":"number","enum":[0]},"price":{"description":"Цена курса","type":"number","multipleOf":0.01,"minimum":0},"autodebit":{"description":"Автоматически списывать средства с баланса при наличии счета","type":"boolean","default":false},"params":{"type":"object","description":"Параметры группы","properties":{"lessonSettings":{"description":"Доступ к материалам занятий. **always** - открыто, **invoiceFullPay** - если счет оплачен полностью, **invoiceHalfPay** - Если счет оплачен частично","type":"object","properties":{"webinarAccess":{"description":"Доступ к вебинару","type":"string","enum":["invoiceFullPay","invoiceHalfPay"],"default":"always"},"videoAccess":{"description":"Доступ к видео","type":"string","enum":["invoiceFullPay","invoiceHalfPay"],"default":"always"},"lessonTaskAccess":{"description":"Доступ к заданию на урок","type":"string","enum":["invoiceFullPay","invoiceHalfPay"],"default":"always"},"homeTaskAccess":{"description":"Доступ к домашнему заданию","type":"string","enum":["invoiceFullPay","invoiceHalfPay"],"default":"always"}}},"invoices":{"description":"Счета","type":"object","properties":{"autoCreate":{"description":"Автоматически создавать счета","type":"boolean","default":true},"createRule":{"description":"Обязательно при autoCreate = true. **create** - Сразу при создании записи, в котором был пропуск. **setStatus** - При установке статуса","type":"string","enum":["create","setStatus"],"default":"create"},"joinStateId":{"description":"Статус записи. Обязательно при createRule = **setStatus**","type":"array","items":{"type":"number","format":"int32"}},"payDateType":{"description":"Срок оплаты счета. Обязательно при autoCreate = true. **relative** - В течение дней с момента создания, в котором был пропуск. **exact** - Указать конкретную дату","type":"string","enum":["relative","exact"],"default":"relative"},"payDateDays":{"description":"Кол-во дней. Обязательно при payDateType = **relative**.","type":"number","format":"int32","multipleOf":0.1,"maximum":360,"minimum":0,"default":3,"nullable":true},"payDate":{"description":"Дата. Обязательно при payDateType = **exact**.","type":"string","format":"date","example":"2024-01-17"}}},"bonusProgram":{"description":"Программа лояльности","type":"object","properties":{"restrictBP":{"description":"Ограничение бонусной программы","type":"boolean","default":false},"maxDiscount":{"description":"Максимальный уровень скидки, %","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"nullable":true},"accrueBonuses":{"description":"Начислять бонусов, %","type":"number","multipleOf":0.01,"maximum":100,"minimum":0,"nullable":true},"sumLimit":{"description":"Можно оплатить бонусами не более, ₽","type":"number","multipleOf":0.01,"minimum":1,"nullable":true}}}}}}},"ClassCreateBase":{"properties":{"name":{"description":"Название","type":"string"},"maxStudents":{"description":"Максимальное количество студентов в группе. Если у вас ограничено кол-во мест на самих занятиях, укажите это при создании самих занятий. Кол-во мест в группе при этом можете оставить не заполненным.","type":"integer","format":"int32","nullable":true,"example":15,"minimum":0,"maximum":2147483647},"teacherIds":{"description":"Устаревшее поле. Вместо него следует использовать `managerIds`.\nЕсли указано поле `managerIds`, оно будет использоваться, а `teacherIds` — игнорироваться.\n","type":"array","items":{"type":"number","format":"int32"},"deprecated":true},"managerIds":{"description":"Ведущий группы. Это общая информация о ведущих группы. Назначение ведущих самих занятий осуществляется при редактировании занятий.","type":"array","items":{"type":"number","format":"int32"}},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"color":{"$ref":"#/components/schemas/ClassUpdateBase/properties/color"},"comment":{"$ref":"#/components/schemas/Lesson/properties/comment"},"testDefault":{"description":"Использовать по умолчанию для записи на пробные занятия для своего филиала","type":"boolean","example":false,"default":false},"priceForWidget":{"description":"Цена для виджета. Не заполняйте поле, если не хотите, чтобы виджет отображал цену.","type":"number","example":100,"minimum":0},"priceComment":{"description":"Напишите подробнее о стоимости, если это необходимо","type":"string"},"useDiscount":{"description":"Применять скидку клиента при записи/покупке абонемента","type":"boolean","default":true},"notify":{"description":"Оповещать клиентов","type":"boolean","default":true},"selectLessonsWidgets":{"description":"Выбор занятий при записи из виджетов/лич. кабинета","type":"boolean","default":true},"showInSite":{"type":"boolean","default":true,"description":"Отображать в виджетах"},"attributes":{"description":"Объект признаков группы","type":"array","items":{"type":"object","properties":{"id":{"description":"ID атрибута","type":"integer","format":"int32","minimum":0,"maximum":2147483647},"value":{"description":"Значение атрибута"}}}},"params":{"type":"object","description":"Параметры группы","properties":{"showInLK":{"type":"boolean","default":true,"description":"Отображать в лич. кабинете учеников"},"cancelInLK":{"type":"boolean","default":true,"description":"Отмена занятий из личного кабинета учеников"},"onlinePayment":{"description":"Настройка онлайн-оплаты","type":"object","properties":{"enabled":{"type":"boolean","description":"Разрешить онлайн-оплату из ЛК","default":true},"enabledFromWidgets":{"type":"boolean","description":"Разрешить онлайн-оплату из виджетов","default":false},"enabledFromPayLink":{"type":"boolean","description":"Разрешить онлайн-оплату по ссылке","default":false},"paymentForJoin":{"description":"Запись в новую группу/на занятие. **possibleWithoutPayment** - возможна без оплаты, **combined** - совмещена с переходом к оплате","type":"string","enum":["possibleWithoutPayment","combined"],"default":"possibleWithoutPayment"},"joinOnFailedPayment":{"description":"Создавать запись в группу при неуспешной оплате, только при paymentForJoin = combined","type":"boolean","default":false},"partialPaymentForNewJoin":{"description":"Частичная оплата при новой покупке возможна. Заполнять только если возможна","type":"boolean","default":false},"partialPaymentForNewJoinMin":{"description":"Не менее % от цены абонемента","type":"integer","format":"int32","maximum":100,"minimum":0,"default":60,"nullable":true}}},"lessonSettings":{"description":"Доступ к материалам занятий. **always** - открыто, **subExists** - при наличии абонемента","type":"object","properties":{"materialsVisibilityTimer":{"description":"Материалы доступны за, мин. до начала. Оставьте поле \"минут\" пустым, чтобы материалы были доступны в любое время.","type":"number","format":"int32","minimum":0,"nullable":true},"autoStatus":{"description":"Статус занятия \"Проведено\" ставится. **off** - Вручную сотрудником. **afterBegin** - Авто после начала. **afterEnd** - Авто после окончания","type":"string","enum":["off","afterBegin","afterEnd"],"default":"off"},"autoStatusTimer":{"description":"Минут. Обязательно при **autoStatus** не равным **off**","type":"number","format":"int32","maximum":1440,"minimum":0,"default":0,"nullable":true},"lessonVisibility":{"description":"Видимость занятий в ЛК и виджетах. **off** - Не видит. **beforeBegin** - Видит всегда/Видит за минут до начала. **exactTime** - Видит в указанное время","type":"string","enum":["off","beforeBegin","exactTime"],"default":"beforeBegin"},"lessonVisibilityTimer":{"description":"Минуты при lessonVisibility = **beforeBegin**. За дней до дня занятия при lessonVisibility = **exactTime**","type":"number","format":"int32","minimum":0,"default":0,"nullable":true},"lessonVisibilityTime":{"description":"Точное время видимости занятий в ЛК и виджетах. Обязательное при lessonVisibility = **exactTime**","type":"string","pattern":"^([01]\\\\d|2[0-3]):([0-5]\\\\d)$","example":"09:00","nullable":true}}},"widgetsTeacherIds":{"description":"Ведущий группы в виджетах/ЛК Поле служит для указания ведущих в виджетах.","type":"array","items":{"type":"number","format":"int32"}}}}}},"ClassCreateCourse":{"description":"Курс/Групповые занятия","title":"Курс/Групповые занятия","allOf":[{"type":"object","properties":{"courseType":{"description":"Вид обучения. **0** - Курс/Групповые занятия, **1** - Мастер-класс/урок, **2** - Индивидуальное обучение","type":"number","enum":[0]},"showDates":{"description":"Указывать дату и время","type":"boolean","example":false,"default":false},"beginDate":{"type":"string","description":"Обязательно при showDates = true. Дата начала занятий должна быть в формате DD.MM.YYYY HH:mm. Пример 19.12.2024 06:55","example":"19.12.2024 06:55","pattern":"^(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[0-2])\\.(\\d{4})\\s(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$"},"courseId":{"description":"ID программы","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647}}},{"$ref":"#/components/schemas/ClassCreateBase"}],"required":["courseType","filialId","courseId"],"oneOf":[{"allOf":[{"$ref":"#/components/schemas/ClassTypeOne"},{"required":["payType"]}]},{"allOf":[{"$ref":"#/components/schemas/ClassTypeTwo"},{"required":["payType","price"]}]}]},"ClassCreateMaster":{"description":"Мастер-класс/урок","title":"Мастер-класс/урок","allOf":[{"type":"object","properties":{"courseType":{"description":"Вид обучения. **0** - Курс/Групповые занятия, **1** - Мастер-класс/урок, **2** - Индивидуальное обучение","type":"number","enum":[1]},"showDates":{"description":"Указывать дату и время","type":"boolean","example":false,"default":false},"beginDate":{"type":"string","description":"Обязательно при showDates = true. Дата начала занятий должна быть в формате DD.MM.YYYY HH:mm.","example":"19.12.2024 06:55","pattern":"^(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[0-2])\\.(\\d{4})\\s(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$"},"tmEnd":{"description":"Обязательно при showDates = true. Время конца","type":"string","pattern":"^([0-1]\\d|2[0-3])(:[0-5]\\d)$","example":"09:00"},"roomId":{"description":"Обязательно при showDates = true. ID Аудитории/Зала","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647},"courseId":{"description":"ID Мастер-класса/урока","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647}}},{"$ref":"#/components/schemas/ClassCreateBase"}],"required":["courseType","filialId","courseId"],"oneOf":[{"allOf":[{"$ref":"#/components/schemas/ClassTypeOne"},{"required":["payType"]}]},{"allOf":[{"$ref":"#/components/schemas/ClassTypeTwo"},{"required":["payType","price"]}]}]},"ClassCreateIndv":{"description":"Индивидуальное обучение","title":"Индивидуальное обучение","allOf":[{"type":"object","description":"Индивидуальное обучение","title":"Индивидуальное обучение","properties":{"courseType":{"description":"Вид обучения. **0** - Курс/Групповые занятия, **1** - Мастер-класс/урок, **2** - Индивидуальное обучение","type":"number","enum":[2]},"params":{"type":"object","description":"Параметры группы","properties":{"lessonDurations":{"description":"Длительность занятия при записи из лк/виджетов","nullable":true,"type":"array","items":{"type":"number","minimum":5,"multipleOf":0.01}}}}},"required":["courseType","filialId","name"]},{"$ref":"#/components/schemas/ClassCreateBase"},{"allOf":[{"type":"object","properties":{"payType":{"description":"Форма оплаты. **1** - за занятия/абонемент"}}},{"$ref":"#/components/schemas/ClassTypeOne"},{"required":["payType"]}]}]},"ClassUpdateBase":{"type":"object","properties":{"name":{"$ref":"#/components/schemas/ClassCreateBase/properties/name"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"maxStudents":{"description":"Максимальное количество студентов в группе. Если у вас ограничено кол-во мест на самих занятиях, укажите это при создании самих занятий. Кол-во мест в группе при этом можете оставить не заполненным.","type":"integer","format":"int32","nullable":true,"example":15,"minimum":0,"maximum":2147483647},"teacherIds":{"description":"Устаревшее поле. Вместо него следует использовать `managerIds`.\nЕсли указано поле `managerIds`, оно будет использоваться, а `teacherIds` — игнорироваться.\n","type":"array","items":{"type":"number","format":"int32"},"deprecated":true},"managerIds":{"description":"Ведущий группы. Это общая информация о ведущих группы. Назначение ведущих самих занятий осуществляется при редактировании занятий.","type":"array","items":{"type":"number","format":"int32"}},"color":{"description":"Цвет","type":"string","pattern":"^#[A-Fa-f0-9]{6}$","maxLength":10,"example":"#ff33f5"},"comment":{"$ref":"#/components/schemas/Lesson/properties/comment"},"testDefault":{"description":"Использовать по умолчанию для записи на пробные занятия для своего филиала","type":"boolean","example":false},"priceForWidget":{"description":"Цена для виджета. Не заполняйте поле, если не хотите, чтобы виджет отображал цену.","type":"number","example":100,"minimum":0},"priceComment":{"description":"Напишите подробнее о стоимости, если это необходимо","type":"string"},"useDiscount":{"description":"Применять скидку клиента при записи/покупке абонемента","type":"boolean"},"notify":{"description":"Оповещать клиентов","type":"boolean"},"selectLessonsWidgets":{"description":"Выбор занятий при записи из виджетов/лич. кабинета","type":"boolean"},"showInSite":{"type":"boolean","description":"Отображать в виджетах"},"params":{"type":"object","description":"Параметры группы","properties":{"showInLK":{"type":"boolean","description":"Отображать в лич. кабинете учеников"},"cancelInLK":{"type":"boolean","description":"Отмена занятий из личного кабинета учеников"},"onlinePayment":{"description":"Настройка онлайн-оплаты","type":"object","properties":{"enabled":{"type":"boolean","description":"Разрешить онлайн-оплату из ЛК"},"enabledFromWidgets":{"type":"boolean","description":"Разрешить онлайн-оплату из виджетов"},"enabledFromPayLink":{"type":"boolean","description":"Разрешить онлайн-оплату по ссылке"},"paymentForJoin":{"description":"Запись в новую группу/на занятие. **possibleWithoutPayment** - возможна без оплаты, **combined** - совмещена с переходом к оплате","type":"string","enum":["possibleWithoutPayment","combined"]},"joinOnFailedPayment":{"description":"Создавать запись в группу при неуспешной оплате, только при paymentForJoin = combined","type":"boolean"},"partialPaymentForNewJoin":{"description":"Частичная оплата при новой покупке возможна. Заполнять только если возможна","type":"boolean"},"partialPaymentForNewJoinMin":{"description":"Не менее % от цены абонемента","type":"integer","format":"int32","maximum":100,"minimum":0,"nullable":true}}},"lessonSettings":{"description":"Доступ к материалам занятий. **always** - открыто, **subExists** - при наличии абонемента","type":"object","properties":{"materialsVisibilityTimer":{"description":"Материалы доступны за, мин. до начала. Оставьте поле \"минут\" пустым, чтобы материалы были доступны в любое время.","type":"number","format":"int32","minimum":0,"nullable":true},"autoStatus":{"description":"Статус занятия \"Проведено\" ставится. **off** - Вручную сотрудником. **afterBegin** - Авто после начала. **afterEnd** - Авто после окончания","type":"string","enum":["off","afterBegin","afterEnd"]},"autoStatusTimer":{"description":"Минут. Обязательно при **autoStatus** не равным **off**","type":"number","format":"int32","maximum":1440,"minimum":0,"nullable":true},"lessonVisibility":{"description":"Видимость занятий в ЛК и виджетах. **off** - Не видит. **beforeBegin** - Видит всегда/Видит за минут до начала. **exactTime** - Видит в указанное время","type":"string","enum":["off","beforeBegin","exactTime"]},"lessonVisibilityTimer":{"description":"Минуты при lessonVisibility = **beforeBegin**. За дней до дня занятия при lessonVisibility = **exactTime**","type":"number","format":"int32","minimum":0,"nullable":true},"lessonVisibilityTime":{"description":"Точное время видимости занятий в ЛК и виджетах. Обязательное при lessonVisibility = **exactTime**","type":"string","pattern":"^([01]\\\\d|2[0-3]):([0-5]\\\\d)$","example":"09:00","nullable":true}}},"widgetsTeacherIds":{"description":"Ведущий группы в виджетах/ЛК Поле служит для указания ведущих в виджетах.","type":"array","items":{"type":"number","format":"int32"}}}}}},"ClassUpdateCourse":{"description":"Курс/Групповые занятия","title":"Курс/Групповые занятия","allOf":[{"type":"object","properties":{"showDates":{"description":"Указывать дату и время","type":"boolean","example":false,"default":false},"beginDate":{"type":"string","description":"Обязательно при showDates = true. Дата начала занятий должна быть в формате DD.MM.YYYY HH:mm.","example":"19.12.2024 06:55","pattern":"^(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[0-2])\\.(\\d{4})\\s(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$"},"courseId":{"description":"ID программы","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647}}},{"$ref":"#/components/schemas/ClassUpdateBase"},{"type":"object","properties":{"payType":{"readOnly":true}}}],"oneOf":[{"$ref":"#/components/schemas/ClassTypeOne"},{"$ref":"#/components/schemas/ClassTypeTwo"}]},"ClassUpdateMaster":{"description":"Мастер-класс/урок","title":"Мастер-класс/урок","allOf":[{"type":"object","properties":{"showDates":{"description":"Указывать дату и время","type":"boolean","example":false,"default":false},"beginDate":{"type":"string","description":"Обязательно при showDates = true. Дата начала занятий должна быть в формате DD.MM.YYYY HH:mm","example":"19.12.2024 06:55","pattern":"^(0[1-9]|[12][0-9]|3[01])\\.(0[1-9]|1[0-2])\\.(\\d{4})\\s(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$"},"courseId":{"description":"ID Мастер-класса/урока","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647}}},{"$ref":"#/components/schemas/ClassUpdateBase"},{"type":"object","properties":{"payType":{"readOnly":true}}}],"oneOf":[{"$ref":"#/components/schemas/ClassTypeOne"},{"$ref":"#/components/schemas/ClassTypeTwo"}]},"ClassUpdateIndv":{"description":"Индивидуальное обучение","title":"Индивидуальное обучение","allOf":[{"type":"object","description":"Индивидуальное обучение","title":"Индивидуальное обучение","properties":{"params":{"type":"object","description":"Параметры группы","properties":{"lessonDurations":{"description":"Длительность занятия при записи из лк/виджетов","nullable":true,"type":"array","items":{"type":"number","minimum":5,"multipleOf":0.01}}}}}},{"$ref":"#/components/schemas/ClassUpdateBase"},{"$ref":"#/components/schemas/ClassTypeOne"},{"type":"object","properties":{"payType":{"readOnly":true,"description":"Форма оплаты. **1** - за занятия/абонемент"}}}]},"UserClass":{"description":"Группа","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true},"name":{"description":"Название","type":"string","maxLength":200,"nullable":true,"example":"Группа по выходным"},"beginDate":{"description":"Старт занятий","type":"string","format":"date-time","nullable":true,"example":"2019-06-10T15:00:00.000Z"},"status":{"description":"Текущее состояние группы. **opened** - набор открыт, **closed** - набор закрыт, **archive** - группа в архиве","type":"string","enum":["opened","closed","archive"],"example":"opened"},"courseId":{"description":"ID программы","type":"integer","format":"int64","example":100},"payType":{"description":"Способ оплаты за обучение. **full** - разово, **lessons** - за занятия","type":"string","enum":["full","lessons"],"example":"full"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"payPass":{"description":"Списывать посещения из абонемента за пропуски без уваж. причины","type":"boolean","example":true},"price":{"description":"Цена","type":"number","format":"double","nullable":true,"example":1000},"showDates":{"description":"Отобажение даты начала у названия группы","type":"boolean","default":true,"example":false},"allowRecords":{"description":"Разрешать запись на занятия при записи в группу","type":"boolean"},"allowCancelRecords":{"description":"Разрешать отмену записей на занятия","type":"boolean"},"color":{"description":"Цвет группы","type":"string","nullable":true,"maxLength":10,"example":"#ff33f5"},"freeRecords":{"description":"Количество свободных мест","type":"integer","format":"int32","nullable":true,"example":10,"minimum":0,"maximum":2147483647}},"required":["id","showDates","payPass","filialId","courseId","payType","status"]},"BusyTime":{"description":"Нерабочее время","type":"object","properties":{"id":{"description":"ID","type":"integer","format":"int32","readOnly":true,"example":1,"minimum":0,"maximum":2147483647},"teacherId":{"type":"integer","format":"int32","description":"ID преподавателя","example":1,"minimum":0,"maximum":2147483647},"filialIds":{"description":"ID филиалов","type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647},"example":[2,3]},"roomId":{"description":"ID аудитории","type":"integer","format":"int32","example":100,"minimum":0,"maximum":2147483647},"beginTime":{"description":"Время начала","type":"string","pattern":"^([0-1]\\d|2[0-3])(:[0-5]\\d)$","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"^([0-1]\\d|2[0-3])(:[0-5]\\d)$","example":"09:40"},"date":{"description":"Дата","type":"string","format":"date","example":"2025-01-16"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"}}},"BusyTimes":{"title":"Список нерабочего времени","type":"object","properties":{"busyTimes":{"$ref":"#/components/schemas/BusyTime"},"stats":{"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","format":"int32","example":5,"minimum":0,"maximum":2147483647}}}}},"Lesson":{"description":"Занятие","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"roomId":{"description":"ID аудитории","type":"integer","format":"int64","example":100},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"status":{"description":"Статус занятия. 1 - Проведено, 0 - Не проведено","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647},"comment":{"description":"Комментарий","type":"string","nullable":true},"maxStudents":{"description":"Максимальное количество учеников на занятии","type":"integer","format":"int32","nullable":true,"example":10,"minimum":0,"maximum":2147483647},"topic":{"description":"Тема занятия","type":"string","nullable":true,"example":"Планеты солнечной системы."},"description":{"description":"Описание занятия","type":"string","nullable":true,"example":"На этом занятии узнаем, сколько планет в солнечной системе и как появилась луна."},"teacherIds":{"description":"Преподаватели","type":"array","items":{"type":"integer","format":"int64"}},"records":{"description":"Записи на занятие","type":"array","items":{"$ref":"#/components/schemas/LessonRecordExtended"}},"homeTask":{"$ref":"#/components/schemas/HomeTask"},"lessonTask":{"$ref":"#/components/schemas/LessonTask"},"marks":{"description":"Оценки за занятие","type":"array","items":{"$ref":"#/components/schemas/Mark"}},"answers":{"description":"Ответы на задание","type":"array","items":{"$ref":"#/components/schemas/ShortTaskAnswer"}}},"required":["id","classId","roomId","status","date","beginTime","endTime","filialId"]},"LessonSettings":{"description":"Настройки занятия","properties":{"autoStatus":{"description":"Статус занятия «Проведено» ставится автоматически\n\n  * `off` – Отключено\n\n  * `afterBegin` – После начала занятия\n\n  * `afterEnd` – После окончания занятия\n","enum":["off","afterBegin","afterEnd"],"type":"string","default":"off"},"autoStatusTimer":{"description":"Статус автоматически ставится за n минут до начала\\окончания занятия","type":"integer","minimum":0,"maximum":1440,"default":0},"lessonVisibility":{"description":"Видимость занятия в ЛК и виджетах\n\n  * `off` – Не видно\n\n  * `always` – Видно всегда\n\n  * `beforeBegin` – Станет видимым за n минут до начала (регулируется параметром lessonVisibilityTimer)\n\n  * `exactTime` – Станет видимым за n дней до занятия (регулируется параметром lessonVisibilityTimer) в указанное время (регулируется параметром lessonVisibilityTime)\n","type":"string","enum":["off","always","beforeBegin","exactTime"],"default":"always"},"lessonVisibilityTimer":{"description":"Видимость занятия за n минут/дней до начала","type":"integer","minimum":0,"default":0},"lessonVisibilityTime":{"description":"Время, в которое занятие станет видимым при lessonVisibility=exactTime","type":"string","pattern":"\\d\\d:\\d\\d","example":1005,"nullable":true},"materialsVisibilityTimer":{"description":"Доступ к материалам задания откроется за n минут до начала","type":"integer","minimum":0,"nullable":true},"webinarAccess":{"description":"Доступ к вебинару\n\n  * `always` – Открыт\n\n  * `subExists` – При наличи абонемента\n\n  * `invoiceFullPay` – Если счет оплачен полностью\n\n  * `invoiceHalfPay` – Если счет оплачен частично\n","type":"string","enum":["always","subExists","invoiceFullPay","invoiceHalfPay"],"default":"subExists"},"videoAccess":{"description":"Доступ к видео\n\n  * `always` – Открыт\n\n  * `subExists` – При наличи абонемента\n\n  * `invoiceFullPay` – Если счет оплачен полностью\n\n  * `invoiceHalfPay` – Если счет оплачен частично\n","type":"string","enum":["always","subExists","invoiceFullPay","invoiceHalfPay"],"default":"subExists"},"lessonTaskAccess":{"description":"Доступ к заданию на урок\n\n  * `always` – Открыт\n\n  * `subExists` – При наличи абонемента\n\n  * `invoiceFullPay` – Если счет оплачен полностью\n\n  * `invoiceHalfPay` – Если счет оплачен частично\n","type":"string","enum":["always","subExists","invoiceFullPay","invoiceHalfPay"],"default":"subExists"},"homeTaskAccess":{"description":"Доступ к домашнему заданию\n\n  * `always` – Открыт\n\n  * `subExists` – При наличи абонемента\n\n  * `invoiceFullPay` – Если счет оплачен полностью\n\n  * `invoiceHalfPay` – Если счет оплачен частично\n","type":"string","enum":["always","subExists","invoiceFullPay","invoiceHalfPay"],"default":"subExists"}}},"Lessons":{"title":"Список занятий","properties":{"lessons":{"type":"array","items":{"$ref":"#/components/schemas/Lesson"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"UserIndividualLesson":{"description":"Свободное время для записи на индивидуальное занятие","properties":{"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"teacherIds":{"description":"Массив ID преподавателей для записи","type":"array","items":{"type":"integer","format":"int64"}}}},"LessonRecords":{"title":"Список записей","properties":{"lessonRecords":{"type":"array","items":{"$ref":"#/components/schemas/LessonRecordExtended"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"UserLesson":{"description":"Занятие","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"roomId":{"description":"ID аудитории","type":"integer","format":"int64","example":100},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"status":{"description":"Статус занятия. 1 - Проведено, 0 - Не проведено","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647},"freeRecords":{"description":"Количество свободных мест","type":"integer","format":"int32","nullable":true,"example":10,"minimum":0,"maximum":2147483647},"topic":{"description":"Тема занятия","type":"string","nullable":true,"example":"Планеты солнечной системы."},"description":{"description":"Описание занятия","type":"string","nullable":true,"example":"На этом занятии узнаем, сколько планет в солнечной системе и как появилась луна."},"teacherIds":{"description":"Преподаватели","type":"array","items":{"type":"integer","format":"int64"}},"records":{"description":"Записи на занятие","type":"array","items":{"$ref":"#/components/schemas/UserLessonRecord"}},"homeTask":{"oneOf":[{"$ref":"#/components/schemas/HomeTask"},{"$ref":"#/components/schemas/RestrictError"}]},"lessonTask":{"oneOf":[{"$ref":"#/components/schemas/LessonTask"},{"$ref":"#/components/schemas/RestrictError"}]},"comments":{"description":"Комментарии к занятию","type":"array","items":{"$ref":"#/components/schemas/UserComment"}},"marks":{"description":"Оценки за занятие","type":"array","items":{"$ref":"#/components/schemas/Mark"}},"answers":{"description":"Ответы на задание","readOnly":true,"type":"array","items":{"$ref":"#/components/schemas/ShortTaskAnswer"}},"params":{"description":"Доп информация о занятии","type":"object","properties":{"videos":{"description":"Видео к занятию","oneOf":[{"title":"Ссылка на видео","type":"object","properties":{"value":{"type":"string","title":"Ссылка"}}},{"$ref":"#/components/schemas/RestrictError"}]},"webinars":{"description":"Вебинар","oneOf":[{"title":"Ссылка на вебинар","type":"object","properties":{"value":{"type":"string","title":"Ссылка"}}},{"$ref":"#/components/schemas/RestrictError"}]}}}},"required":["id","classId","roomId","status","date","beginTime","endTime","filialId"]},"LessonPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5},"records":{"description":"Количество записей ученика scopeUserId в общем результате","type":"integer"},"visits":{"description":"Количество посещений ученика scopeUserId в общем результате","type":"integer"},"freeVisits":{"description":"Количество бесплатных посещений ученика scopeUserId в общем результате","type":"integer"},"lessonsLost":{"description":"Количество пропусков ученика scopeUserId в общем результате","type":"integer"},"goodReasons":{"description":"Количество пропусков с уважительной причиной ученика scopeUserId в общем результате","type":"integer"},"nonPayedLessons":{"description":"Количество посещений в долг ученика scopeUserId в общем результате","type":"integer"},"marksAvg":{"description":"Средняя оценка ученика scopeUserId в общем результате","type":"number"},"homeMarksAvg":{"description":"Средняя оценка за д/з ученика scopeUserId в общем результате","type":"number"},"lessonMarksAvg":{"description":"Средняя оценка за занятие ученика scopeUserId в общем результате","type":"number"}}},"UserLessons":{"title":"Список занятий","properties":{"lessons":{"type":"array","items":{"$ref":"#/components/schemas/UserLesson"}},"stats":{"$ref":"#/components/schemas/LessonPaging"}}},"UserIndividualLessons":{"title":"Список свободных слотов для записи на индивидуальные занятия","properties":{"individualLessons":{"type":"array","items":{"$ref":"#/components/schemas/UserIndividualLesson"}}}},"LessonRecordsPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5}}},"UserLessonRecords":{"title":"Список записей на занятия","properties":{"lessonRecords":{"type":"array","items":{"$ref":"#/components/schemas/UserLessonRecord"}},"stats":{"$ref":"#/components/schemas/LessonRecordsPaging"}}},"PaymentsPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5},"totalSum":{"description":"Общая сумма без учета limit","type":"number"},"totalIncome":{"description":"Общий приход без учета limit","type":"number"},"totalRefund":{"description":"Общий возврат без учета limit","type":"number"},"totalDebit":{"description":"Общая сумма списаний без учета limit","type":"number"}}},"BonusPaymentsPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5}}},"UserPaymentExtendedEdit":{"description":"Платеж","properties":{"date":{"description":"Дата платежа","type":"string","format":"date","example":"2019-06-14"},"summa":{"description":"Сумма","type":"number","format":"double","example":1990},"paymentTypeId":{"type":"number","description":"Id типа оплаты"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"cashboxId":{"description":"ID кассы","type":"integer","format":"int64","nullable":true,"example":777},"comment":{"$ref":"#/components/schemas/Lesson/properties/comment"}},"required":["date","summa","paymentTypeId"]},"UserPaymentExtended":{"description":"Платеж","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"date":{"description":"Дата платежа","type":"string","format":"date","example":"2019-06-14"},"summa":{"description":"Сумма","type":"number","format":"double","example":1990},"userSubscriptionId":{"description":"ID абонемента","type":"integer","format":"int64","example":1504,"nullable":true},"optype":{"description":"Тип операции. income - приход, debit - списание, refund - возврат","type":"string","enum":["income","debit","refund"]},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"comment":{"$ref":"#/components/schemas/Lesson/properties/comment"}},"discriminator":{"propertyName":"optype","mapping":{"income":"#/components/schemas/IncomePayment","debit":"#/components/schemas/DebitPayment","refund":"#/components/schemas/RefundPayment"}},"required":["date","summa","optype","userId"]},"IncomePayment":{"description":"Приход","allOf":[{"$ref":"#/components/schemas/UserPaymentExtended"},{"type":"object","properties":{"managerId":{"description":"ID сотрудника, который принял платеж","type":"integer","format":"int64","nullable":true},"paymentTypeId":{"type":"number","description":"Id типа оплаты"},"cashboxId":{"$ref":"#/components/schemas/UserPaymentExtendedEdit/properties/cashboxId"}},"required":["paymentTypeId"]}]},"DebitPayment":{"description":"Списание","allOf":[{"$ref":"#/components/schemas/UserPaymentExtended"},{"type":"object","properties":{"invoiceId":{"type":"number","description":"Id счета для списания"},"invoice":{"$ref":"#/components/schemas/UserInvoice","readOnly":true}}}],"required":["invoiceId"]},"RefundPayment":{"description":"Возврат","allOf":[{"$ref":"#/components/schemas/UserPaymentExtended"},{"type":"object","properties":{"paymentTypeId":{"type":"number","description":"Id типа оплаты"},"managerId":{"description":"ID сотрудника, который сделал возврат","type":"integer","format":"int64","nullable":true},"cashboxId":{"$ref":"#/components/schemas/UserPaymentExtendedEdit/properties/cashboxId"}},"required":["paymentTypeId"]}]},"UserPayment":{"description":"Платеж","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"date":{"description":"Дата платежа","type":"string","format":"date","example":"2019-06-14"},"summa":{"description":"Сумма","type":"number","format":"double","example":1990},"userSubscriptionId":{"description":"ID абонемента","readOnly":true,"deprecated":true,"type":"integer","format":"int64","example":1504,"nullable":true},"optype":{"description":"Тип операции. income - приход, debit - списание, refund - возврат","type":"string","enum":["income","debit","refund"]},"invoice":{"$ref":"#/components/schemas/UserInvoice","readOnly":true}},"required":["id","date","summa","optype","userId"]},"UserPayments":{"title":"Список платежей","properties":{"payments":{"type":"array","items":{"$ref":"#/components/schemas/UserPayment"}},"stats":{"$ref":"#/components/schemas/PaymentsPaging"}}},"UserPaymentsExtended":{"title":"Список платежей","properties":{"payments":{"type":"array","items":{"$ref":"#/components/schemas/UserPaymentExtended"}},"stats":{"$ref":"#/components/schemas/PaymentsPaging"}}},"UserBonusPayment":{"description":"Платеж","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"date":{"description":"Дата платежа","type":"string","format":"date","example":"2019-06-14"},"summa":{"description":"Сумма бонусов","type":"number","format":"double","example":1990},"remindSumma":{"description":"Потраченная сумма бонусов","type":"number","format":"double","example":0},"userSubscriptionId":{"description":"ID абонемента","readOnly":true,"deprecated":true,"type":"integer","format":"int64","example":1504,"nullable":true},"optype":{"description":"Тип операции. income - начисление, debit - списание, burn - сгорание","type":"string","enum":["income","debit","burn"]},"invoiceId":{"type":"number","description":"Id счета для списания"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"comment":{"$ref":"#/components/schemas/Lesson/properties/comment"},"reason":{"description":"Причина операции. purchase - Покупка, manual - Ручная операция, auto - Автоматическая","type":"string","enum":["purchase","manual","auto"]},"bpLevelId":{"description":"ID уровня БП","readOnly":true},"classUserId":{"description":"ID записи в группу","type":"integer"},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"saleId":{"description":"ID продажи товара","type":"integer"}},"required":["id","date","summa","optype","userId"]},"UserBonusPayments":{"title":"Список бонусных платежей","properties":{"payments":{"type":"array","items":{"$ref":"#/components/schemas/UserBonusPayment"}},"stats":{"$ref":"#/components/schemas/BonusPaymentsPaging"}}},"BonusPaymentChange":{"title":"Объект списания/начисления бонусов","properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"optype":{"description":"Тип операции. income - начисление, debit - списание","type":"string","enum":["income","debit"]},"summa":{"description":"Сумма бонусов","type":"number","format":"double","example":1990,"minimum":1},"comment":{"description":"Комментарий к операции","type":"string"},"managerId":{"$ref":"#/components/schemas/Contract/properties/managerId"}},"required":["summa","optype","managerId","userId"]},"UserInvoice":{"title":"Счет, выставляемый клиенту","readOnly":true,"properties":{"id":{"description":"ID счета","type":"integer","format":"int32","minimum":0,"maximum":2147483647},"userId":{"description":"ID ученика","type":"integer","format":"int32","minimum":0,"maximum":2147483647},"date":{"description":"Дата счета","type":"string","format":"date"},"createdAt":{"description":"Дата создания счета","type":"string","format":"date"},"price":{"description":"Сумма счета","type":"number","format":"float"},"nextSum":{"description":"Сумма следующего платежа","type":"number","format":"float"},"payUntil":{"description":"Срок оплаты счета","type":"string","format":"date"},"joinId":{"description":"ID записи в группу с формой оплаты \"Единой суммой\"","type":"integer","format":"int32","nullable":true,"minimum":0,"maximum":2147483647},"userSubscriptionId":{"description":"ID абонемента","type":"integer","format":"int32","nullable":true,"minimum":0,"maximum":2147483647},"payed":{"description":"Оплачено по счету","type":"number","format":"float","default":0},"payedBonuses":{"description":"Оплачено по счету бонусами","type":"number","format":"float","default":0},"comment":{"description":"Комментарий","nullable":true,"type":"string"}},"required":["id","userId","date","createdAt","price","payUntil","payed"]},"UserInvoiceEdit":{"title":"Счет, выставляемый клиенту","properties":{"payUntil":{"description":"Срок оплаты счета","type":"string","format":"date"},"comment":{"description":"Комментарий","nullable":true,"type":"string"}},"required":["payUntil"]},"UserInvoices":{"title":"Счета","properties":{"invoices":{"type":"array","items":{"$ref":"#/components/schemas/UserInvoice"}},"stats":{"$ref":"#/components/schemas/InvoicePaging"}}},"InvoicePaging":{"required":["totalItems","totalPrice","totalPayed"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5},"totalPrice":{"description":"Сумма выставленных счетов","type":"number","format":"float"},"totalPayed":{"description":"Оплаченная сумма","type":"number","format":"float"}}},"BillsPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5},"totalDebt":{"description":"Общее количество занятий в долг","type":"number"},"totalBilled":{"description":"Общая сумма списаний","type":"number"}}},"UserBill":{"readOnly":true,"description":"Списание","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"date":{"description":"Дата списания","type":"string","format":"date","example":"2019-06-14"},"summa":{"description":"Сумма","type":"number","format":"double","nullable":true,"example":1990},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lessonsCount":{"description":"Количество списанных из абонемента занятий","type":"integer","format":"int64","example":1,"nullable":true},"lessonRecordId":{"description":"ID записи на занятие, за которое произошло списание","type":"integer","format":"int64","nullable":true},"lessonRecord":{"$ref":"#/components/schemas/UserLessonRecordLimited"},"lessonId":{"description":"ID занятия, за которое произошло списание","type":"integer","format":"int64","nullable":true},"classId":{"description":"ID группы, за которое произошло списание","type":"integer","format":"int64","nullable":true},"userSubscriptionId":{"description":"ID абонемента","type":"integer","format":"int64","example":1504,"nullable":true}},"required":["id","date"]},"UserBills":{"title":"Списания","properties":{"bills":{"type":"array","items":{"$ref":"#/components/schemas/UserBill"}},"stats":{"$ref":"#/components/schemas/BillsPaging"}}},"UserUserSubscription":{"description":"Абонемент","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"externalId":{"description":"Пользовательский номер абонемента","type":"string","example":"ЛТ-2305","nullable":true},"sellDate":{"description":"Дата продажи","type":"string","format":"date","example":"2019-06-14"},"beginDate":{"description":"Дата начала действия","type":"string","format":"date","example":"2019-06-14","nullable":true},"endDate":{"description":"Дата окончания действия","type":"string","format":"date","example":"2019-06-14","nullable":true},"price":{"description":"Стоимость","type":"number","format":"double","example":1990},"payed":{"description":"Оплаченная сумма","type":"number","format":"double","example":990},"userId":{"description":"ID ученика","type":"integer","format":"int64"},"statTotalPayed":{"description":"Оплаченная сумма","type":"number","format":"double"},"statTotalBilled":{"description":"Списанная сумма","type":"number","format":"double"},"statTotalBurned":{"description":"Сгорело занятий","type":"integer","format":"int64"},"statTotalVisits":{"description":"Проведено занятий по абонементу","type":"integer","format":"int64"},"remindDate":{"description":"Срок оплаты долга","type":"string","format":"date","example":"2019-06-14","nullable":true,"deprecated":true},"remindSumm":{"description":"Сумма долга к оплате","type":"number","format":"double","example":500,"nullable":true,"deprecated":true},"classIds":{"description":"Группы, в которых действует абонемент","type":"array","items":{"type":"integer","format":"int64"},"nullable":true},"courseIds":{"description":"Программы, в которых действует абонемент","type":"array","items":{"type":"integer","format":"int64"},"nullable":true},"freezeFrom":{"description":"Дата начала заморозки","type":"string","format":"date","example":"2019-06-14","nullable":true},"freezeTo":{"description":"Дата окончания заморозки","type":"string","format":"date","example":"2019-06-14","nullable":true},"visitCount":{"description":"Количество занятий в абонементе","type":"integer","format":"int64","example":1,"nullable":true,"minimum":0,"maximum":365},"visitedCount":{"description":"Количество списанных занятий в абонементе.","type":"integer","format":"int64","nullable":true},"subscriptionId":{"description":"ID вида абонемента","type":"integer","format":"int64","example":12},"mainClassId":{"description":"Основная группа, к которой привязан абонемент","type":"integer","format":"int64"},"statusId":{"description":"Статус абонемента:\n* `1` - Не активный\n* `2` - Активный\n* `3` - Заморожен\n* `4` - Окончен\n","type":"integer","format":"int64"},"invoices":{"type":"array","items":{"$ref":"#/components/schemas/UserInvoice"}}},"required":["id","sellDate","userId","price"]},"UserUserSubscriptions":{"title":"Абонементы","properties":{"subscriptions":{"type":"array","items":{"$ref":"#/components/schemas/UserUserSubscription"}},"stats":{"$ref":"#/components/schemas/UserSubscriptionsPaging"}}},"UserSubscriptionsPaging":{"required":["totalItems"],"properties":{"totalItems":{"description":"Общее количество строк в результате, без учета limit и offset","type":"integer","example":5},"totalDebt":{"description":"Общий долг по абонементам","type":"number"},"totalBilled":{"description":"Общая сумма списаний из абонементов","type":"number"},"totalPrice":{"description":"Общая стоимость всех абонементов","type":"number"}}},"LessonRecordLesson":{"title":"Занятие","description":"Данные о занятии (доступно только при includeLessons = true)","nullable":true,"properties":{"id":{"description":"ID занятия","type":"integer","format":"int64","readOnly":true,"example":4},"date":{"description":"Дата занятия","type":"string","format":"date","readOnly":true,"example":"2019-06-14"},"beginTime":{"description":"Время начала занятия","type":"string","format":"time","readOnly":true,"example":"09:00"},"endTime":{"description":"Время окончания занятия","type":"string","format":"time","readOnly":true,"example":"10:00"},"createdAt":{"description":"Дата создания записи","type":"string","format":"date-time","readOnly":true,"example":"2019-06-14T09:00:00.000Z"},"filialId":{"description":"ID филиала","type":"integer","format":"int64","readOnly":true,"example":1},"roomId":{"description":"ID зала","type":"integer","format":"int64","readOnly":true,"example":1},"classId":{"description":"ID группы","type":"integer","format":"int64","readOnly":true,"example":1},"status":{"description":"Статус занятия. 1 - Проведено, 0 - Не проведено","type":"integer","format":"int64","readOnly":true,"example":1},"comment":{"description":"Комментарий","type":"string","readOnly":true,"example":"Комментарий"},"topic":{"description":"Тема занятия","type":"string","readOnly":true,"example":"Тема занятия"},"description":{"description":"Описание занятия","type":"string","readOnly":true,"example":"Описание занятия"},"maxStudents":{"description":"Максимальное количество учеников","type":"integer","format":"int64","readOnly":true,"example":30}}},"LessonRecord":{"title":"Запись на занятие","properties":{"id":{"description":"ID записи на занятие","type":"integer","format":"int64","readOnly":true,"example":4},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lessonId":{"description":"ID занятия","type":"integer","format":"int64","example":300},"lesson":{"allOf":[{"readOnly":true},{"$ref":"#/components/schemas/LessonRecordLesson"}]},"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true},"visit":{"description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","default":false,"type":"boolean","example":false},"goodReason":{"description":"Уважительная причина отсутствия (true - есть уважительная причина, false - нет)","default":false,"type":"boolean","example":false},"test":{"description":"Пробная запись на занятие","default":false,"type":"boolean","example":false},"skip":{"description":"Не учитывать запись в количестве занятых мест","default":false,"type":"boolean","readOnly":true},"paid":{"description":"Платное занятие","default":true,"type":"boolean","readOnly":true},"bill":{"$ref":"#/components/schemas/UserBill"},"userSubscription":{"$ref":"#/components/schemas/UserSubscription"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"},"missedLessonRecordId":{"description":"Id записи на пропущенное занятие (для отработки)","type":"number"}},"required":["userId","lessonId"]},"UserLessonRecord":{"title":"Запись на занятие","properties":{"id":{"description":"ID записи на занятие","type":"integer","format":"int64","readOnly":true,"example":4},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lessonId":{"$ref":"#/components/schemas/LessonRecord/properties/lessonId"},"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true,"readOnly":true},"visit":{"description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","default":false,"type":"boolean","example":false,"readOnly":true},"goodReason":{"description":"Уважительная причина отсутствия (true - есть уважительная причина, false - нет)","default":false,"type":"boolean","example":false,"readOnly":true},"test":{"description":"Пробная запись на занятие","default":false,"type":"boolean","readOnly":true},"skip":{"description":"Не учитывать запись в количестве занятых мест","default":false,"type":"boolean","readOnly":true},"paid":{"description":"Платное занятие","default":true,"type":"boolean","readOnly":true},"bill":{"description":"Списание за посещение","$ref":"#/components/schemas/UserBill"},"missedLessonRecordId":{"description":"Id записи на пропущенное занятие","type":"number","nullable":true,"example":null}},"required":["userId","lessonId"]},"UserLessonRecordIndividual":{"title":"Запись на занятие","properties":{"date":{"description":"Дата занятия","type":"string","format":"date","example":"2019-06-14"},"time":{"description":"Время занятия","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"teacherId":{"type":"integer","description":"ID преподавателя","example":1},"classId":{"description":"ID группы","type":"integer","example":1},"filialId":{"description":"ID филиала","type":"integer","example":1},"userId":{"description":"ID ученика","type":"integer","example":1}},"required":["date","time","teacherId","classId","userId"]},"UserLessonRecordLimited":{"title":"Запись на занятие","properties":{"id":{"description":"ID записи на занятие","type":"integer","format":"int64","readOnly":true,"example":4},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lessonId":{"$ref":"#/components/schemas/LessonRecord/properties/lessonId"},"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true,"readOnly":true},"visit":{"description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","default":false,"type":"boolean","example":false,"readOnly":true},"goodReason":{"description":"Уважительная причина отсутствия (true - есть уважительная причина, false - нет)","default":false,"type":"boolean","example":false,"readOnly":true},"test":{"description":"Пробная запись на занятие","default":false,"type":"boolean","readOnly":true},"skip":{"description":"Не учитывать запись в количестве занятых мест","default":false,"type":"boolean","readOnly":true}},"required":["userId","lessonId"]},"LessonRecordEdit":{"title":"Запись на занятия","properties":{"free":{"description":"Бесплатная запись (посещение для ученика будет бесплатным)","type":"boolean","default":false,"example":true},"visit":{"description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","default":false,"type":"boolean","example":false},"goodReason":{"description":"Уважительная причина отсутствия (true - есть уважительная причина, false - нет)","default":false,"type":"boolean","example":false},"test":{"description":"Пробная запись на занятие","type":"boolean","default":false,"example":false},"skip":{"description":"Не учитывать запись в количестве занятых мест","type":"boolean","default":false,"example":false}}},"LessonRecordExtended":{"allOf":[{"$ref":"#/components/schemas/LessonRecord"},{"type":"object","properties":{"workOffRecord":{"nullable":true,"$ref":"#/components/schemas/WorkOffLessonRecord"},"missedRecord":{"nullable":true,"$ref":"#/components/schemas/MissedLessonRecord"}}}]},"LessonWorkOffCreate":{"title":"Данные для записи на отработку","anyOf":[{"required":["userId","lessonId"],"properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lessonId":{"$ref":"#/components/schemas/LessonRecord/properties/lessonId"}}},{"required":["userId","lesson"],"title":"Данные для записи на индивидуальную отработку","properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"lesson":{"title":"Данные для создания индивидуального занятия","properties":{"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"filialId":{"$ref":"#/components/schemas/Class/properties/filialId"},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"roomId":{"description":"ID аудитории","type":"integer","format":"int64","example":100},"teacherId":{"description":"Массив ID преподавателей для записи","type":"array","items":{"type":"integer","format":"int64"}}}}}}]},"WorkOffLessonRecord":{"title":"Информация о занятии-отработке для пропущенного занятия ученика","properties":{"lessonRecordId":{"description":"ID записи на занятие отработку","type":"integer","format":"int64","readOnly":true,"example":2},"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"roomId":{"description":"ID аудитории","type":"integer","format":"int64","example":100},"visit":{"description":"Статус посещения (true - ученик посетил занятие, false - пропустил)","default":false,"type":"boolean","example":false,"readOnly":true},"lessonId":{"$ref":"#/components/schemas/LessonRecord/properties/lessonId"},"lessonStatus":{"description":"Статус занятия. 1 - Проведено, 0 - Не проведено","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"teacherIds":{"description":"Преподаватели","type":"array","items":{"type":"integer","format":"int64"}}}},"MissedLessonRecord":{"title":"Информация о пропущенном занятии для занятия отработки","properties":{"lessonRecordId":{"description":"ID записи на пропущенное занятие","type":"integer","format":"int64","readOnly":true,"example":2},"date":{"description":"Дата проведения","type":"string","format":"date","example":"2019-06-14"},"beginTime":{"description":"Время начала","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:00"},"endTime":{"description":"Время окончания","type":"string","pattern":"\\d\\d:\\d\\d","example":"09:40"},"roomId":{"description":"ID аудитории","type":"integer","format":"int64","example":100},"lessonId":{"$ref":"#/components/schemas/LessonRecord/properties/lessonId"},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"teacherIds":{"description":"Преподаватели","type":"array","items":{"type":"integer","format":"int64"}}}},"Join":{"title":"Запись","properties":{"id":{"description":"ID записи в группу","type":"integer","format":"int64","readOnly":true,"example":300},"userId":{"description":"ID ученика","type":"integer","format":"int32","example":300,"minimum":0,"maximum":2147483647},"classId":{"description":"ID группы","type":"integer","format":"int32","example":400,"minimum":0,"maximum":2147483647},"courseId":{"description":"ID программы","type":"integer","format":"int32","example":400,"minimum":0,"maximum":2147483647},"price":{"description":"Цена (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"number","format":"double","nullable":true,"minimum":0,"example":6000},"statusId":{"description":"Статус записи в группу","type":"integer","format":"int64","example":2},"stateChangedAt":{"$ref":"#/components/schemas/User/properties/stateChangedAt"},"statusChangeReasonId":{"description":"ID причины смены статуса","type":"integer","format":"int32","nullable":true,"readOnly":true,"example":1,"minimum":0,"maximum":2147483647},"autoJoin":{"description":"Автоматически записывать в статусе \"Учится\" на все занятия в группе","type":"boolean","example":true,"default":true},"autoDebit":{"description":"Автоматически списывать средства с баланса при наличии счета (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"boolean","example":true,"default":false},"remindDate":{"description":"Срок оплаты долга","type":"string","format":"date","deprecated":true,"example":"2019-06-14","nullable":true},"remindSum":{"description":"Сумма долга к оплате","type":"number","format":"double","deprecated":true,"example":500,"nullable":true},"managerId":{"description":"ID сотрудника, который создал запись в группу","type":"integer","format":"int64","example":300,"nullable":true},"stats":{"$ref":"#/components/schemas/JoinStats"},"comment":{"allOf":[{"$ref":"#/components/schemas/Lesson/properties/comment"},{"maxLength":1000}]},"advSourceId":{"$ref":"#/components/schemas/User/properties/advSourceId"},"createSourceId":{"$ref":"#/components/schemas/User/properties/createSourceId"},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"},"createdAt":{"description":"Дата создания","type":"string","format":"date-time","readOnly":true,"example":"2019-06-12T13:00:12.000Z"},"tags":{"readOnly":true,"description":"Теги","type":"array","items":{"type":"integer","format":"int64"},"nullable":true,"example":[0,4]},"params":{"allOf":[{"$ref":"#/components/schemas/JoinParams"},{"nullable":true,"description":"Параметры записи в группу. Параметры неполной оплаты (nextPay), подставляются из групп"}]},"invoices":{"readOnly":true,"type":"array","items":{"$ref":"#/components/schemas/UserInvoice"}}},"required":["classId","userId","statusId"]},"JoinEdit":{"title":"Запись в группу","properties":{"id":{"description":"ID записи в группу","type":"integer","format":"int32","readOnly":true,"example":300,"minimum":0,"maximum":2147483647},"statusId":{"description":"Статус записи в группу","type":"integer","format":"int32","example":2,"minimum":0,"maximum":2147483647},"price":{"description":"Цена (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"number","format":"double","nullable":true,"minimum":0,"example":6000},"statusChangeReasonId":{"description":"ID причины смены статуса. Используется при statusId = 1 или statusId = 4. Для изменения статуса записи в группу на \"Отказался\" (statusId = 1) используется набор причин клиента","type":"integer","format":"int32","nullable":true,"example":1,"minimum":0,"maximum":2147483647},"autoJoin":{"description":"Автоматически записывать в статусе \"Учится\" на все занятия в группе","type":"boolean","example":true,"nullable":true},"autoDebit":{"description":"Автоматически списывать средства с баланса при наличии счета (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"boolean","example":true},"comment":{"allOf":[{"$ref":"#/components/schemas/Lesson/properties/comment"},{"maxLength":1000}]},"advSourceId":{"$ref":"#/components/schemas/User/properties/advSourceId"},"createSourceId":{"$ref":"#/components/schemas/User/properties/createSourceId"},"managerId":{"allOf":[{"description":"ID сотрудника (используется только при createSourceId=1)"},{"$ref":"#/components/schemas/Contract/properties/managerId"}]},"params":{"allOf":[{"$ref":"#/components/schemas/JoinParams"},{"nullable":true}]}},"required":["statusId","createSourceId"]},"CreateJoinResult":{"title":"Результат создания записи","properties":{"joinId":{"description":"ID созданной записи","type":"integer","format":"int64"},"lessonsCount":{"description":"Количество созданных записей на занятия","type":"integer","format":"int64"}}},"UserJoin":{"title":"Заявка","properties":{"id":{"description":"ID заявки","type":"integer","format":"int64","readOnly":true,"example":300},"userId":{"$ref":"#/components/schemas/Join/properties/userId","readOnly":true},"classId":{"$ref":"#/components/schemas/Join/properties/classId"},"price":{"description":"Цена (для групп с разовой оплатой)","type":"number","format":"double","nullable":true,"example":6000,"readOnly":true},"status":{"description":"Статус заявки","type":"string","enum":["study","over"],"readOnly":true},"statusId":{"description":"ID статуса заявки","type":"number","example":1,"readOnly":true},"autoJoin":{"description":"Автоматически записывать на все занятия в группе","type":"boolean","example":true,"default":true,"readOnly":true},"autoDebit":{"description":"Автоматически списывать средства с баланса при наличии счета (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"boolean","example":true,"default":false},"remindDate":{"description":"Срок оплаты долга","type":"string","format":"date","example":"2019-06-14","nullable":true,"readOnly":true},"remindSum":{"description":"Сумма долга к оплате","type":"number","format":"double","example":500,"nullable":true,"readOnly":true},"stats":{"$ref":"#/components/schemas/JoinStats"},"lessonIds":{"description":"ID занятий, на которые нужно записать ученика при создании записи в группу","type":"array","items":{"type":"integer","format":"int64"},"writeOnly":true,"nullable":true},"summa":{"type":"number","example":500,"minimum":1,"writeOnly":true,"description":"Сумма частичной оплаты записи в группу (если включена опция в группе)"}},"required":["classId","userId"]},"JoinParams":{"title":"Дополнительные параметры записи в группу.","properties":{"autoCreateSubs":{"description":"Автоматически создавать абонементы для записи в статусе \"Учится\". Актуально только при форме оплаты За занятия/абонемент. По умолчанию значение берётся из группы","type":"boolean","example":true},"invoices":{"title":"Правила создания счета (только для групп с Формой оплаты Единой суммой/в рассрочку). Если не указаны, то берутся из настроек группы","nullable":true,"type":"object","properties":{"autoCreate":{"description":"Создавать ли счет автоматически","type":"boolean"},"createRule":{"description":"Когда создавать счет. Актуально при autoCreate=true. create - создать счет при создании заявки, setStatus - создать счет при установке статуса","type":"string","enum":["create","setStatus"]},"joinStateId":{"description":"Статусы заявки, при установке которых будет создан счет. Актуально при createRule=setStatus","nullable":true,"type":"array","items":{"type":"number"}},"payDateType":{"description":"Правила установки срока оплаты. relative - дата определяется относительно даты создания, exact - устанавливается точная дата оплаты","nullable":true,"type":"string","enum":["relative","exact"]},"payDateDays":{"description":"Количество дней, через сколько нужно оплатить счет. Например, если сегодня 2020-01-01, и payDateDays=3, то срок оплаты будет установлен в 2020-01-04. Актуально при payDateType=relative","nullable":true,"type":"number","minimum":0},"payDate":{"description":"Срок оплаты счета. Актуально при payDateType=exact","nullable":true,"type":"string","format":"date"}}}}},"JoinStats":{"title":"Статистика по записи в группу","readOnly":true,"properties":{"visits":{"description":"Количество посещений","type":"integer","format":"int32","example":5,"minimum":0,"maximum":2147483647},"freeVisits":{"description":"Количество бесплатных посещений","type":"integer","format":"int32","example":0,"minimum":0,"maximum":2147483647},"nextRecord":{"description":"Ближайшая запись на занятие","type":"string","format":"date","nullable":true},"lastVisit":{"description":"Последнее посещение","type":"string","format":"date","example":"2019-06-02","nullable":true},"lessonsLost":{"description":"Количество пропущенных занятий","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647},"totalPayed":{"description":"Внесенная сумма (для групп с разовой оплатой)","type":"number","format":"double","example":1000},"nonPayedLessons":{"description":"Количество неоплаченных занятий (занятия в долг)","type":"integer","format":"int32","example":1,"minimum":0,"maximum":2147483647}}},"Joins":{"title":"Список заявок","properties":{"joins":{"type":"array","items":{"$ref":"#/components/schemas/Join"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"StatusReason":{"title":"Причина изменения статуса","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"description":"Название","type":"string","maxLength":200,"example":"Не подходит график"}}},"UserAttribute":{"title":"Признак ученика","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"description":"Название","type":"string","maxLength":200,"example":"Уровень подготовки"},"alias":{"description":"Алиас","type":"string","maxLength":200,"example":"level"},"type":{"description":"Тип признака","type":"string","maxLength":30,"enum":["string","date","select","checkbox","boolean","number","unique","phone","email"]},"variants":{"description":"Варианты признака для типа **select**","type":"array","items":{"type":"object","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"description":"Название варианта","type":"string","maxLength":200,"example":"Начальный"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name"]}},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name","alias","type","createdAt"]},"Task":{"title":"Задача","properties":{"id":{"description":"ID сущности","type":"integer","format":"int64","readOnly":true,"example":1},"body":{"description":"Текст задачи","type":"string","maxLength":250,"example":"Позвонить Иванову Павлу, предложить абонемент"},"beginDate":{"description":"Начало задачи","type":"string","format":"date-time","example":"2019-06-13T10:00:00.000Z"},"endDate":{"description":"Окончание задачи","type":"string","format":"date-time","example":"2019-06-13T10:00:00.000Z"},"isAllDay":{"description":"Задача на весь день","type":"boolean","default":false,"example":false},"isComplete":{"description":"Задача выполнена","type":"boolean","default":false,"example":false},"reminds":{"description":"За сколько времени напомнить о задаче (в миллисекундах)","nullable":true,"type":"array","items":{"type":"integer","format":"int64"},"example":[900000,3600000]},"managerId":{"$ref":"#/components/schemas/Contract/properties/managerId","deprecated":true,"nullable":true},"managerIds":{"description":"Список id ответственных сотрудников (если одновременно указаны managerId и managerIds, то используется managerIds)","type":"array","items":{"type":"integer","format":"int64"},"example":[1,2,3]},"userId":{"description":"ID ученика","type":"integer","format":"int64","example":300,"nullable":true},"ownerId":{"description":"ID сотрудника, который создал задачу, null при автоматическом создании","type":"integer","format":"int64","example":300,"nullable":true},"classId":{"description":"ID группы","type":"integer","deprecated":true,"format":"int64","example":400,"nullable":true},"classIds":{"description":"Список ID групп","nullable":true,"type":"array","items":{"type":"integer","format":"int64"},"example":[1,2,3]},"filialId":{"description":"ID филиала","type":"integer","format":"int64","deprecated":true,"example":300,"nullable":true},"filialIds":{"description":"Список ID филиалов","type":"array","items":{"type":"integer","format":"int64"},"example":[1,2,3],"nullable":true},"categoryId":{"description":"ID категории задачи","type":"integer","format":"int64","example":1,"nullable":true},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["body","beginDate","endDate"]},"TaskCategory":{"title":"Категория задачи","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"name":{"description":"Название категории","type":"string","maxLength":200},"color":{"description":"Цвет категории в HEX формате","type":"string","example":"#f8bbd0"}},"required":["id","name","color"]},"Tasks":{"title":"Список задач","properties":{"tasks":{"type":"array","items":{"$ref":"#/components/schemas/Task"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"UserComments":{"title":"Список комментариев","properties":{"userComments":{"type":"array","items":{"$ref":"#/components/schemas/UserComment"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"KeyAuth":{"title":"Параметры для авторизации с помощью API ключа","properties":{"apiKey":{"description":"Ключ API","type":"string"}},"required":["apiKey"]},"UserAuth":{"title":"Параметры для авторизации с помощью логина и пароля аккаунта","properties":{"login":{"description":"Email аккаунта","type":"string"},"password":{"description":"Пароль аккаунта","type":"string"}},"required":["login","password"]},"AccessToken":{"title":"Токен для работы с API","properties":{"accessToken":{"description":"API Токен","type":"string"},"expiresAt":{"description":"Время жизни токена, После этого времени токен становится невалидным","type":"string","format":"date-time"},"level":{"description":"Уровень доступа токена. Определяет, к каким действиям будет открыт доступ.","type":"string","enum":["company","user"]}},"required":["accessToken","expiresAt","level"]},"AuthResult":{"title":"Результат авторизации","properties":{"csrfToken":{"description":"CSRF-токен. Действует в рамках сессии. Его нужно добавлять в каждый запрос в заголовок x-csrf-token","type":"string"},"expiresAt":{"description":"Время жизни токена, После этого времени токен становится невалидным","type":"string","format":"date-time"},"level":{"description":"Уровень доступа токена. Определяет, к каким действиям будет открыт доступ.","type":"string","enum":["user"]}},"required":["csrfToken","expiresAt","level"]},"SuccessTokenLogin":{"title":"Результат авторизации","properties":{"csrfToken":{"description":"CSRF-токен. Действует в рамках сессии. Его нужно добавлять в каждый запрос в заголовок x-csrf-token","type":"string"}},"required":["csrfToken","expiresAt","level"]},"AuthTokenResult":{"title":"Токен авторизации","properties":{"authToken":{"description":"Токен авторизации. Действует ограниченное время и только один раз.","type":"string"},"expiresAt":{"description":"Время жизни токена, После этого времени токен становится невалидным","type":"string","format":"date-time"},"level":{"description":"Уровень доступа токена. Определяет, к каким действиям будет открыт доступ.","type":"string","enum":["user"]}},"required":["authToken","expiresAt","level"]},"CompanyRestricted":{"title":"Компания","properties":{"name":{"description":"Название компании","type":"string"},"currency":{"description":"Валюта","type":"string"}}},"AccountRestricted":{"title":"Аккаунт","properties":{"id":{"description":"Id аккаунта","type":"integer","format":"int64"},"email":{"description":"Email","type":"string"},"params":{"description":"Настройки аккаунта","$ref":"#/components/schemas/AccountSettings"}}},"AccountInfo":{"title":"Основная информация по аккаунту","properties":{"account":{"$ref":"#/components/schemas/AccountRestricted"},"company":{"$ref":"#/components/schemas/CompanyRestricted"},"users":{"description":"Ученики аккаунта","type":"array","items":{"$ref":"#/components/schemas/UserRestricted"}},"subscriptions":{"description":"Текущие абонементы учеников","type":"array","items":{"$ref":"#/components/schemas/UserUserSubscription"},"readOnly":true},"filials":{"description":"Филиалы","type":"array","items":{"$ref":"#/components/schemas/UserFilial"}},"courses":{"description":"Программы","type":"array","items":{"$ref":"#/components/schemas/UserCourse"}},"classes":{"description":"Группы","type":"array","items":{"$ref":"#/components/schemas/UserClass"}},"managers":{"description":"Сотрудники","type":"array","items":{"$ref":"#/components/schemas/UserManager"}},"rooms":{"description":"Аудитории","type":"array","items":{"$ref":"#/components/schemas/UserRoom"}},"families":{"description":"Семьи, в которых состоят ученики. Представлены объектом, где каждый ключ – id ученика, а в качестве значения перечисляются участники его семьи.","type":"object"}}},"UserRestoreKey":{"title":"Данные для получения ключа восстановления пароля","properties":{"email":{"description":"Email аккаунта, на который будет отправлен ключ восстановления","type":"string"}},"required":["email"]},"UserRestorePassword":{"title":"Данные для установки нового пароля по ключу","properties":{"restoreKey":{"description":"Ключ восстановления пароля","type":"string"},"password":{"description":"Новый пароль","minLength":6,"type":"string"}},"required":["restoreKey","password"]},"UserPassword":{"title":"Пароль пользователя","properties":{"password":{"description":"Новый пароль","type":"string","minLength":6}}},"Image":{"title":"Изображение","properties":{"id":{"description":"ID изображения в системе","type":"integer","format":"int64","example":123456},"originalFilename":{"description":"Оригинальное имя файла","type":"string","example":"abc.png"},"url":{"description":"Полная ссылка к изображению","type":"string","example":"https://storage.net/images/mt/dp/abc.png"},"mimetype":{"description":"Тип изображения","type":"string","example":"image/png"},"width":{"description":"Ширина","type":"integer","format":"int64","example":4353},"height":{"description":"Высота","type":"integer","format":"int64","example":3433},"weight":{"description":"Размер файла","type":"integer","format":"int64","example":323432}}},"LkSettings":{"title":"Настройки личного кабинета компании","properties":{"companyName":{"description":"Название компании","type":"string"},"logo":{"description":"Логотип","type":"string","nullable":true},"color":{"description":"Основной цвет","type":"string"},"accentColor":{"description":"Цвет текста кнопок","type":"string"},"buttonsColor":{"description":"Цвет фона кнопок","type":"string"},"contacts":{"description":"Контакты компании","type":"object"},"allowPages":{"description":"Страницы, доступные для просмотра","type":"object"},"selectLessons":{"description":"Выбор занятий при записи в группу","type":"string"},"allowRecords":{"description":"Разрешать запись на занятия","type":"boolean"},"allowRecordsTimeout":{"description":"За сколько минут до начала запрещать запись","type":"integer"},"cancelRecords":{"description":"Разрешать запись на занятия","type":"string"},"cancelRecordsTimeout":{"description":"За сколько минут до начала запрещать отменять запись","type":"integer"},"yandexMetrikaCounter":{"description":"Счетчик Яндекс.Метрики","type":"string"},"googleAnalyticsCounter":{"description":"Счетчик Google Аналитики","type":"string"},"disableJoinWithStatuses":{"description":"Блокировать запись в группы/на занятия в определенных статусах","type":"boolean"}}},"AccountSettings":{"title":"Настройки аккаунта","properties":{"calendarFields":{"description":"Поля, отображаемые в календаре занятий","type":"array","items":{"type":"string","enum":["subject","teachers","rooms","filials","taskMarkers"]}},"calendarZoom":{"description":"Масштаб календаря","type":"string","enum":["small","medium","large"]},"calendarStartHour":{"description":"Начало дня в календаре","type":"integer","default":9},"truncateNames":{"description":"Обрезать названия, если не помещаются в одну строку в календаре","type":"boolean","default":false},"searchLessonsDefault":{"description":"Отображение занятий по-умолчанию. *all* - все, *mine* - только ученика","type":"string","enum":["all","mine"]},"searchFilialsDefault":{"description":"Отображение филиала по-умолчанию *all* - все, *selected* - выбранный филиал из searchFilialId","type":"string","enum":["all","selected"]},"searchFilialId":{"description":"Филиал для отображения занятий по-умолчанию","nullable":true,"type":"integer"}}},"UserComment":{"title":"Комментарий","properties":{"id":{"description":"ID комментария","type":"integer","example":1,"format":"int64","readOnly":true},"comment":{"description":"Текст комментария","type":"string"},"showToUser":{"description":"Видимость комментария для ученика","type":"boolean","example":true,"default":true},"userId":{"description":"ID пользователя","type":"integer","format":"int64","example":1},"lessonId":{"description":"ID занятия","type":"integer","format":"int64","example":1,"nullable":true},"classId":{"description":"ID группы","type":"integer","format":"int64","example":1,"nullable":true},"managerId":{"description":"ID менеджера","type":"integer","format":"int64","example":1,"nullable":true},"updatedAt":{"$ref":"#/components/schemas/User/properties/updatedAt"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["userId","comment"]},"UserCommentEdit":{"title":"Комментарии","properties":{"comment":{"description":"Текст комментария","type":"string"},"showToUser":{"description":"Видимость комментария для ученика","type":"boolean","default":true},"lessonId":{"description":"ID занятия","type":"integer","format":"int64","example":1,"nullable":true},"classId":{"description":"ID группы","type":"integer","format":"int64","example":1,"nullable":true},"managerId":{"description":"ID менеджера","type":"integer","format":"int64","example":1,"nullable":true}},"required":["comment"]},"Integration":{"title":"Интеграция","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"enabled":{"type":"boolean","description":"Включена ли интеграция"},"params":{"description":"Параметры","type":"object"}}},"VkEvent":{"title":"Событие в группе VK","properties":{"type":{"description":"Тип события","type":"string"},"group_id":{"description":"ID сообщества, в котором произошло событие","type":"integer"},"secret":{"description":"Секретный ключ callback сервера","type":"string"},"object":{"description":"Объект, инициировавший событие","type":"object"}},"required":["type","group_id","secret"]},"VkAdsEvent":{"title":"Событие в VK рекламе","properties":{"id":{"description":"ID события","type":"string"},"resource":{"description":"Тип события","type":"string"},"resource_id":{"description":"ID подписки","type":"integer"},"data":{"description":"Объект, инициировавший событие","type":"object"}},"required":["resource","resource_id","data"]},"FbEvent":{"title":"События лид форм FB","properties":{"object":{"description":"Тип объекта","type":"string"},"entry":{"description":"Список событий","type":"array","items":{"type":"object","properties":{"changes":{"type":"array","items":{"type":"object"}}}}}},"required":["object","entry"]},"TildaEvent":{"title":"Событие Tilda","properties":{"tranid":{"description":"Уникальный номер заявки","type":"string"},"formid":{"description":"Номер блока, с которого была отправка","type":"string"}}},"JivoSiteEvent":{"title":"Событие JivoSite","properties":{"event_name":{"description":"Код события","type":"string"}}},"LessonTask":{"title":"Задание на занятие","properties":{"files":{"type":"array","description":"Массив прикрепленных файлов","items":{"$ref":"#/components/schemas/LessonFile"}},"text":{"description":"Текст задания в формате HTML","type":"string"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}}},"HomeTask":{"title":"Задание на дом","properties":{"files":{"type":"array","description":"Массив прикрепленных файлов","items":{"$ref":"#/components/schemas/LessonFile"}},"text":{"description":"Текст задания в формате HTML","type":"string"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}}},"RestrictError":{"title":"Код ограничения доступа","properties":{"code":{"description":"Код","type":"string","enum":["noSubscription","noInvoice","earlyAccess"]},"data":{"type":"object","description":"Дополнительные данные"}}},"LessonTaskEdit":{"title":"Редактируемые данные задания","properties":{"text":{"description":"Текст задания в формате HTML","type":"string"}}},"LessonTaskFile":{"title":"Файл задания на занятие","properties":{"id":{"description":"ID файла","type":"integer"},"original":{"description":"Имя файла для отображения в CRM и личном кабинете ученика","type":"string"}}},"LessonMarkEdit":{"title":"Редактируемые данные оценки","properties":{"value":{"description":"Оценка","type":"number","example":5}}},"LessonFile":{"title":"Файл","properties":{"id":{"description":"ID файла","type":"integer","example":1,"format":"int64"},"original":{"description":"Имя файла","type":"string","example":"Документ.docx"},"size":{"description":"Размер файла (в байтах)","type":"number","example":472328},"downloadUrl":{"description":"Прямая ссылка на страницу скачивания файла","type":"string","nullable":true},"uploadState":{"description":"Состояние обработки файла","type":"string","enum":["done","process","error"],"nullable":true}}},"File":{"title":"Файл","properties":{"id":{"description":"ID файла","type":"integer","example":1,"format":"int64"},"original":{"description":"Имя файла","type":"string","example":"Документ.docx"},"size":{"description":"Размер файла (в байтах)","type":"number","example":472328},"downloadUrl":{"description":"Прямая ссылка на страницу скачивания файла","type":"string","nullable":true},"uploadState":{"description":"Состояние обработки файла","type":"string","enum":["done","process","error"],"nullable":true},"managerId":{"description":"ID сотрудника, загрузившего файл","type":"integer","example":1,"format":"int64","nullable":true},"manager":{"type":"object","description":"Сотрудник, оставивший комментарий","nullable":true},"contract":{"$ref":"#/components/schemas/Contract"},"comment":{"description":"Комментарий к файлу для ученика","type":"object","properties":{"managerId":{"type":"integer","description":"ID сотрудника, оставившего комментарий","nullable":true},"manager":{"type":"object","description":"Сотрудник, оставивший комментарий","nullable":true},"text":{"type":"string","description":"Текст комментария","nullable":true}}},"lessonId":{"description":"Занятие, к которому привязан файл","nullable":true,"type":"integer","format":"int64"}}},"Avatar":{"title":"Данные фото ученика","properties":{"filename":{"description":"Имя файла","type":"string","example":"Фото.png"},"mimetype":{"description":"MIME тип файла","type":"string","example":"image/png"},"data":{"description":"Данные base64","type":"string"}}},"Mark":{"title":"Оценка","properties":{"type":{"description":"Тип оценки","enum":["home","lesson"],"type":"string","example":"home"},"userId":{"description":"ID пользователя","type":"integer","format":"int64","example":1},"lessonId":{"description":"ID занятия","type":"integer","format":"int64","example":1},"value":{"description":"Оценка","type":"number","example":5},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}}},"TaskAnswerCommentCreate":{"title":"Комментарий к ответу на задание","properties":{"text":{"description":"Текст комментария","type":"string"},"managerId":{"description":"ID преподавателя, который оставил комментарий","type":"integer","format":"int64","example":1}}},"TaskAnswerCommentCreateUser":{"title":"Комментарий к ответу на задание","properties":{"text":{"description":"Текст комментария","type":"string"},"userId":{"description":"ID пользователя, который оставил комментарий","type":"integer","format":"int64","example":1}}},"TaskAnswerFileCreate":{"title":"Файл к ответу на задание","properties":{"data":{"description":"Данные в формате base64","type":"string"},"name":{"description":"Имя файла","type":"string","example":"Ответ.docx"}}},"TaskAnswerFileCreateUser":{"title":"Файл к ответу на задание","properties":{"data":{"description":"Данные в формате base64","type":"string"},"name":{"description":"Имя файла","type":"string","example":"Ответ.docx"},"scopeUserId":{"description":"ID пользователя, который прикрепляет файл","type":"integer","format":"int64","example":1}}},"FileCreateUser":{"title":"Свободный файл","properties":{"data":{"description":"Данные в формате base64","type":"string"},"name":{"description":"Имя файла","type":"string","example":"Ответ.docx"},"comment":{"description":"Комментарий ученика","type":"string","example":"Мой комментарий","nullable":true},"userId":{"description":"ID пользователя, который прикрепляет файл","type":"integer","format":"int64","example":1}}},"FileCreateCompany":{"title":"Свободный файл","properties":{"data":{"description":"Данные в формате base64","type":"string"},"name":{"description":"Имя файла","type":"string","example":"Ответ.docx"},"comment":{"description":"Комментарий сотрудника","type":"string","example":"Мой комментарий","nullable":true},"userComment":{"description":"Комментарий ученика/для ученика","type":"string","example":"Мой комментарий","nullable":true},"managerId":{"description":"ID сотрудника, который прикрепляет файл","type":"integer","format":"int64","example":1},"contractId":{"description":"ID договора ученика","type":"integer","format":"int64"},"userId":{"description":"ID ученика","type":"integer","format":"int64"},"visible":{"description":"Флаг определяющий виден ли файл ученику","default":false,"nullable":true,"type":"boolean","example":true}}},"FileEditCompany":{"title":"Редактирование файла","properties":{"comment":{"description":"Комментарий сотрудника","type":"string","example":"Мой комментарий","nullable":true},"userComment":{"description":"Комментарий ученика/для ученика","type":"string","example":"Мой комментарий","nullable":true},"managerId":{"description":"ID сотрудника, который редактирует файл","type":"integer","format":"int64","example":1,"nullable":true},"visible":{"description":"Флаг определяющий виден ли файл ученику","default":false,"nullable":true,"type":"boolean","example":true}}},"TaskAnswerComment":{"title":"Комментарий к ответу на задание","properties":{"id":{"description":"ID комментария","type":"integer","format":"int64","example":1},"isSystem":{"description":"Системный","type":"boolean","example":true},"text":{"description":"Текст комментария","type":"string"},"managerId":{"description":"ID сотрудника, оставившего комментарий","type":"integer","format":"int64","example":1},"managerName":{"description":"Имя сотрудника, оставившего комментарий","type":"string","example":"Иван Иванов"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}}},"ShortTaskAnswer":{"title":"Обрезанные данные ответа на задание (без текста ответа)","properties":{"id":{"description":"ID ответа","type":"integer","format":"int64","example":1},"type":{"description":"Тип оценки","enum":["home","lesson"],"type":"string","example":"home"},"status":{"description":"Статус","enum":["draft","sent","accept","return"],"type":"string","example":"draft"}}},"TaskAnswer":{"title":"Данные ответа на задание","required":["userId","type"],"properties":{"id":{"description":"ID ответа","type":"integer","readOnly":true,"format":"int64","example":1},"userId":{"description":"ID пользователя","type":"integer","format":"int64","example":1},"type":{"description":"Тип ответа","enum":["home","lesson"],"type":"string","example":"home"},"status":{"description":"Статус","enum":["draft","sent","accept","return"],"type":"string","example":"draft"},"text":{"description":"Текст ответа","type":"string","nullable":true},"comments":{"type":"array","readOnly":true,"items":{"$ref":"#/components/schemas/TaskAnswerComment"}},"files":{"description":"Файлы прикрепленные к ответу","readOnly":true,"type":"array","items":{"$ref":"#/components/schemas/LessonFile"}},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}}},"TaskAnswerCreateUser":{"title":"Данные создаваемого ответа","required":["userId","type"],"properties":{"userId":{"description":"ID ученика","type":"integer","format":"int64","example":1},"type":{"description":"Тип оценки","enum":["home","lesson"],"type":"string","example":"home"},"text":{"description":"Текст ответа","type":"string"}}},"TaskAnswerEditUser":{"title":"Редактируемые данные ответа","required":["userId"],"properties":{"text":{"description":"Текст ответа","type":"string"},"userId":{"description":"ID пользователя","type":"integer","format":"int64","example":1}}},"TaskAnswerEdit":{"title":"Редактируемые данные ответа","properties":{"text":{"description":"Текст ответа","type":"string"}}},"TaskAnswerStatus":{"title":"Редактируемые данные ответа","required":["managerId","status"],"properties":{"status":{"description":"Статус","enum":["draft","sent","accept","return"],"type":"string","example":"draft"},"managerId":{"description":"ID преподавателя, который сменил статус","type":"integer","format":"int64","example":1}}},"IgEvent":{"title":"Событие в Instagram","properties":{"type":{"description":"Тип события","type":"string"},"changes":{"type":"array","items":{"type":"object","properties":{"lead":{"type":"object"},"object":{"type":"object"}},"required":["lead","object"]}}},"required":["type","changes"]},"UploadFile":{"title":"Данные файла","required":["data","name"],"properties":{"data":{"description":"Данные в формате base64","type":"string","minLength":1},"name":{"description":"Имя файла. Недопустимы символы \"\\\\\" и \"/\". Пример допустимого имени: \"document.pdf\".\n","type":"string","minLength":1,"maxLength":255,"pattern":"^[^\\\\\\\\/]*$"}}},"DownloadFile":{"title":"Данные файла","properties":{"data":{"description":"Данные в формате base64","type":"string"},"original":{"description":"Имя файла","type":"string"},"mimetype":{"description":"mimetype файла","type":"string"}}},"AmoEvent":{"title":"Событие amoCRM","properties":{"leads":{"description":"Список сделок","type":"object"},"contacts":{"description":"Список контактов","type":"object"}}},"PaymentSystemEvent":{"title":"Событие в платежной системе"},"PaymentTochkaEvent":{"title":"Событие в платежной системе ТочкаБанка"},"SmsVizitkaEvent":{"title":"Событие в СМС-визитке"},"BitrixEvent":{"title":"Событие Bitrix24","properties":{"event":{"description":"Код события","type":"string"},"data":{"description":"Данные события","type":"object"}}},"UserSubscriptionEdit":{"description":"Абонемент ученика","properties":{"externalId":{"description":"Пользовательский номер абонемента","type":"string","example":"ЛТ-2305","nullable":true},"sellDate":{"description":"Дата продажи","type":"string","format":"date","example":"2019-06-14"},"beginDate":{"description":"Дата начала действия","type":"string","format":"date","example":"2019-06-14"},"endDate":{"description":"Дата окончания действия","type":"string","format":"date","example":"2019-06-14","nullable":true},"price":{"description":"Стоимость при продаже","type":"number","format":"double","example":1100,"minimum":0},"comment":{"description":"Комментарий","type":"string","example":"comment!"},"classIds":{"description":"Группы, в которых действует абонемент","type":"array","items":{"type":"integer","format":"int64"}},"period":{"description":"Срок действия","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"2 day"},"visitCount":{"description":"Количество занятий в абонементе","type":"integer","format":"int64","default":0,"example":1,"nullable":true,"minimum":0,"maximum":365},"mainClassId":{"description":"ID основной группы абонемента","type":"integer","format":"int64"}},"required":["sellDate","classIds","price","mainClassId","beginDate"]},"UserSubscriptionStats":{"title":"Статистика по абонементу","readOnly":true,"properties":{"totalPayed":{"description":"Внесенная сумма","type":"number","format":"float","example":1000},"lastPay":{"description":"Дата последней оплаты","type":"string","format":"date","example":"2021-04-12","nullable":true},"totalBilled":{"description":"Списано из из абонемента (расход)","type":"number","format":"float","example":40},"totalVisited":{"description":"Использованно посещений","type":"number","format":"int32","example":1},"totalBurned":{"description":"Сгорело занятий","type":"number","format":"int32","example":1}}},"UserSubscription":{"description":"Абонемент ученика","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":1},"externalId":{"description":"Пользовательский номер абонемента","type":"string","example":"ЛТ-2305","nullable":true},"userId":{"description":"ID ученика","type":"integer","format":"int64"},"subscriptionId":{"description":"ID вида абонемента","type":"integer","format":"int64","example":12},"price":{"description":"Стоимость при продаже (с учетом скидки и доп. компенсации)","type":"number","format":"double","example":1100,"readOnly":true},"originalPrice":{"description":"Цена абонемента (без учета скидки и доп. компенсации). При создании по умолчанию будет взята цена основного абонемента","type":"number","format":"double","example":2000},"discount":{"description":"Скидка, % от цены абонемента","type":"number","example":20,"minimum":0,"maximum":100,"nullable":true},"extraDiscount":{"description":"Дополнительная компенсация цены абонемента","type":"number","format":"double","example":500,"minimum":0,"nullable":true},"comment":{"description":"Комментарий","type":"string","example":"comment!","nullable":true},"sellDate":{"description":"Дата продажи","type":"string","format":"date","example":"2019-06-14"},"beginDate":{"description":"Дата начала действия. Если не указан, устанавливается в текущую дату.","type":"string","format":"date","example":"2019-06-14","nullable":true},"endDate":{"description":"Дата окончания действия","type":"string","format":"date","example":"2019-06-14","nullable":true},"overDate":{"description":"Дата закрытия абонемента","type":"string","format":"date","example":"2019-06-14","nullable":true,"readOnly":true},"payed":{"description":"Оплаченная сумма","type":"number","format":"double","example":990,"readOnly":true},"remindDate":{"description":"Срок оплаты долга","type":"string","format":"date","example":"2019-06-14","nullable":true,"readOnly":true},"remindSumm":{"description":"Сумма долга к оплате","type":"number","format":"double","example":500,"readOnly":true,"nullable":true},"classIds":{"description":"Группы, в которых действует абонемент","type":"array","items":{"type":"integer","format":"int64"}},"courseIds":{"description":"Программы, в которых действует абонемент","type":"array","items":{"type":"integer","format":"int64"},"nullable":true,"readOnly":true},"freezeFrom":{"description":"Дата начала заморозки","type":"string","format":"date","example":"2019-06-14","nullable":true,"readOnly":true},"freezeTo":{"description":"Дата окончания заморозки","type":"string","format":"date","example":"2019-06-14","nullable":true,"readOnly":true},"period":{"description":"Срок действия. При создании по умолчанию значение будет взято из основного абонемента","type":"string","nullable":true,"pattern":"^[0-9]+ (day|month|year)$","example":"2 day"},"visitCount":{"description":"Количество занятий в абонементе. При создании по умолчанию значение будет взято из основного абонемента","type":"integer","format":"int64","example":1,"nullable":true,"minimum":0,"maximum":365},"visitedCount":{"description":"Количество списанных занятий в абонементе. Вместо этого поля рекомендуется использовать поле stats.totalVisited","type":"integer","format":"int64","nullable":true,"readOnly":true,"deprecated":true},"statusId":{"description":"Статус абонемента:\n* `1` - Не активный\n* `2` - Активный\n* `3` - Заморожен\n* `4` - Окончен\n","type":"integer","format":"int64","readOnly":true},"mainClassId":{"description":"ID основной группы абонемента","type":"integer","format":"int64"},"managerId":{"description":"ID менеджера","type":"integer","format":"int64","nullable":true},"autoDebit":{"description":"Автоматически списывать средства с баланса при наличии счета (только для групп с Формой оплаты Единой суммой/в рассрочку)","type":"boolean","default":true},"burnLeftovers":{"description":"Списывать остатки абонемента после окончания его срока","type":"boolean","default":true},"useLeftovers":{"description":"Использовать оставшиеся посещения абонемента после окончания его срока автоматически","type":"boolean","default":true},"stats":{"$ref":"#/components/schemas/UserSubscriptionStats"}},"required":["sellDate","userId","subscriptionId","classIds","mainClassId"]},"UserSubscriptions":{"title":"Абонементы ученика","properties":{"subscriptions":{"type":"array","items":{"$ref":"#/components/schemas/UserSubscription"}},"stats":{"$ref":"#/components/schemas/Paging"}}},"Contract":{"title":"Документ","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"number":{"description":"Номер документа, поле может быть пустым если указан docNumTemplateId","type":"string","nullable":true,"maxLength":200},"name":{"description":"Название документа, поле может быть пустым если указан docNumTemplateId","type":"string","example":"Договор 1"},"type":{"description":"Тип документа, contract - договор, reference - справка, other - иное","type":"string","enum":["contract","reference","other"]},"date":{"description":"Дата заключения (для договора)","type":"string","format":"date","nullable":false,"example":"2019-06-12T00:00:00.000Z"},"endDate":{"description":"Дата расторжения","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateFrom":{"description":"Действует с","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateTo":{"description":"Действует по","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"managerId":{"description":"ID сотрудника","type":"integer","format":"int32","example":300,"minimum":0,"maximum":2147483647},"stateId":{"description":"ID состояния 1 - заключен, 2 - расторгнут","type":"integer","format":"int64","default":1,"enum":[1,2]},"price":{"description":"Цена","type":"number","format":"double","nullable":true,"example":2000},"startStudyDate":{"description":"Дата начала занятий","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endStudyDate":{"description":"Дата окончания занятий","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"astroHours":{"description":"Количество астрономических часов","type":"number","format":"double","nullable":true,"example":4},"academHours":{"description":"Количество академических часов","type":"number","format":"double","nullable":true,"example":3},"lessonsAmount":{"description":"Кол-во занятий","type":"integer","format":"int64","nullable":true,"example":1}}},"ContractCreate":{"title":"Документ","oneOf":[{"title":"Без шаблона нумерации","required":["name","number","type","date","managerId","userId"]},{"title":"С шаблоном нумерации","required":["docNumTemplateId","filialId","type","date","managerId","userId"]}],"properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"docNumTemplateId":{"description":"ID шаблона для генерации номера документа","type":"integer","format":"int64","nullable":true},"filialId":{"allOf":[{"description":"ID филиала. Указывается, если заполнено поле docNumTemplateId"},{"$ref":"#/components/schemas/Class/properties/filialId"}]},"number":{"description":"Номер документа","type":"string","nullable":true,"maxLength":200},"name":{"description":"Название документа","type":"string","example":"Договор 1"},"type":{"description":"Тип документа, contract - договор, reference - справка, other - иное","type":"string","enum":["contract","reference","other"]},"date":{"description":"Дата заключения (для договора)","type":"string","format":"date","nullable":false,"example":"2019-06-12T00:00:00.000Z"},"dateFrom":{"description":"Действует с","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateTo":{"description":"Действует по","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"managerId":{"$ref":"#/components/schemas/Contract/properties/managerId"},"stateId":{"description":"ID состояния 1 - заключен, 2 - расторгнут. Поле используется только в типе contract","type":"integer","format":"int64","default":1,"enum":[1,2]},"endDate":{"description":"Дата расторжения. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"price":{"description":"Цена. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":2000},"startStudyDate":{"description":"Дата начала занятий. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endStudyDate":{"description":"Дата окончания занятий. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"astroHours":{"description":"Количество астрономических часов. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":4},"academHours":{"description":"Количество академических часов. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":3},"lessonsAmount":{"description":"Кол-во занятий. Поле используется только в типе contract","type":"integer","format":"int64","nullable":true,"minimum":0,"example":1},"createEndTask":{"description":"Создать задачу при окончании","type":"boolean","nullable":true,"default":true},"sendEndNotify":{"description":"Оповещать об окончании","type":"boolean","nullable":true,"default":true},"selectedFreeFiles":{"nullable":true,"description":"ID файлов","type":"array","items":{"type":"integer","format":"int64"}}}},"ContractEdit":{"title":"Документ","properties":{"number":{"description":"Номер документа","type":"string","nullable":true,"maxLength":200},"name":{"description":"Название документа","type":"string","example":"Договор 1"},"date":{"description":"Дата заключения (для договора)","type":"string","format":"date","nullable":false,"example":"2019-06-12T00:00:00.000Z"},"dateFrom":{"description":"Действует с","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateTo":{"description":"Действует по","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"stateId":{"description":"ID состояния 1 - заключен, 2 - расторгнут. Поле используется только в типе contract","type":"integer","format":"int64","default":1,"enum":[1,2]},"endDate":{"description":"Дата расторжения. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"price":{"description":"Цена. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":2000},"startStudyDate":{"description":"Дата начала занятий. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endStudyDate":{"description":"Дата окончания занятий. Поле используется только в типе contract","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"lessonsAmount":{"description":"Кол-во занятий. Поле используется только в типе contract","type":"integer","format":"int64","nullable":true,"minimum":0,"example":1},"astroHours":{"description":"Количество астрономических часов. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":4},"academHours":{"description":"Количество академических часов. Поле используется только в типе contract","type":"number","format":"double","nullable":true,"minimum":0,"example":3},"createEndTask":{"description":"Создать задачу при окончании","type":"boolean","nullable":true,"default":true},"sendEndNotify":{"description":"Оповещать об окончании","type":"boolean","nullable":true,"default":true},"selectedFreeFiles":{"nullable":true,"description":"ID файлов","type":"array","items":{"type":"integer","format":"int64"}}}},"ContractResponse":{"title":"Документ","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id"},"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"number":{"description":"Номер документа, поле может быть пустым если указан docNumTemplateId","type":"string","nullable":true,"maxLength":200},"name":{"description":"Название документа, поле может быть пустым если указан docNumTemplateId","type":"string","example":"Договор 1"},"type":{"description":"Тип документа, contract - договор, reference - справка, other - иное","type":"string","enum":["contract","reference","other"]},"date":{"description":"Дата заключения (для договора)","type":"string","format":"date","nullable":false,"example":"2019-06-12T00:00:00.000Z"},"endDate":{"description":"Дата расторжения","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateFrom":{"description":"Действует с","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"dateTo":{"description":"Действует по","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"managerId":{"$ref":"#/components/schemas/Contract/properties/managerId"},"stateId":{"description":"ID состояния 1 - заключен, 2 - расторгнут","type":"integer","format":"int64","default":1,"enum":[1,2]},"price":{"description":"Цена","type":"number","format":"double","nullable":true,"example":2000},"startStudyDate":{"description":"Дата начала занятий","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"endStudyDate":{"description":"Дата окончания занятий","type":"string","format":"date","nullable":true,"example":"2019-06-12T00:00:00.000Z"},"astroHours":{"description":"Количество астрономических часов","type":"number","format":"double","nullable":true,"example":4},"academHours":{"description":"Количество академических часов","type":"number","format":"double","nullable":true,"example":3},"lessonsAmount":{"description":"Кол-во занятий","type":"integer","format":"int64","nullable":true,"example":1},"selectedFreeFiles":{"nullable":true,"description":"ID файлов","type":"array","items":{"type":"integer","format":"int64"}}}},"UserCreateOnlinePayment":{"title":"Данные для создания платежа","required":["userId","integrationId","payload"],"properties":{"userId":{"type":"number","format":"int64","example":123,"description":"ID ученика"},"integrationId":{"type":"number","format":"int64","example":144,"description":"ID интеграции с платежной системой"},"payload":{"description":"Информация о том, для чего нужно создать платеж","anyOf":[{"title":"Оплата счета","type":"object","required":["payFor","invoiceId"],"properties":{"payFor":{"type":"string","enum":["invoice"],"description":"Обозначение того, за что нужно заплатить"},"invoiceId":{"type":"number","format":"int64","example":333,"description":"Номер счета"},"debitFromBalans":{"type":"boolean","example":true,"description":"Списывать ли средства с баланса"},"summa":{"type":"number","example":500,"minimum":1,"description":"Сумма частичной оплаты долга за запись в группу/абонемент"}}},{"title":"Оплата на баланс","type":"object","required":["payFor","summa"],"properties":{"payFor":{"type":"string","enum":["balans"],"description":"Обозначение того, за что нужно заплатить"},"summa":{"type":"number","example":500,"minimum":1,"description":"Сумма платежа"}}},{"title":"Оплата абонемента для существующей записи в группу","type":"object","required":["payFor","subscriptionId","joinId"],"properties":{"payFor":{"type":"string","enum":["subForExistingJoin"],"description":"Обозначение того, за что нужно заплатить"},"subscriptionId":{"type":"number","format":"int64","example":126,"description":"ID вида абонемента"},"joinId":{"type":"number","format":"int64","example":127,"description":"ID записи в группу"},"subscriptionStartDate":{"description":"Дата начала действия абонемента (если в абонементе разрешен выбор даты)\n* `fromNow` - с даты оплаты\n* `fromThisMonth` - с начала текущего месяца\n* `fromNextMonth` - с начала следующего месяца\n","type":"string","enum":["fromNow","fromThisMonth","fromNextMonth"],"example":"fromThisMonth"},"debitFromBalans":{"type":"boolean","example":true,"description":"Списывать ли средства с баланса"},"summa":{"type":"number","example":500,"minimum":1,"description":"Сумма частичной оплаты при новой покупке"}}},{"title":"Оплата абонемента для новой записи в группу","type":"object","required":["payFor","subscriptionId","classId"],"properties":{"payFor":{"type":"string","enum":["subForNewJoin"],"description":"Обозначение того, за что нужно заплатить"},"subscriptionId":{"type":"number","format":"int64","example":126,"description":"ID вида абонемента"},"classId":{"type":"number","format":"int64","example":127,"description":"ID группы"},"lessonIds":{"description":"ID занятий, на которые нужно будет записать ученика при создании заявки","type":"array","items":{"type":"integer","format":"int64"},"writeOnly":true,"nullable":true},"subscriptionStartDate":{"description":"Дата начала действия абонемента (если в абонементе разрешен выбор даты)\n* `fromNow` - с даты оплаты\n* `fromThisMonth` - с начала текущего месяца\n* `fromNextMonth` - с начала следующего месяца\n","type":"string","enum":["fromNow","fromThisMonth","fromNextMonth"],"example":"fromThisMonth"},"debitFromBalans":{"type":"boolean","example":true,"description":"Списывать ли средства с баланса"},"summa":{"type":"number","example":500,"minimum":1,"description":"Сумма частичной оплаты при новой покупке"}}},{"title":"Оплата существующей записи в группу с типом оплаты \"единой суммой\"","type":"object","required":["payFor","joinId"],"properties":{"payFor":{"type":"string","enum":["existingJoin"],"description":"Обозначение того, за что нужно заплатить"},"joinId":{"type":"number","format":"int64","example":127,"description":"ID записи в группу"},"debitFromBalans":{"type":"boolean","example":true,"description":"Списывать ли средства с баланса"}}},{"title":"Оплата новой записи в группу с типом оплаты \"единой суммой\"","type":"object","required":["payFor","classId"],"properties":{"payFor":{"type":"string","enum":["newJoin"],"description":"Обозначение того, за что нужно заплатить"},"classId":{"type":"number","format":"int64","example":127,"description":"ID группы"},"lessonIds":{"description":"ID занятий, на которые нужно будет записать ученика при создании заявки","type":"array","items":{"type":"integer","format":"int64"},"writeOnly":true,"nullable":true},"debitFromBalans":{"type":"boolean","example":true,"description":"Списывать ли средства с баланса"},"summa":{"type":"number","example":500,"minimum":1,"description":"Сумма частичной оплаты записи в группу (если включена опция в группе)"}}}]}}},"SubscriptionsGrouping":{"description":"Группировка видов абонементов","properties":{"id":{"description":"ID","type":"integer","format":"int64","readOnly":true,"example":100},"name":{"description":"Название","type":"string","maxLength":50,"minLength":2,"example":"Мультиабонеметы"},"description":{"description":"Короткое описание группировки","type":"string","maxLength":250,"nullable":true,"example":"В этой группировке находятся только мультиабонементы"},"createdAt":{"$ref":"#/components/schemas/Join/properties/createdAt"}},"required":["id","name"]},"CashboxEdit":{"title":"Касса","properties":{"name":{"description":"Название","type":"string","maxLength":50,"minLength":3,"example":"Главная касса налички"},"networkIds":{"description":"ID сетей.","type":"array","items":{"type":"integer","format":"int64"},"example":[2]},"filialIds":{"description":"ID филиалов для которых доступна касса.","type":"array","items":{"type":"integer","format":"int64"},"example":[2,3]},"allowNegative":{"description":"Может ли у кассы быть отрицательный баланс","type":"boolean","example":true,"default":false},"initialBalance":{"type":"number","description":"Начальное количество средств в кассе","example":100,"default":0},"registerVisibility":{"description":"ID менеджеров и ролей, кто может видеть информацию по кассе\n* `integer` - ID менеджера\n* `string` - role_ + ID роли\n","type":"array","items":{"oneOf":[{"type":"string"},{"type":"integer"}]},"example":["role_1",2]},"balanceVisibility":{"description":"ID менеджеров и ролей, кто может видеть баланс кассы (из тех кто видит кассу)\n* `integer` - ID менеджера\n* `string` - role_ + ID роли\n","type":"array","items":{"oneOf":[{"type":"string"},{"type":"integer"}]},"example":["role_1",2]},"comment":{"description":"Комментарий к кассе","type":"string","nullable":true,"example":null},"statusId":{"description":"Статус кассы:\n* `0` - Архив\n* `1` - Активный\n","default":1,"type":"integer","format":"int64"}}},"CashboxCreate":{"title":"Касса","allOf":[{"type":"object","properties":{"paymentTypeId":{"type":"number","description":"Id типа оплаты"}}},{"$ref":"#/components/schemas/CashboxEdit"}],"required":["paymentTypeId","name","filialIds"]},"Cashbox":{"title":"Касса","allOf":[{"type":"object","properties":{"id":{"description":"ID кассы в системе","type":"integer","format":"int64","example":123456},"paymentTypeId":{"type":"number","description":"Id типа оплаты","example":7}}},{"$ref":"#/components/schemas/CashboxEdit"},{"type":"object","properties":{"balance":{"type":"number","description":"Текущее количество средств в кассе","example":100,"default":0}}}]},"Cashboxes":{"title":"Кассы","properties":{"cashboxes":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Cashbox"},{"type":"object","properties":{"balance":{"type":"number","description":"Текущее количество средств в кассе","example":100,"default":0}}}]}}}},"CloudPaymentsPaymentObject":{"type":"object","properties":{"publicId":{"type":"string","description":"Публичный ключ из настроек интеграции","example":"vfZa4YpZpVs1v0O1QZadU5xtey8esIIF"},"description":{"type":"string","description":"Описание платежа","example":"Оплата за заказ"},"amount":{"type":"number","description":"Сумма платежа","example":1000},"currency":{"type":"string","description":"Валюта платежа","example":"RUB"},"invoiceId":{"type":"string","description":"Идентификатор заказа","example":"a7e91f5d-a13b-420f-8436-610e259e6d86"},"email":{"type":"string","description":"Email покупателя","example":"example@site.com"},"payer":{"type":"object","properties":{"phone":{"type":"string","description":"Телефон покупателя","example":79001112233}}},"data":{"type":"object","nullable":true,"properties":{"CloudPayments":{"type":"object","properties":{"CustomerReceipt":{"type":"object","properties":{"phone":{"type":"string","description":"Телефон покупателя","example":79001112233},"email":{"type":"string","description":"Email покупателя","example":"example@site.com"},"customerInfo":{"type":"string","description":"ФИО покупателя","example":"Иванов Иван"},"Items":{"type":"array","description":"Товарные позиции","items":{"type":"object","properties":{"label":{"type":"string","description":"Наименование товара","example":"Наименование товара"},"price":{"type":"number","description":"Цена за единицу товара","example":1000},"quantity":{"type":"number","description":"Количество товара","example":1},"amount":{"type":"number","description":"Общая сумма за товар","example":1000},"vat":{"type":"number","nullable":true,"description":"Ставка НДС","example":12},"method":{"type":"number","description":"Признак способа расчета","example":1},"object":{"type":"number","description":"Признак предмета расчета","example":1},"measurementUnit":{"type":"string","description":"Единица измерения","example":"шт"}}}}}}}}}}}},"TipTopPayPaymentObject":{"type":"object","properties":{"publicId":{"type":"string","description":"Публичный ключ из настроек интеграции","example":"vfZa4YpZpVs1v0O1QZadU5xtey8esIIF"},"description":{"type":"string","description":"Описание платежа","example":"Оплата за заказ"},"amount":{"type":"number","description":"Сумма платежа","example":1000},"currency":{"type":"string","description":"Валюта платежа","example":"RUB"},"invoiceId":{"type":"string","description":"Идентификатор заказа","example":"a7e91f5d-a13b-420f-8436-610e259e6d86"},"email":{"type":"string","description":"Email покупателя","example":"example@site.com"},"payer":{"type":"object","properties":{"phone":{"type":"string","description":"Телефон покупателя","example":79001112233}}},"data":{"type":"object","nullable":true,"properties":{"PaymentData":{"type":"object","properties":{"CustomerReceipt":{"type":"object","properties":{"phone":{"type":"string","description":"Телефон покупателя","example":79001112233},"email":{"type":"string","description":"Email покупателя","example":"example@site.com"},"customerInfo":{"type":"string","description":"ФИО покупателя","example":"Иванов Иван"},"Items":{"type":"array","description":"Товарные позиции","items":{"type":"object","properties":{"label":{"type":"string","description":"Наименование товара","example":"Наименование товара"},"price":{"type":"number","description":"Цена за единицу товара","example":1000},"quantity":{"type":"number","description":"Количество товара","example":1},"amount":{"type":"number","description":"Общая сумма за товар","example":1000},"vat":{"type":"number","nullable":true,"description":"Ставка НДС","example":12},"method":{"type":"number","description":"Признак способа расчета","example":1},"object":{"type":"number","description":"Признак предмета расчета","example":1},"measurementUnit":{"type":"string","description":"Единица измерения","example":"шт"}}}}}}}}}}}},"BPLevel":{"type":"object","properties":{"id":{"$ref":"#/components/schemas/Task/properties/id","description":"ID уровня"},"name":{"description":"Название уровня","example":"Бронзовый уровень"},"isSystem":{"description":"Системный уровень БП","type":"boolean","example":true}}},"Family":{"type":"object","properties":{"familyId":{"description":"ID семьи (указывается при добавлении участника в существующую семью)","type":"integer","format":"int32","example":3,"minimum":0,"maximum":2147483647},"familyMembers":{"description":"Участники семьи","type":"array","items":{"type":"object","properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"comment":{"type":"string","description":"Комментарий об участнике семьи. При повторном указании, комментарий не изменяется","example":"Брат"}},"required":["userId"]}}}},"FamilyResponse":{"type":"object","properties":{"familyId":{"description":"ID семьи","type":"integer","format":"int32","example":3,"minimum":0,"maximum":2147483647},"familyMembers":{"description":"Участники семьи","type":"array","items":{"type":"object","properties":{"userId":{"$ref":"#/components/schemas/Join/properties/userId"},"comment":{"type":"string","description":"Комментарий об участнике семьи","example":"Брат"}},"required":["userId"]}}}},"FamilyMember":{"type":"object","properties":{"familyId":{"description":"ID семьи","type":"integer","format":"int32","example":3,"readOnly":true,"minimum":0,"maximum":2147483647},"userId":{"description":"ID ученика","type":"integer","format":"int32","example":300,"readOnly":true,"minimum":0,"maximum":2147483647},"comment":{"type":"string","description":"Комментарий об участнике семьи","example":"Брат"}}}},"parameters":{"lessonId":{"name":"lessonId","description":"ID занятия","in":"query","style":"form","explode":false,"schema":{"type":"array","maxItems":100,"items":{"type":"integer","format":"int64","maximum":2147483647}},"example":42},"offset":{"name":"offset","in":"query","description":"Номер первой записи. Используется для постраничного вывода.","schema":{"type":"integer","default":0},"example":0},"limit":{"name":"limit","in":"query","description":"Максимальное количество возвращаемых строк. Используется для постраничного вывода.","schema":{"type":"integer","default":100,"maximum":500},"example":0},"sortDirection":{"name":"sortDirection","in":"query","description":"Направление сортировки","schema":{"default":"asc","type":"string","enum":["asc","desc"]},"example":"asc"},"createdAt":{"name":"createdAt","in":"query","description":"Дата создания. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону.","style":"form","explode":false,"schema":{"oneOf":[{"type":"array","maxLength":2,"items":{"type":"string","format":"date","description":"Дата YYYY-MM-DD. Пример: 2020-01-01"}},{"type":"array","maxLength":2,"items":{"type":"string","format":"date-time","description":"Дата в формате YYYY-MM-DDTHH:mm:ssZ. Пример: 2020-01-01T00:00:00Z"}},{"type":"array","maxLength":2,"items":{"type":"string","pattern":"^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]).+?(\\d{2}:\\d{2})$","description":"Дата со смещением. Пример: 2020-01-01T00:00:00+00:00"}}]}},"updatedAt":{"name":"updatedAt","in":"query","description":"Дата изменения. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону.","style":"form","explode":false,"schema":{"oneOf":[{"type":"array","maxLength":2,"items":{"type":"string","format":"date","description":"Дата YYYY-MM-DD. Пример: 2020-01-01"}},{"type":"array","maxLength":2,"items":{"type":"string","format":"date-time","description":"Дата в формате YYYY-MM-DDTHH:mm:ssZ. Пример: 2020-01-01T00:00:00Z"}},{"type":"array","maxLength":2,"items":{"type":"string","pattern":"^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]).+?(\\d{2}:\\d{2})$","description":"Дата со смещением. Пример: 2020-01-01T00:00:00+00:00"}}]}},"stateChangedAt":{"name":"stateChangedAt","in":"query","description":"Дата изменения статуса. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону.","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},"period":{"name":"date","in":"query","description":"Период. Если указана одна дата, то происходит поиск только по одной дате. Если указаны 2 даты, то производится поиск по диапазону.","style":"form","explode":false,"schema":{"type":"array","maxLength":2,"items":{"type":"string","format":"date"}},"example":"2019-01-01"},"filialId":{"name":"filialId","description":"ID филиала.","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int32","maximum":2147483647,"minimum":0}},"example":4},"courseId":{"in":"query","name":"courseId","description":"ID программы.","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":3},"classId":{"name":"classId","description":"ID группы","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":10},"roomId":{"name":"roomId","description":"ID аудитории","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int64","maximum":2147483647}},"example":43},"teacherId":{"name":"teacherId","description":"ID сотрудника - преподавателя","in":"query","schema":{"type":"array","items":{"type":"integer","format":"int64","maximum":2147483647}},"example":2},"contractId":{"name":"contractId","description":"ID документа.","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int64"}},"example":4},"lessonStatusId":{"name":"statusId","description":"Статус занятия. 0 - не проведено, 1 - проведено","in":"query","schema":{"type":"integer"},"example":0},"lessonVisitStatus":{"name":"visit","description":"Статус посещения занятия ученика, указанного в userId. Без указания userId не имеет смысла. visited - Посетил, lost - Пропустил. Выбираются только проведенные занятия.\n","in":"query","schema":{"type":"string","enum":["visited","lost"]},"example":"visited"},"lessonUserId":{"name":"userId","description":"ID ученика, записанного на занятие","in":"query","schema":{"type":"integer","format":"int64","maximum":2147483647},"example":123},"scopeUserId":{"name":"scopeUserId","description":"ID ученика для определения видимости занятий","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"joinStatusId":{"name":"statusId","description":"Статус записи","in":"query","schema":{"type":"integer"},"example":0},"joinUserId":{"name":"userId","description":"ID ученика","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"userId":{"name":"userId","description":"ID ученика","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"managerId":{"name":"managerId","description":"ID сотрудника","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"phone":{"name":"phone","in":"query","description":"Номер телефона. Mожно указать часть номера для поиска по подстроке.","schema":{"type":"string","maxLength":15},"example":790012312323},"email":{"name":"email","in":"query","description":"Email. Можно указать часть адреса для поиска по подстроке","schema":{"type":"string"},"example":"foo@site.com"},"name":{"name":"name","in":"query","description":"Имя. Можно указать часть имени для поиска по подстроке.","schema":{"type":"string"},"example":"Иванов"},"includeJoins":{"name":"includeJoins","in":"query","description":"Включить в ответ записи учеников","schema":{"type":"boolean","default":false,"example":true}},"includeLessons":{"name":"includeLessons","in":"query","description":"Включить в ответ информацию о занятии","schema":{"type":"boolean","default":false,"example":true}},"includeBills":{"name":"includeBills","in":"query","description":"Включить в ответ данные о списании","schema":{"type":"boolean","default":false,"example":true}},"debt":{"name":"debt","in":"query","description":"Занятия в долг (не оплаченные)","schema":{"type":"boolean","example":true}},"taskCompleted":{"name":"isComplete","in":"query","description":"Статус задачи, завершена или нет.","schema":{"type":"boolean","example":true}},"includeRecords":{"name":"includeRecords","in":"query","description":"Включить в ответ записи на занятия","schema":{"type":"boolean","default":false,"example":true}},"includeWorkOffs":{"name":"includeWorkOffs","in":"query","description":"Включить в ответ к записи на занятие информацию об отработке (для пропуска) / пропущенном занятии (для отработки)","schema":{"type":"boolean","default":false,"example":true}},"includeComments":{"name":"includeComments","in":"query","description":"Включить в ответ комментарии к занятию","schema":{"type":"boolean","default":false,"example":true}},"includeMarks":{"name":"includeMarks","in":"query","description":"Включить в ответ оценки к занятию","schema":{"type":"boolean","default":false,"example":true}},"includeUserSubscriptions":{"name":"includeUserSubscriptions","in":"query","description":"Включить в ответ абонементы ученика","schema":{"type":"boolean","default":false,"example":true}},"includeTasks":{"name":"includeTasks","in":"query","description":"Включить в ответ задания к занятию","schema":{"type":"boolean","default":false,"example":true}},"includeTasksLimited":{"name":"includeTasksLimited","in":"query","description":"Включить в ответ данные о заданиях к занятию, кроме самого текста задания","schema":{"type":"boolean","default":false,"example":true}},"includeTaskAnswers":{"name":"includeTaskAnswers","in":"query","description":"Включить в ответ ответы на задание","schema":{"type":"boolean","default":false,"example":true}},"includeParams":{"name":"includeParams","in":"query","description":"Включить в ответ дополнительную информацию к занятию","schema":{"type":"boolean","default":false,"example":true}},"includeClasses":{"name":"includeClasses","in":"query","description":"Включить в ответ группы","schema":{"type":"boolean","default":false,"example":true}},"includeImages":{"name":"includeImages","in":"query","description":"Включить в ответ изображения","schema":{"type":"boolean","default":false,"example":true}},"includeManagers":{"name":"includeManagers","in":"query","description":"Включить в ответ сотрудников","schema":{"type":"boolean","default":false,"example":true}},"includeAttributes":{"name":"includeAttributes","in":"query","description":"Включить в ответ признаки","schema":{"type":"boolean","default":false,"example":true}},"includeDescription":{"name":"includeDescription","in":"query","description":"Включить в ответ описание","schema":{"type":"boolean","default":false,"example":true}},"userSubscriptionStatus":{"name":"statusId","in":"query","description":"Статус абонемента:\n* `1` - Не активный\n* `2` - Активный\n* `3` - Заморожен\n* `4` - Окончен\n","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer"}}},"fileId":{"name":"fileId","description":"ID файла","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"reasonType":{"name":"type","in":"query","description":"Тип причины","schema":{"type":"string","example":"join","default":"join","enum":["join","client"]}},"amoCRMContactId":{"name":"amoCRMContactId","description":"Id контакта amoCRM","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"bitrixContactId":{"name":"bitrixContactId","description":"Id контакта Битрикс24","in":"query","schema":{"type":"integer","format":"int64"},"example":124},"vkAdsBannerId":{"name":"vkAdsBannerId","description":"Id объявления VK Реклама","in":"query","schema":{"type":"integer","format":"int64"},"example":124},"includeSubscriptions":{"name":"includeSubscriptions","in":"query","description":"Включить в ответ виды абонементов","schema":{"type":"boolean","default":false,"example":true}},"includePayLink":{"name":"includePayLink","in":"query","description":"Включить в ответ ключи оплаты","schema":{"type":"boolean","default":false,"example":true}},"includeAvatarLink":{"name":"includeAvatarLink","in":"query","description":"Включить в ответ ссылку на фото","schema":{"type":"boolean","default":false,"example":true}},"cashboxId":{"name":"cashboxId","description":"ID кассы","in":"query","schema":{"type":"integer","format":"int64"},"example":123},"includeFamilySubs":{"name":"includeFamilySubs","in":"query","description":"Включить в ответ семейные абонементы (при переданном параметре userId)","schema":{"type":"boolean","default":false,"example":true}},"familyId":{"name":"familyId","description":"ID семьи","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":3},"beginTime":{"name":"beginTime","in":"query","description":"Время начала","schema":{"type":"string","pattern":"^([0-1]\\d|2[0-3])(:[0-5]\\d)$","example":"09:00"}},"endTime":{"name":"endTime","in":"query","description":"Время окончания","schema":{"type":"string","pattern":"^([0-1]\\d|2[0-3])(:[0-5]\\d)$","example":"09:40"}},"clientStateId":{"name":"clientStateId","description":"ID статуса клиента","in":"query","style":"form","explode":false,"schema":{"type":"array","items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":42},"includeStats":{"name":"includeStats","in":"query","description":"Включить в ответ общую информацию по долгу и доходу","schema":{"type":"boolean","default":false,"example":true}},"userIds":{"name":"userIds","description":"Массив с ID учеников","in":"query","style":"form","explode":false,"schema":{"type":"array","maxItems":100,"items":{"type":"integer","format":"int32","minimum":0,"maximum":2147483647}},"example":42}}}}